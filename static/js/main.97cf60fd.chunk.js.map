{"version":3,"sources":["../../Antmedia_Videocall_Module/SDK/peerStats.js","../../Antmedia_Videocall_Module/SDK/mergerAdaptor.js","../../Antmedia_Videocall_Module/SDK/RTCsocketAdaptor.js","VideoConsultation/Image/user.png","VideoConsultation/VideoCall/VideoCalls/RemoteVideo.jsx","VideoConsultation/VideoCall/ParticipantList/ParticipantList.jsx","VideoConsultation/VideoCall/fileUploader/VideoCallFileUploader.js","Services/httpService.js","Services/videoCallServices.js","VideoConsultation/Image/bgImage.svg","VideoConsultation/Image/screen.svg","VideoConsultation/VideoCall/TypingAnimation/TypingAnimation.jsx","VideoConsultation/VideoCall/VideoCalls/VideoConsult.jsx","VideoConsultation/Image/videohome.svg","VideoConsultation/VideoCall/VideoHome/VideoHome.jsx","VideoConsultation/Image/endcall.gif","VideoConsultation/VideoCall/EndCall/EndCall.jsx","App.js","reportWebVitals.js","index.js","../../Antmedia_Videocall_Module/SDK/sdk.js"],"names":["PeerStats","streamId","this","totalBytesReceivedCount","totalBytesSent","videoPacketsLost","fractionLost","startTime","lastFramesEncoded","totalFramesEncodedCount","lastBytesReceived","lastBytesSent","currentTimestamp","lastTime","timerId","firstByteSentCount","firstBytesReceivedCount","audioLevel","qualityLimitationReason","resWidth","resHeight","srcFps","frameWidth","frameHeight","videoRoundTripTime","videoJitter","audioRoundTripTime","audioJitter","audioPacketsLost","framesReceived","framesDropped","framesDecoded","audioJitterAverageDelay","videoJitterAverageDelay","Math","floor","totalBytesSentCount","toFixed","timestamp","bytesReceived","bytesSent","framesEncoded","module","exports","StreamMerger","width","height","autoMode","aspectRatio","recordingEnabled","streams","AudioContext","window","webkitAudioContext","audioCtx","audioDestination","createMediaStreamDestination","stream_height","stream_width","pwidth","pheight","vwidth","wheight","canvas","document","createElement","setAttribute","ctx","getContext","streamCount","frameCount","videoSyncDelayNode","createDelay","connect","started","fps","ratio","console","log","resizeAndSortV2","result","mediaStream","options","stream","resume","Xindex","Yindex","portrait","undefined","x","y","debug","mute","videoElement","autoplay","muted","srcObject","body","appendChild","audioSource","createMediaStreamSource","audioGainNode","createGain","gain","value","element","push","onloadedmetadata","getVideoTracks","getSettings","xoffset","callback","fired","interval","setInterval","hidden","clearInterval","requestAnimationFrame","clearRect","xindex","yindex","yNumber","cropWidth","cropHeight","topWidth","remainingStreams","length","widthOffset","heightOffset","divider","pcheight","pcwidth","i","temp","extraStreams","tmp","vheight","requestAnimationFrameV2","draw","bind","captureStream","deadTrack","getAudioTracks","removeTrack","audioTracks","addTrack","awaiting","done","forEach","drawImage","remove","splice","close","getTracks","track","stop","WebSocketAdaptor","initialValues","key","hasOwnProperty","wsConn","WebSocket","websocket_url","isWebSocketTriggered","connected","pingTimerId","onopen","sendPing","onmessage","event","obj","JSON","parse","data","command","webrtcadaptor","startPublishing","candidate","takeCandidate","label","type","takeConfiguration","sdp","closePeerConnection","callbackError","definition","multiPeerStreamId","join","onerror","error","stringify","clearPingTimer","onclose","send","text","readyState","RemoteVideo","props","componentDidMount","a","videoTrack","updateStream","state","index","replace","audioTrack","webRTCAdaptor","multiStream","getTrackById","setState","axios","get","u","userDict","name","Name","username","userName","notifyUser","ledger","handRiseEvents","raiseIfRequired","checkMicSensitivity","MediaStream","className","id","onContextMenu","e","preventDefault","ref","video","poster","posterImg","autoPlay","playsInline","title","style","display","color","PureComponent","ParticipantList","MediaStreamList","Object","keys","onClick","onToogleParticipant","UserName","values","map","user","Component","asField","fieldState","fieldApi","faClass","setValue","setTouched","field","onChange","onBlur","forwardedRef","initialValue","content","rest","FileonChange","position","htmlFor","required","classnames","target","helper","alt","src","post","put","delete","cookies","Cookies","getCookies","sendInviteSms","mobileNo","details","link","apiEndPoint","apiurl","http","headers","smskey","sendInviteMail","email","subject","getDoctorSearchList","createNewRoom","roomName","antMediaUrl","Authorization","staticToken","TypingAnimation","Area","Increment","Count","Width","Height","Margin","w","h","ReSize","Scenary","getElementById","offsetWidth","offsetHeight","Cameras","getElementsByClassName","max","margin","s","setWidth","roomId","publishStreamId","roomTimerId","userList","Option","Select","VideoConsult","openNotification","message","placement","notification","open","description","navigateToDashboard","url","ConsultationId","customCallback","info","media","replyType","messageHistory","from","decryptMessage","umessageId","timeStamp","$","append","addEventListener","chatHandlerReply","reply","mr","messageReplyHistory","endDate","split","yyyy","mm","dd","firstDate","Date","secondDate","diffDays","round","abs","dateChat","newTime","duration","hour","min","sec","strTime","toLocaleString","minute","hour12","callDuration","fileHistory","file","fileHandlerReply","fr","fileReplyHistory","leftChat","messageComponent","scrollDiv","current","scrollIntoView","behavior","block","seenStatus","setDouble","actualMessage","messageSent","newMessage","messageComponent2","messageComponent3","justSend","mesRecdata","dbName","secToken","emit","ReactHtmlParser","TypingName","isTyping","playOnly","isCameraOff","isConnectionRefreshEnabled","autoJoin","joinRoom","warn","room","ATTR_ROOM_NAME","roomOfStream","play","token","publish","item","streamsList","getRoomInfo","MultiStream","forceUpdate","streamInformation","tempList","isPlaying","str","includes","isDataChannelOpen","handleNotificationEvent","reInit","handId","videotag","thumbsupId","heartId","partEmoji","raiseHand","screenShareStream","getHandRaiseEmojiTag","setTimeout","isScreenShare","stopScreenShare","micDetails","eventType","innerHTML","participantList","participantCount","isRecording","defaultErrorCallback","indexOf","location","reload","errorMessage","isError","displayMessage","webSocketModel","getvaluesfromurl","openJoinModal","onresize","search","queries","queryString","UserRole","USERROLE","Automate","automationKey","isAutomate","initiateWebRtc","WebRTCAdaptor","mediaConstraints","isCameraOn","audio","isMicOn","localVideoId","ioPath","backgroundChange","backgroundChangeCl","removeBackground","checkCameraPerMission","navigator","mediaDevices","getUserMedia","then","catch","err","isCameraAccess","getlocalVideo","LocalStream","videoEle","querySelector","stopLocalStream","getPerViewLocalVideo","muteMic","muteLocalMic","res","unMuteMic","unmuteLocalMic","turnOfCamera","turnOffLocalCamera","turnOnCamera","turnOnLocalCamera","enableRecording","disableRecording","startScreenShare","endCall","history","pathname","SubDirectory","isJoinModal","formApiJoin","closeJoinModal","handleJoinOk","inputData","getValue","handleJoinCancel","onEnableCamera","checked","openInvitation","$temp","$url","attr","val","select","execCommand","inviteUrl","isInviteModal","DoctorData","SelectedDoctor","setFormApiSms","formApi","formApiSms","setFormApiJoin","customValidationSms","patternEmail","RegExp","patternMobile","test","ValidateUserName","trim","sendInviteMsg","Response","Email","response","MobileNo","Link","statusCode","openSetting","isOpenSetting","onAfterChangeMicGain","changeVolume","onVideoQualityChange","changeBandwidth","debounce","callbackfnc","delay","timer","args","clearTimeout","handleDoctorNameChange","isFetching","handleDoctorChange","onSelectDoctorData","toggleChat","isOpenChat","isOpenParticipant","toggleParticipant","chat","participants","onEmojiClick","emojiObject","selectedEmoji","visibleEmoji","elem","textContent","String","fromCodePoint","parseInt","unified","submitData","keyCode","sendMesg","showUserDropList","uid","uuidv4","currentdate","getHours","getMinutes","fileAppend","youCanSend","targetFileName","targetFile","FileTobeSend","image","filename","time","warning","FileLoading","youCanSendTo","mdata","encryptMessage","userId","selectedMentionUserId","selectedUserDropList","selectedMentionUser","replyMessageActivated","replyFileMessageActivated","replyData","selectedReplyMessageId","innerText","onBlurTyping","focus","onFocusTyping","onFileChange","files","size","FileUploadProgress","FormData","config","onUploadProgress","progressEvent","percentCompleted","loaded","total","status","closeAppendedFile","handleVisibleChange","makeTextBold","bold","inputRef","border","allBold","strikethrough","strike","makeTextItalic","italic","makeTextUnderline","underlined","submitHandlerLink","data1","data2","linkText","createTextNode","href","showInsertModal","cancelInsertModal","mentionThisUser","menUserList","socketId","replyMessageData","replyFileData","reloadWindowFunction","MessageId","isFileTobeAppend","isSeen","InputText","previousText","React","createRef","heigth","overlayClassName","destroyTooltipOnHide","trigger","showRaiseHand","cursor","fontSize","mouseEnterDelay","mouseLeaveDelay","onVisibleChange","visible","bounds","bgImg","screenImg","marginLeft","Row","Col","flexDirection","justifyContent","classsName","strokeColor","percent","paddingRight","paddingLeft","el","class","contentEditable","padding","borderRadius","onKeyDown","onFocus","spellCheck","top","onCancel","footer","destroyOnClose","md","getApi","onSubmit","formState","defaultChecked","placeholder","errors","validate","valid","validateOnBlur","validateOnChange","closable","Button","showSearch","defaultActiveFirstOption","showArrow","filterOption","onSearch","notFoundContent","d","DoctorName","SpecialityTypeName","HospitalName","DoctorId","MailId","marginTop","span","defaultValue","onAfterChange","step","labelInValue","bandwidth","VideoHome","startVideo","editState","preProps","createRoom","success","videohomeImg","borderWidth","borderColor","EndCall","fontWeight","fontFamily","App","path","component","to","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","require","adapter","default","io","bodyPix","CryptoJS","createRemoteVideo","Array","prototype","inArray","comparer","pushIfNotExist","peerconnection_config","iceServers","urls","credential","sdpSemantics","sdp_constraints","OfferToReceiveAudio","OfferToReceiveVideo","icon","isScreenShareAndCamera","remotePeerConnection","remotePeerConnectionStats","remoteDescriptionSet","iceCandidateList","videoTrackSender","audioTrackSender","playStreamId","currentVolume","dummyCanvas","originalAudioTrackGainNode","smallVideoTrack","audioContext","soundOriginGainNode","secondStreamGainNode","localStream","isMultiPeer","webSocketAdaptor","isPlayMode","viewerInfo","onlyDataChannel","recorder","isRecordingEnabled","micMute","localStreamId","participantsList","speakerHighlighter","backgroundChangeVar","handRaise","blackFrameTimer","idMapping","tempStream","publishMode","candidateTypes","desktopStream","camera_location","camera_margin","camera_percent","localVideo","remoteVideo","remoteVideoId","checkBrowserScreenShareSupported","checkWebSocketConnection","checkWebRTCPermissions","getDevices","trackDeviceChange","openStream","mode","media_audio_constraint","navigatorUserMedia","gotStream","onAny","eventName","backgroundModel","audioStream","onEndedCallback","cameraStream","canvasContext","screenVideo","cameraVideo","canvasStream","updateVideoTrack","onended","videoWidth","videoHeight","positionY","cameraWidth","cameraHeight","positionX","ondevicechange","enumerateDevices","devices","deviceArray","checkAudio","device","kind","audioConstraint","setGainNodeStream","setVideoCameraSource","mixedStream","mixAudioStreams","updateAudioTrack","setDesktopwithCameraSource","func","catch_error","resetTrack","videoTracks","getDisplayMedia","prepareStreamTracks","switchVideoCameraCapture","enable","subscriberId","subscriberCode","streamName","mainTrack","jsCmd","enableTracks","trackList","multiPeer","mainTrackId","trackId","enabled","secondStream","composedStream","audioDestionation","mediaStreamSource","mediaStreamDestination","controlledStream","deviceId","setAudioInputSource","exact","newAudioTrack","stopDesktop","newVideoTrack","getSenders","find","replaceTrack","updateLocalAudioStream","updateLocalVideoStream","cb","onmute","userTrack","getIndex","updateUserStreamDetails","checkStream","addStream","oldId","protocolSupported","protocol","toLowerCase","sdpMLineIndex","sdpMid","toString","dataChannel","byteLength","Int32Array","msg","receivingMessages","ReceivingMessage","rawData","slice","Uint8Array","set","received","dataChannelMode","closedStreamId","RTCPeerConnection","onicecandidate","iceCandidateReceived","ontrack","onTrack","onnegotiationneeded","dataChannelEnabled","createDataChannel","ordered","initDataChannel","ondatachannel","ev","channel","dataChannelPeer","oniceconnectionstatechange","iceConnectionState","signalingState","playStreamIndex","configuration","setLocalDescription","responose","replacementStream","initializeDummyFrame","choosenId","humIconTrack","remTrack","srcStream","peer","micValue","raiseHandData","idOfStream","typeOfConfiguration","conf","isTypeOffer","initPeerConnection","setRemoteDescription","RTCSessionDescription","addIceCandidate","createAnswer","gotDescription","idOfTheStream","tmpLabel","tmpCandidate","RTCIceCandidate","createOffer","videoSender","browserDetails","browser","version","RTCRtpSender","senders","errorDefinition","getVideoSender","parameters","getParameters","encodings","maxBitrate","setParameters","Promise","reject","getStats","stats","currentTime","qlr","packetsLost","jitterBufferDelay","jitterBufferEmittedCount","roundTripTime","jitter","framesPerSecond","totalBytesReceived","totalFramesEncoded","isConnected","isConnecting","resolution","streamHeight","sent","random","header","buffer","tokenArray","chunk","start","mediaRecorder","MediaRecorder","mimeType","ondataavailable","handleRecorderData","recordedChunks","blob","Blob","URL","createObjectURL","download","click","revokeObjectURL","onloadeddata","net","load","architecture","outputStride","multiplier","quantBytes","objNet","detectBody","updateBackgroundStream","checkCanvasStream","localStreamReact","currVideo","segmentPerson","flipHorizontal","internalResolution","segmentationThreshold","personsegmentation","drawBody","requestFrameId","personSegmentation","canvasTag","canvasSec","pixel","getImageData","backImg","imageSecData","pixelSec","p","imageSmoothingEnabled","putImageData","newScreenStream","checkPeerStream","newStopStream","videoTrackRemote","localStreamVideoTrack","AES","encrypt","encryptedMessage","decrypt","enc","Utf8","SoundMeter","context","instant","slow","clip","script","createScriptProcessor","that","onaudioprocess","input","inputBuffer","getChannelData","sum","clipcount","sqrt","connectToSource","mic","destination","disconnect","soundMeter","meterRefresh","speakerId","speakerValue","adaptor","playVideo","closeWebSocket","emojival","idval","notificationEvent","eventStreamId","eventTyp","vmute","vunmute","userCount","userNameList"],"mappings":"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","file":"static/js/main.97cf60fd.chunk.js","sourcesContent":["class PeerStats {\r\n    constructor(streamId) {\r\n        this.streamId = streamId;\r\n        // this.userName=userName;\r\n        this.totalBytesReceivedCount = 0;\r\n        this.totalBytesSent = 0;\r\n        this.videoPacketsLost = 0;\r\n        this.fractionLost = 0;\r\n        this.startTime = 0;\r\n        this.lastFramesEncoded = 0;\r\n        this.totalFramesEncodedCount = 0;\r\n        this.lastBytesReceived = 0;\r\n        this.lastBytesSent = 0;\r\n        this.currentTimestamp = 0;\r\n        this.lastTime = 0;\r\n        this.timerId = 0;\r\n        this.firstByteSentCount = 0;\r\n        this.firstBytesReceivedCount = 0;\r\n        this.audioLevel = -1;\r\n        this.qualityLimitationReason = \"\";\r\n        //res width and res height are video source resolutions\r\n        this.resWidth = 0;\r\n        this.resHeight = 0;\r\n        this.srcFps = 0;\r\n        //frameWidth and frameHeight are the resolutions of the sent video\r\n        this.frameWidth = 0;\r\n        this.frameHeight = 0;\r\n\r\n        this.videoRoundTripTime = 0;\r\n        this.videoJitter = 0;\r\n\r\n        this.audioRoundTripTime = 0;\r\n        this.audioJitter = 0;\r\n\r\n        this.audioPacketsLost = 0;\r\n\r\n        this.framesReceived = 0;\r\n        this.framesDropped = 0;\r\n        this.framesDecoded = 0;\r\n\r\n        this.audioJitterAverageDelay = 0;\r\n        this.videoJitterAverageDelay = 0;\r\n    }\r\n\r\n    //kbits/sec\r\n    get averageOutgoingBitrate() {\r\n        return Math.floor((8 * (this.totalBytesSentCount - this.firstByteSentCount)) / (this.currentTimestamp - this.startTime));\r\n    }\r\n\r\n    //frames per second\r\n    get currentFPS() {\r\n        return (((this.totalFramesEncodedCount - this.lastFramesEncoded) / (this.currentTimestamp - this.lastTime)) * 1000).toFixed(1);\r\n    }\r\n    //kbits/sec\r\n    get averageIncomingBitrate() {\r\n        return Math.floor((8 * (this.totalBytesReceivedCount - this.firstBytesReceivedCount)) / (this.currentTimestamp - this.startTime));\r\n    }\r\n\r\n    //kbits/sec\r\n    get currentOutgoingBitrate() {\r\n        return Math.floor((8 * (this.totalBytesSentCount - this.lastBytesSent)) / (this.currentTimestamp - this.lastTime));\r\n    }\r\n\r\n    //kbits/sec\r\n    get currentIncomingBitrate() {\r\n        return Math.floor((8 * (this.totalBytesReceivedCount - this.lastBytesReceived)) / (this.currentTimestamp - this.lastTime));\r\n    }\r\n\r\n    set currentTime(timestamp) {\r\n        this.lastTime = this.currentTimestamp;\r\n        this.currentTimestamp = timestamp;\r\n        if (this.startTime == 0) {\r\n            this.startTime = timestamp - 1; // do not have zero division error\r\n        }\r\n    }\r\n\r\n    set totalBytesReceived(bytesReceived) {\r\n        this.lastBytesReceived = this.totalBytesReceivedCount;\r\n        this.totalBytesReceivedCount = bytesReceived;\r\n        if (this.firstBytesReceivedCount == 0) {\r\n            this.firstBytesReceivedCount = bytesReceived;\r\n        }\r\n    }\r\n\r\n    set totalBytesSent(bytesSent) {\r\n        this.lastBytesSent = this.totalBytesSentCount;\r\n        this.totalBytesSentCount = bytesSent;\r\n        if (this.firstByteSentCount == 0) {\r\n            this.firstByteSentCount = bytesSent;\r\n        }\r\n    }\r\n    set totalFramesEncoded(framesEncoded) {\r\n        this.lastFramesEncoded = this.totalFramesEncodedCount;\r\n        this.totalFramesEncodedCount = framesEncoded;\r\n        if (this.lastFramesEncoded == 0) {\r\n            this.lastFramesEncoded = framesEncoded;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = PeerStats;","class StreamMerger {\r\n    constructor(width, height, autoMode, aspectRatio, recordingEnabled = false) {\r\n        this.streams = [];\r\n        this.width = width;\r\n        this.height = height;\r\n        const AudioContext = window.AudioContext || window.webkitAudioContext;\r\n        this.audioCtx = new AudioContext();\r\n        this.audioDestination = this.audioCtx.createMediaStreamDestination();\r\n        this.autoMode = autoMode;\r\n\r\n        this.aspectRatio = aspectRatio;\r\n        this.stream_height = height;\r\n        this.stream_width = width;\r\n\r\n        //4:3 portrait mode stream width height\r\n        this.pwidth = 0;\r\n        this.pheight = 0;\r\n\r\n        //4:3 vertical mode stream width height\r\n        this.vwidth = 0;\r\n        this.wheight = 0;\r\n\r\n        this.canvas = document.createElement(\"canvas\");\r\n        this.canvas.setAttribute(\"width\", this.width);\r\n        this.canvas.setAttribute(\"height\", this.height);\r\n        this.ctx = this.canvas.getContext(\"2d\");\r\n\r\n        this.streamCount = 0;\r\n        this.frameCount = 0;\r\n\r\n        // delay node for video sync\r\n        this.videoSyncDelayNode = this.audioCtx.createDelay(5.0);\r\n        this.videoSyncDelayNode.connect(this.audioDestination);\r\n\r\n        this.started = false;\r\n        this.fps = 30;\r\n        this.recordingEnabled = recordingEnabled;\r\n    }\r\n\r\n    changeAspectRatio(ratio) {\r\n        this.aspectRatio = ratio;\r\n        console.log(\"Changing aspect ratio to: \" + ratio);\r\n        this.resizeAndSortV2();\r\n    }\r\n    changeStreamSize(height) {\r\n        this.stream_height = height;\r\n        console.log(\"Changing merged streams size to = \" + height + \"p\");\r\n        this.resizeAndSortV2();\r\n    }\r\n\r\n    getResult() {\r\n        return this.result;\r\n    }\r\n\r\n    /*\r\n     * Options\r\n     * streamId = Id of the stream\r\n     * width = width of the stream that is being merged\r\n     * height = height of the stream that is being merged\r\n     * X = Starting location pixel on canvas horizontal\r\n     * Y = Starting location pixel on canvas vertical\r\n     * Xindex = placement index of videos, index 0 means width * 0, index 1 means width * 1 as starting points\r\n     * Yindex = placement index of videos, index 0 means height * 0, index 1 means height* 1 as starting points\r\n     * mute = mute stream or not\r\n     *\r\n     */\r\n    addStream(mediaStream, options) {\r\n        this.streamCount++;\r\n        const stream = {};\r\n        this.audioCtx.resume();\r\n        stream.streamId = options.streamId;\r\n\r\n        stream.width = options.width || 150;\r\n        stream.height = options.height || 150;\r\n        stream.Xindex = options.Xindex || 0;\r\n        stream.Yindex = options.Yindex || 0;\r\n        stream.portrait = false;\r\n        stream.aspectRatio = 4 / 3;\r\n\r\n        options.x == undefined ? (stream.x = stream.width * stream.Xindex) : (stream.x = options.x);\r\n        options.x == undefined ? (stream.y = stream.height * stream.Yindex) : (stream.y = options.y);\r\n\r\n        console.debug(stream.width, stream.Xindex, stream.x);\r\n        stream.mute = options.mute || false;\r\n\r\n        let videoElement = null;\r\n\r\n        videoElement = document.createElement(\"video\");\r\n        videoElement.autoplay = true;\r\n        videoElement.muted = true;\r\n        videoElement.srcObject = mediaStream;\r\n        videoElement.setAttribute(\"style\", \"position:fixed; left: 0px; top:0px;z-index:99;pointer-events: none; opacity:0;\");\r\n        document.body.appendChild(videoElement);\r\n\r\n        if (!stream.mute) {\r\n            stream.audioSource = this.audioCtx.createMediaStreamSource(mediaStream);\r\n            stream.audioGainNode = this.audioCtx.createGain(); // Intermediate gain node\r\n            stream.audioGainNode.gain.value = 1;\r\n            stream.audioSource.connect(stream.audioGainNode).connect(this.audioDestination); // Default is direct connect\r\n        }\r\n        stream.element = videoElement;\r\n        this.streams.push(stream);\r\n\r\n        if (this.autoMode == true) {\r\n            this.resizeAndSortV2();\r\n            /*\r\n             * To understand the incoming resolution we need to wait until the stream is rendered\r\n             * If the incoming stream is coming from mobile portrait mode default getUserMedia ratio is 3:4\r\n             */\r\n            videoElement.onloadedmetadata = () => {\r\n                console.debug(\"streamId = \" + stream.streamId);\r\n                var pheight = mediaStream.getVideoTracks()[0].getSettings().height;\r\n                var pwidth = mediaStream.getVideoTracks()[0].getSettings().width;\r\n                if (pheight > pwidth) {\r\n                    console.debug(\"portrait mode\");\r\n                    let xoffset = (stream.width - this.pwidth) / 2;\r\n                    stream.portrait = true;\r\n                    stream.x += xoffset;\r\n                    stream.width = this.pwidth;\r\n                    stream.height = this.pheight;\r\n                    console.log(\"Location offset from metadata x = \" + stream.x + \" y = \" + stream.y);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    requestAnimationFrameV2(callback) {\r\n        let fired = false;\r\n        const interval = setInterval(() => {\r\n            if (!fired && document.hidden) {\r\n                fired = true;\r\n                clearInterval(interval);\r\n                callback();\r\n            }\r\n        }, 1000 / this.fps);\r\n        requestAnimationFrame(() => {\r\n            if (!fired) {\r\n                fired = true;\r\n                clearInterval(interval);\r\n                callback();\r\n            }\r\n        });\r\n    }\r\n\r\n    /*\r\n     * For automatic sorting, since webcams use default ratio as 4:3 the default canvas ratio is also 4:3\r\n     * This is because the canvas size is also dynamic\r\n     */\r\n    resizeAndSortV2() {\r\n        //Clears all of the canvas when sorted.\r\n        this.ctx.clearRect(0, 0, this.width, this.height);\r\n        console.log(\"Sorting the streams\");\r\n\r\n        let xindex = 0;\r\n        let yindex = 0;\r\n\r\n        let yNumber = 0;\r\n\r\n        let cropWidth = 0;\r\n        let cropHeight = 0;\r\n        let topWidth = 0;\r\n\r\n        let remainingStreams = this.streams.length;\r\n\r\n        let widthOffset = 0;\r\n        let heightOffset = 0;\r\n\r\n        let divider = 0;\r\n\r\n        var pcheight = 0;\r\n        var pcwidth = 0;\r\n\r\n        //Default video size is 320x240, it protects aspect ratio, might be changed while adding streams.\r\n        for (let i = 1; i <= 5; i++) {\r\n            if (this.streams.length <= i * i) {\r\n                divider = i;\r\n                if (i * (i - 1) >= this.streams.length && this.streams.length > 2) {\r\n                    yNumber = i - 1;\r\n                    this.height = this.stream_height * yNumber;\r\n                    if (this.aspectRatio == \"16:9\") {\r\n                        let temp = (this.stream_height / 9) * 16;\r\n                        this.width = temp * yNumber;\r\n                    } else {\r\n                        let temp = (this.stream_height / 3) * 4;\r\n                        this.width = temp * yNumber;\r\n                    }\r\n\r\n                    pcheight = this.stream_height * yNumber;\r\n                    if (this.aspectRatio == \"16:9\") {\r\n                        let temp = (this.stream_height / 16) * 9;\r\n                        pcwidth = temp * yNumber;\r\n                    } else {\r\n                        let temp = (this.stream_height / 4) * 3;\r\n                        pcwidth = temp * yNumber;\r\n                    }\r\n                } else {\r\n                    yNumber = i;\r\n                    this.height = this.stream_height * yNumber;\r\n                    if (this.aspectRatio == \"16:9\") {\r\n                        let temp = (this.stream_height / 9) * 16;\r\n                        this.width = temp * yNumber;\r\n                    } else {\r\n                        let temp = (this.stream_height / 3) * 4;\r\n                        this.width = temp * yNumber;\r\n                    }\r\n                    pcheight = this.stream_height * yNumber;\r\n                    if (this.aspectRatio == \"16:9\") {\r\n                        let temp = (this.stream_height / 16) * 9;\r\n                        pcwidth = temp * yNumber;\r\n                    } else {\r\n                        let temp = (this.stream_height / 4) * 3;\r\n                        pcwidth = temp * yNumber;\r\n                    }\r\n                }\r\n                break;\r\n            }\r\n        }\r\n        this.canvas.setAttribute(\"width\", this.width);\r\n        this.canvas.setAttribute(\"height\", this.height);\r\n\r\n        console.log(\"Row number = \" + yNumber);\r\n        console.log(\"canvas width = \" + this.width + \"canvas height = \" + this.height);\r\n\r\n        var extraStreams = this.streams.length - yNumber * yNumber;\r\n        let tmp = 0;\r\n        for (let i = 1; i <= this.streams.length; i++) {\r\n            console.log(\"extraStreams = \" + extraStreams + \" stream length = \" + this.streams.length);\r\n            console.log(\"Xindex = \" + xindex + \"Yindex = \" + yindex);\r\n\r\n            const stream = this.streams[i - 1];\r\n            if (extraStreams <= 0 || this.streams.length <= 3) {\r\n                this.pwidth = pcwidth / divider;\r\n                this.pheight = pcheight / divider;\r\n\r\n                this.vwidth = this.width / divider;\r\n                this.vheight = this.height / divider;\r\n\r\n                if (stream.portrait == true) {\r\n                    stream.width = this.pwidth;\r\n                    stream.height = this.pheight;\r\n\r\n                    stream.x = this.vwidth * xindex;\r\n                    stream.y = this.vheight * yindex - heightOffset;\r\n\r\n                    let xoffset = (this.vwidth - this.pwidth) / 2;\r\n                    stream.x += xoffset;\r\n                } else {\r\n                    stream.width = this.vwidth;\r\n                    stream.height = this.vheight;\r\n                    stream.x = this.vwidth * xindex;\r\n                    stream.y = this.vheight * yindex - heightOffset;\r\n                }\r\n                tmp += this.width / divider;\r\n                console.log(\"Video width = \" + stream.width + \"Video height = \" + stream.height);\r\n\r\n                if (xindex == 0) {\r\n                    cropHeight = cropHeight + stream.height;\r\n                    console.debug(\"CropHeight = \" + cropHeight);\r\n                }\r\n\r\n                xindex++;\r\n                if (yindex >= yNumber - 1 && this.streams.length != 1) {\r\n                    console.log(\"TopWidth = \" + topWidth + \" remainingStreams = \" + remainingStreams);\r\n                    widthOffset = (topWidth - this.vwidth * remainingStreams) / 2;\r\n                    stream.x += widthOffset;\r\n                }\r\n\r\n                if (xindex >= yNumber) {\r\n                    xindex = 0;\r\n                    topWidth = tmp;\r\n                    tmp = 0;\r\n                    yindex++;\r\n                    remainingStreams -= yNumber;\r\n                }\r\n            } else {\r\n                this.pwidth = pcwidth / (divider + 1);\r\n                this.pheight = pcheight / (divider + 1);\r\n\r\n                this.vwidth = this.width / (divider + 1);\r\n                this.vheight = this.height / (divider + 1);\r\n\r\n                if (stream.portrait == true) {\r\n                    stream.width = this.pwidth;\r\n                    stream.height = this.pheight;\r\n                    stream.x = this.vwidth * xindex;\r\n                    stream.y = this.vheight * yindex;\r\n\r\n                    let xoffset = (this.vwidth - this.pwidth) / 2;\r\n                    stream.x += xoffset;\r\n                } else {\r\n                    stream.width = this.vwidth;\r\n                    stream.height = this.vheight;\r\n                    stream.x = this.vwidth * xindex;\r\n                    stream.y = this.vheight * yindex;\r\n                }\r\n                cropWidth = cropWidth + this.width / (divider + 1);\r\n\r\n                console.log(\"Video Width = \" + stream.width + \"VideoHeight = \" + stream.height);\r\n\r\n                if (xindex == 0) {\r\n                    cropHeight = cropHeight + stream.height;\r\n                    console.debug(\"CropHeight = \" + cropHeight);\r\n                }\r\n\r\n                xindex++;\r\n                if (xindex > yNumber) {\r\n                    heightOffset = this.height / divider - stream.height;\r\n                    xindex = 0;\r\n                    yindex++;\r\n                    widthOffset = this.width - cropWidth;\r\n                    this.canvas.setAttribute(\"width\", cropWidth);\r\n                    console.log(\"New canvas width= \" + cropWidth);\r\n                    topWidth = cropWidth;\r\n                    cropWidth = 0;\r\n                    extraStreams--;\r\n                    remainingStreams -= yNumber + 1;\r\n                }\r\n            }\r\n        }\r\n        this.canvas.setAttribute(\"height\", cropHeight);\r\n    }\r\n\r\n    start() {\r\n        this.started = true;\r\n        this.requestAnimationFrameV2(this.draw.bind(this));\r\n\r\n        // Get the result of merged stream canvas\r\n        this.result = this.canvas.captureStream(this.fps);\r\n\r\n        // Remove \"dead\" audio track\r\n        const deadTrack = this.result.getAudioTracks()[0];\r\n        if (deadTrack) this.result.removeTrack(deadTrack);\r\n\r\n        // Add audio\r\n        const audioTracks = this.audioDestination.stream.getAudioTracks();\r\n        this.result.addTrack(audioTracks[0]);\r\n    }\r\n\r\n    draw() {\r\n        if (!this.started) return;\r\n        this.frameCount++;\r\n\r\n        let awaiting = this.streams.length;\r\n        const done = () => {\r\n            awaiting--;\r\n            if (awaiting <= 0) {\r\n                this.requestAnimationFrameV2(this.draw.bind(this));\r\n            }\r\n        };\r\n        this.streams.forEach((stream) => {\r\n            // default draw function\r\n            const width = stream.width;\r\n            const height = stream.height;\r\n            this.ctx.drawImage(stream.element, stream.x, stream.y, width, height);\r\n            done();\r\n        });\r\n\r\n        if (this.streams.length === 0) done();\r\n    }\r\n\r\n    //Mutes or unmutes given streamId in merged stream\r\n    muteStream(streamId) {\r\n        for (let i = 0; i < this.streams.length; i++) {\r\n            const stream = this.streams[i];\r\n            if (streamId === stream.streamId) {\r\n                if (stream.element && stream.mute == false) {\r\n                    stream.audioGainNode.gain.value = 0;\r\n                    stream.mute = true;\r\n                } else if (stream.element && stream.mute == true) {\r\n                    stream.audioGainNode.gain.value = 1;\r\n                    stream.mute = false;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    removeStream(streamId) {\r\n        let removed = false;\r\n        for (let i = 0; i < this.streams.length; i++) {\r\n            const stream = this.streams[i];\r\n            if (streamId === stream.streamId) {\r\n                if (stream.element) {\r\n                    stream.element.remove();\r\n                }\r\n                removed = true;\r\n                this.streams[i] = null;\r\n                this.streams.splice(i, 1);\r\n                i--;\r\n            }\r\n        }\r\n        console.log(\"removed streamId = \" + streamId);\r\n\r\n        if (this.autoMode == true) {\r\n            this.resizeAndSortV2();\r\n        }\r\n    }\r\n\r\n    stop() {\r\n        this.started = false;\r\n\r\n        this.streams.forEach((stream) => {\r\n            if (stream.element) {\r\n                stream.element.remove();\r\n            }\r\n        });\r\n        this.streams = [];\r\n        this.audioCtx.close();\r\n        this.audioCtx = null;\r\n        this.audioDestination = null;\r\n        this.videoSyncDelayNode = null;\r\n\r\n        this.result.getTracks().forEach((track) => {\r\n            track.stop();\r\n        });\r\n\r\n        this.result = null;\r\n    }\r\n}\r\n\r\nmodule.exports = StreamMerger;","class WebSocketAdaptor {\r\n    constructor(initialValues) {\r\n        for (var key in initialValues) {\r\n            if (initialValues.hasOwnProperty(key)) {\r\n                this[key] = initialValues[key];\r\n            }\r\n        }\r\n        this.wsConn = new WebSocket(this.websocket_url);\r\n\r\n        this.isWebSocketTriggered = true;\r\n\r\n        this.connected = false;\r\n\r\n        this.pingTimerId = -1;\r\n\r\n        this.wsConn.onopen = () => {\r\n            if (true) {\r\n                console.log(\"websocket connected\");\r\n            }\r\n\r\n            this.pingTimerId = setInterval(() => {\r\n                this.sendPing();\r\n            }, 3000);\r\n\r\n            this.connected = true;\r\n            this.callback(\"initialized\");\r\n        };\r\n\r\n        this.wsConn.onmessage = (event) => {\r\n            // console.warn(event.data)\r\n            var obj = JSON.parse(event.data);\r\n            // console.log(\"warrant\",obj)\r\n\r\n            if (obj.command == \"start\") {\r\n                //this command is received first, when publishing so playmode is false\r\n\r\n                if (this.debug) {\r\n                    console.debug(\"received start command\");\r\n                }\r\n\r\n                this.webrtcadaptor.startPublishing(obj.streamId);\r\n            } else if (obj.command == \"takeCandidate\") {\r\n                if (this.debug) {\r\n                    console.debug(\"received ice candidate for stream id \" + obj.streamId);\r\n                    console.debug(obj.candidate);\r\n                }\r\n\r\n                this.webrtcadaptor.takeCandidate(obj.streamId, obj.label, obj.candidate);\r\n            } else if (obj.command == \"takeConfiguration\") {\r\n                if (this.debug) {\r\n                    console.log(\"received remote description type for stream id: \" + obj.streamId + \" type: \" + obj.type);\r\n                }\r\n                this.webrtcadaptor.takeConfiguration(obj.streamId, obj.sdp, obj.type);\r\n            } else if (obj.command == \"stop\") {\r\n                console.debug(\"Stop command received\");\r\n                this.webrtcadaptor.closePeerConnection(obj.streamId);\r\n            } else if (obj.command == \"error\") {\r\n                this.callbackError(obj.definition);\r\n            } else if (obj.command == \"notification\") {\r\n                this.callback(obj.definition, obj);\r\n                if (obj.definition == \"play_finished\" || obj.definition == \"publish_finished\") {\r\n                    this.webrtcadaptor.closePeerConnection(obj.streamId);\r\n                }\r\n            } else if (obj.command == \"streamInformation\") {\r\n                this.callback(obj.command, obj);\r\n            } else if (obj.command == \"roomInformation\") {\r\n                this.callback(obj.command, obj);\r\n            } else if (obj.command == \"pong\") {\r\n                this.callback(obj.command);\r\n            } else if (obj.command == \"trackList\") {\r\n                this.callback(obj.command, obj);\r\n            } else if (obj.command == \"connectWithNewId\") {\r\n                this.multiPeerStreamId = obj.streamId;\r\n                this.join(obj.streamId);\r\n            } else if (obj.command == \"peerMessageCommand\") {\r\n                this.callback(obj.command, obj);\r\n            }\r\n        };\r\n\r\n        this.wsConn.onerror = (error) => {\r\n            console.log(\" error occured: \" + JSON.stringify(error));\r\n            this.clearPingTimer();\r\n            this.callbackError(error);\r\n        };\r\n\r\n        this.wsConn.onclose = (event) => {\r\n            this.connected = false;\r\n            console.log(\"connection closed.\");\r\n            this.clearPingTimer();\r\n            this.callback(\"closed\", event);\r\n        };\r\n    }\r\n\r\n    clearPingTimer() {\r\n        if (this.pingTimerId != -1) {\r\n            if (this.debug) {\r\n                console.debug(\"Clearing ping message timer\");\r\n            }\r\n            clearInterval(this.pingTimerId);\r\n            this.pingTimerId = -1;\r\n        }\r\n    }\r\n\r\n    sendPing() {\r\n        var jsCmd = {\r\n            command: \"ping\",\r\n        };\r\n        this.wsConn.send(JSON.stringify(jsCmd));\r\n    }\r\n\r\n    close() {\r\n        this.wsConn.close();\r\n    }\r\n\r\n    send(text) {\r\n        if (this.wsConn.readyState == 0 || this.wsConn.readyState == 2 || this.wsConn.readyState == 3) {\r\n            this.callbackError(\"WebSocketNotConnected\");\r\n            return;\r\n        }\r\n        this.wsConn.send(text);\r\n        // console.log(\"sent message:\" +text);\r\n    }\r\n\r\n    isConnected() {\r\n        return this.connected;\r\n    }\r\n}\r\n\r\nmodule.exports = WebSocketAdaptor;","export default __webpack_public_path__ + \"static/media/user.37c82b98.png\";","import React, { PureComponent } from \"react\";\r\n// ! PureComponent is to avoid Rerender for alredy renderd user, when media stream list updated\r\nimport { AiFillLike } from \"react-icons/ai\";\r\nimport { IoIosHand, IoIosHeart } from \"react-icons/io\";\r\nimport { RiMicFill, RiMicOffFill } from \"react-icons/ri\";\r\n\r\nimport { checkMicSensitivity } from \"antsdk\";\r\nimport posterImg from \"../../Image/user.png\";\r\nimport axios from \"axios\";\r\n\r\n\r\nexport default class RemoteVideo extends PureComponent {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      streamId: null,\r\n      userName: null,\r\n      mediaStream: new MediaStream(),\r\n    }\r\n  }\r\n\r\n  componentDidMount = async () => {\r\n    const { streamId, videoTrack } = this.props;\r\n    let updateStream = this.state.mediaStream;\r\n    let index = streamId.replace(\"ARDAMSv\", \"\");\r\n    let audioTrack = window.webRTCAdaptor.multiStream.getTrackById('ARDAMSa' + index);\r\n    if (audioTrack) {\r\n      updateStream.addTrack(audioTrack);\r\n      updateStream.addTrack(videoTrack);\r\n    }\r\n    await this.setState({ mediaStream: updateStream, streamId: index });\r\n    let u = await axios.get(`https://prematix.tech/WebRTCAppEE/rest/v2/broadcasts/${index}`);\r\n    let userDict = JSON.parse(u.data.name);\r\n    let Name = userDict.hasOwnProperty('username') ? userDict.username : null;\r\n    await this.setState({ userName: Name });\r\n    this.props.notifyUser(`${this.state.userName} Joined ...`);\r\n    if (this.props.ledger.handRiseEvents.hasOwnProperty(this.state.streamId)) {\r\n      this.props.raiseIfRequired(\"handRaise\", this.props.ledger.handRiseEvents[this.state.streamId]);\r\n    };\r\n    await checkMicSensitivity(this.state.mediaStream, this.state.streamId);\r\n  };\r\n  render() {\r\n    const { streamId, userName, mediaStream } = this.state;\r\n    return (\r\n      <div className=\"antsdk-remote-video-data\" id={`player${streamId}`} onContextMenu={(e) => e.preventDefault()}>\r\n        <div className=\"antsdk-remote-video-content\">\r\n          <video className=\"antsdk-remote-video-tag\" ref={(video) => (video ? (video.srcObject = mediaStream) : video)} poster={posterImg} id={`remoteVideo${streamId}`} autoPlay playsInline></video>\r\n          <div className=\"antsdk-remote-video-speaker\" id={`remoteSpeaker${streamId}`}>\r\n            {/* //* speaker highlighter  */}\r\n          </div>\r\n          {/* <meter id={`micSensitivityMeter${streamId}`} max=\"0.30\" high=\"0.10\" min=\"0.01\" value=\"0\"></meter> */}\r\n          <div className=\"antsdk-remote-video-user-details\">\r\n            <span title={`${userName}`} className=\"antsdk-remote-video-username\" id={`userName${streamId}`}>\r\n              {userName || \"Guest\"}\r\n            </span>\r\n            <i className=\"antsdk-remote-video-mic-icon antsdk-remote-video-mic-icon-unmute\" id={`munmute${streamId}`} style={{ display: \"block\" }}>\r\n              <RiMicFill />\r\n            </i>\r\n            <i className=\"antsdk-remote-video-mic-icon antsdk-remote-video-mic-icon-mute\" id={`mmute${streamId}`} style={{ display: \"none\" }}>\r\n              <RiMicOffFill />\r\n            </i>\r\n            <i className=\"antsdk-remote-video-handraise-icon antsdk-remote-video-handraise-icon-handraise\" id={`Hand${streamId}`} style={{ display: \"none\" }}>\r\n              <IoIosHand\r\n                style={{\r\n                  color: \"#ffc800\",\r\n                }}\r\n              />\r\n            </i>\r\n            <i className=\"antsdk-remote-video-handraise-icon antsdk-remote-video-handraise-icon-thumbsup\" id={`Thumbsup${streamId}`} style={{ display: \"none\" }}>\r\n              <AiFillLike\r\n                className=\"ml-2\"\r\n                style={{\r\n                  color: \"#ffc800\",\r\n                }}\r\n              />\r\n            </i>\r\n            <i className=\"antsdk-remote-video-handraise-icon antsdk-remote-video-handraise-icon-heart\" id={`Heart${streamId}`} style={{ display: \"none\" }}>\r\n              <IoIosHeart\r\n                style={{\r\n                  color: \"#ff0000\",\r\n                }}\r\n              />\r\n            </i>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { AiOutlineClose } from \"react-icons/ai\";\r\nimport \"./ParticipantList.scss\";\r\nexport default class ParticipantList extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n  }\r\n  render() {\r\n    const { MediaStreamList } = this.props;\r\n    return (\r\n      <div className=\"participant-list-all\">\r\n        <h4 className=\"participant-heading\">\r\n          {MediaStreamList ? Object.keys(MediaStreamList)?.length + 1 : 0} Participants\r\n          <div className=\"participant-close\" onClick={() => this.props.onToogleParticipant()}>\r\n            <AiOutlineClose />\r\n          </div>\r\n        </h4>\r\n        <div className=\"list-wrapper\">\r\n          <ul className=\"list\">\r\n            {/*//* Local user name */}\r\n            {window.UserName && (\r\n              <li className=\"list-item\">\r\n                <div className=\"user-name-logo\">\r\n                  <div className=\"user-name-letter\">{window.UserName[0]}</div>\r\n                </div>\r\n                <div className=\"list-item-content\">\r\n                  <h4 className=\"list-name\">{window.UserName}</h4>\r\n                </div>\r\n              </li>\r\n            )}\r\n            {/* //* Remote User Names */}\r\n            {MediaStreamList &&\r\n              Object.values(MediaStreamList)?.map((user, i) => {\r\n                return (\r\n                  <>\r\n                    <li className=\"list-item\" key={i}>\r\n                      <div className=\"user-name-logo\">\r\n                        <div className=\"user-name-letter\">{user.userName?.[0]}</div>\r\n                      </div>\r\n                      <div className=\"list-item-content\">\r\n                        <h4 className=\"list-name\">{user.userName}</h4>\r\n                      </div>\r\n                    </li>\r\n                  </>\r\n                );\r\n              })}\r\n          </ul>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import classnames from \"classnames\";\r\nimport { asField } from \"informed\";\r\nimport React, { Fragment } from \"react\";\r\nimport \"./VideoCallFileUploader.scss\";\r\n\r\nfunction VideoCallFileUploader({ fieldState, fieldApi, faClass, ...props }) {\r\n  const { value } = fieldState;\r\n  const { setValue, setTouched } = fieldApi;\r\n  const { field, onChange, onBlur, initialValue, forwardedRef, className, content, ...rest } = props;\r\n  let event;\r\n  function FileonChange(e) {\r\n    event = e;\r\n    if (onChange) props.onChange(event);\r\n  }\r\n  return (\r\n    <Fragment>\r\n      <div className=\"videoUploader\" style={{ position: \"absolute\" }}>\r\n        <div className=\"form-group\">\r\n          {faClass && <i className={faClass}></i>}\r\n          {props.label && (\r\n            <label htmlFor={field} className=\"label\">\r\n              {props.label}\r\n              {props.required && <i style={{ color: \"red\" }}>*</i>}\r\n            </label>\r\n          )}\r\n          {/* <BsPaperclip /> */}\r\n          <input\r\n            {...rest}\r\n            id={field}\r\n            ref={forwardedRef}\r\n            type=\"file\"\r\n            required={false}\r\n            value={!value && value !== 0 ? \"\" : value}\r\n            className={classnames(`form-control ${className}`, {\r\n              \"is-invalid\": fieldState.error,\r\n            })}\r\n            onChange={(e) => {\r\n              FileonChange(e);\r\n              setValue(e.target.value);\r\n            }}\r\n            onBlur={(e) => {\r\n              setTouched(true);\r\n              if (onBlur) {\r\n                onBlur(e);\r\n              }\r\n            }}\r\n          />\r\n          {props.helper && <small className=\"form-text text-muted\">{content}</small>}\r\n\r\n          {fieldState.error ? <div className=\"invalid-field\">{fieldState.error}</div> : null}\r\n          {event && <img id=\"MainContent_imgBtRtPrev\" alt=\"Select File\" title=\"Select File\" src={event.target.value} style={{ width: \"150px\", height: \"150px\" }} />}\r\n        </div>\r\n      </div>\r\n    </Fragment>\r\n  );\r\n}\r\n\r\nexport default asField(VideoCallFileUploader);\r\n","import axios from \"axios\";\r\n\r\n// axios.interceptors.response.use(null, (error) => {\r\n//   const expectedError = error.response && error.response.status >= 400 && error.response.status < 500;\r\n\r\n//   if (!expectedError) {\r\n//     // window.location.href = \"/Error\"\r\n//     // toast.error(\"An unexpected error occurrred.\");\r\n//   }\r\n//   return Promise.reject(error);\r\n// });\r\n\r\nexport default {\r\n  get: axios.get,\r\n  post: axios.post,\r\n  put: axios.put,\r\n  delete: axios.delete,\r\n};\r\n","import { apiurl, antMediaUrl, staticToken, smskey } from \"./../config.json\";\r\nimport http from \"./httpService.js\";\r\nimport Cookies from \"universal-cookie\";\r\nconst cookies = new Cookies();\r\nexport const getCookies = (key) => {\r\n  return cookies.get(key);\r\n};\r\nexport const sendInviteSms = (mobileNo, details, link) => {\r\n  // const apiEndPoint = `${apiurl}/sms?MobileNumber=${mobileNo}&Details=${details}&Link=${link}`;\r\n  const apiEndPoint = `${apiurl}/sms`;\r\n  return http.post(`${apiEndPoint}`,{\"MobileNumber\":`${mobileNo}`,\"Details\":`${details}`,\"Link\":`${link}`},{ headers: { \"x-api-key\": `${smskey}` } });\r\n};\r\n\r\nexport const sendInviteMail = (details, email, subject) => {\r\n  const apiEndPoint = `${apiurl}/Email?mail_content=${details}&emailId=${email}&subject=${subject}`;\r\n  return http.post(`${apiEndPoint}`);\r\n};\r\n\r\nexport const getDoctorSearchList = async (name) => {\r\n  const apiEndPoint = `${apiurl}/getDoctorBasedOnName?Count=10&DoctorName=${name}`;\r\n  return http.get(`${apiEndPoint}`);\r\n};\r\n\r\nexport const createNewRoom = async (roomName) => {\r\n  const apiEndPoint = `${antMediaUrl}/createRoom?roomName=${roomName}`;\r\n  return await http.get(`${apiEndPoint}​​​​​`, {\r\n    headers: { Authorization: `${staticToken}` },\r\n  });\r\n};\r\n\r\n// export const Upload = async (file) => {\r\n//   const data = new FormData();\r\n//   data.append(\"file\", file);\r\n//   const apiEndPoint = `https://saveme.ai/antmedia/d2/api/upload`;\r\n//   const response = await http.post(`${apiEndPoint}`, data);\r\n//   return response;\r\n// };\r\n","export default __webpack_public_path__ + \"static/media/bgImage.da6a0ec0.svg\";","export default __webpack_public_path__ + \"static/media/screen.aa1f7ec7.svg\";","import \"./TypingAnimation.scss\";\r\nconst TypingAnimation = () => {\r\n  return (\r\n    <>\r\n      <div className=\"chat-ticontainer\">\r\n        <div className=\"chat-tiblock\">\r\n          <div className=\"chat-tidot\"></div>\r\n          <div className=\"chat-tidot\"></div>\r\n          <div className=\"chat-tidot\"></div>\r\n        </div>\r\n      </div>\r\n    </>\r\n  );\r\n};\r\nexport default TypingAnimation;\r\n","import React from \"react\";\r\nimport { MdCallEnd, MdDashboard, MdScreenShare, MdStopScreenShare } from \"react-icons/md\";\r\nimport { AiFillLike, AiOutlineClose } from \"react-icons/ai\";\r\nimport { IoMdCheckmarkCircle, IoIosHand, IoIosHeart } from \"react-icons/io\";\r\nimport { RiSendPlane2Fill, RiFile3Fill, RiCloseFill, RiRecordCircleFill, RiMicFill, RiMicOffFill, RiSettings2Fill } from \"react-icons/ri\";\r\nimport { BiUnderline, BiItalic, BiStrikethrough } from \"react-icons/bi\";\r\nimport { BsChatSquareDotsFill, BsThreeDots } from \"react-icons/bs\";\r\nimport { VscEye } from \"react-icons/vsc\";\r\nimport { GrEmoji } from \"react-icons/gr\";\r\nimport { TiAttachment } from \"react-icons/ti\";\r\nimport { FaUserFriends, FaVideoSlash, FaVideo, FaUserPlus, FaUserCircle, FaRegUserCircle } from \"react-icons/fa\";\r\nimport { BsTypeBold, BsLink } from \"react-icons/bs\";\r\nimport Picker from \"emoji-picker-react\";\r\nimport $ from \"jquery\";\r\nimport queryString from \"query-string\";\r\nimport { Tooltip, Input, message, Spin, Modal, Switch, notification, Slider, Select, Progress, Popover } from \"antd\";\r\nimport { Form, Radio, RadioGroup, Text } from \"informed\";\r\nimport { Button, Row, Col } from \"reactstrap\";\r\nimport axios from \"axios\";\r\nimport ReactHtmlParser from \"react-html-parser\";\r\nimport { v4 as uuidv4 } from \"uuid\";\r\nimport Draggable from \"react-draggable\";\r\n//* below two line is imported for backgroundImg change package in sdk\r\nimport * as bodyPix from \"@tensorflow-models/body-pix\";\r\nimport * as tf from \"@tensorflow/tfjs\";\r\n//*\r\nimport { WebRTCAdaptor, reInit, publish, streamInformation, handleNotificationEvent, getHandRaiseEmojiTag } from \"antsdk\";\r\nimport \"./VideoConsult.scss\";\r\nimport \"./VideoConsultResponsive.scss\";\r\nimport \"./ChatBox.scss\";\r\nimport RemoteVideo from \"./RemoteVideo\";\r\nimport ParticipantList from \"../ParticipantList/ParticipantList\";\r\nimport VideoCallFileUploader from \"../fileUploader/VideoCallFileUploader\";\r\nimport { getCookies, getDoctorSearchList, sendInviteMail, sendInviteSms } from \"../../../Services/videoCallServices\";\r\nimport bgImg from \"../../Image/bgImage.svg\";\r\nimport screenImg from \"../../Image/screen.svg\";\r\nimport { staticToken } from \"../../../config.json\";\r\nimport TypingAnimation from \"../TypingAnimation/TypingAnimation\";\r\nimport posterImg from \"../../Image/user.png\";\r\nimport { SubDirectory, automationKey } from \"../../../config.json\";\r\nwindow.webRTCAdaptor = undefined;\r\nwindow.roomId = undefined;\r\nwindow.publishStreamId = undefined;\r\nwindow.UserName = undefined;\r\nwindow.roomTimerId = undefined;\r\nwindow.userList = undefined;\r\n\r\n//* auto adjust remote video size, based on number of video and screen size, below code taken from github-> https://github.com/Alicunde/Videoconference-Dish-CSS-JS\r\nfunction Area(Increment, Count, Width, Height, Margin = 10) {\r\n  let i = 0;\r\n  let w = 0;\r\n  let h = Increment * 0.75 + Margin * 2;\r\n  while (i < Count) {\r\n    if (w + Increment > Width) {\r\n      w = 0;\r\n      h = h + Increment * 0.75 + Margin * 2;\r\n    }\r\n    w = w + Increment + Margin * 2;\r\n    i++;\r\n  }\r\n  if (h > Height) return false;\r\n  else return Increment;\r\n}\r\n\r\nfunction ReSize() {\r\n  let Margin = 2;\r\n  let Scenary = document.getElementById(\"players\"); //* Parent Element Id\r\n  if (Scenary) {\r\n    let Width = Scenary.offsetWidth - Margin * 2;\r\n    let Height = Scenary.offsetHeight - Margin * 2;\r\n    let Cameras = document.getElementsByClassName(\"antsdk-remote-video-data\"); //*Child element ClassName\r\n    let max = 0;\r\n\r\n    // loop (i recommend you optimize this)\r\n    let i = 1;\r\n    while (i < 5000) {\r\n      let w = Area(i, Cameras.length, Width, Height, Margin);\r\n      if (w === false) {\r\n        max = i - 1;\r\n        break;\r\n      }\r\n      i++;\r\n    }\r\n\r\n    // set styles\r\n    max = max - Margin * 2;\r\n    setWidth(max, Margin);\r\n  }\r\n}\r\n\r\n// Set Width and Margin\r\nfunction setWidth(width, margin) {\r\n  let Cameras = document.getElementsByClassName(\"antsdk-remote-video-data\"); //* Child Element className\r\n  for (var s = 0; s < Cameras.length; s++) {\r\n    Cameras[s].style.width = width + \"px\";\r\n    Cameras[s].style.margin = margin + \"px\";\r\n    Cameras[s].style.height = width * 0.75 + \"px\";\r\n  }\r\n}\r\nconst { Option } = Select;\r\n\r\nclass VideoConsult extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      isAutomate: false, //to ByPass all permission\r\n      MultiStream: new MediaStream(),\r\n      MediaStreamList: {},\r\n      LocalStream: null,\r\n      ConsultationId: \"\",\r\n      UserName: \"\",\r\n      isJoinModal: false,\r\n      isOpenChat: false,\r\n      isOpenParticipant: false,\r\n      isCameraOn: true,\r\n      isMicOn: true,\r\n      isRecording: false,\r\n      inviteUrl: \"\",\r\n      isInviteModal: false,\r\n      isOpenSetting: false,\r\n      DoctorData: [],\r\n      SelectedDoctor: \"\",\r\n      //chat variables\r\n      targetFile: \"\",\r\n      targetFileName: \"\",\r\n      MessageId: \"\",\r\n      messageSent: false,\r\n      justSend: false,\r\n      showInsertModal: false,\r\n      isFileTobeAppend: false,\r\n      seenStatus: false,\r\n      selectedEmoji: \"\",\r\n      FileTobeSend: \"\",\r\n      fileAppend: false,\r\n      visibleEmoji: false,\r\n      isTyping: false,\r\n      TypingName: \"\",\r\n      isSeen: false,\r\n      focus: false,\r\n      setDouble: false,\r\n      leftChat: \"\",\r\n      newMessage: \"\",\r\n      InputText: \"\",\r\n      message: \"\",\r\n      actualMessage: 0,\r\n      bold: false,\r\n      previousText: \"\",\r\n      italic: false,\r\n      underlined: false,\r\n      strike: false,\r\n      FileLoading: false,\r\n      youCanSend: false,\r\n      FileUploadProgress: 0,\r\n      showUserDropList: false,\r\n      selectedMentionUser: \"\",\r\n      selectedUserDropList: false,\r\n      youCanSendTo: false,\r\n      selectedMentionUserId: \"\",\r\n      selectedReplyMessageId: \"\",\r\n      replyMessageActivated: false,\r\n      replyMessageData: [],\r\n      replyFileData: [],\r\n      replyFileMessageActivated: false,\r\n      isError: false,\r\n      displayMessage: \"\",\r\n      webSocketModel: false,\r\n\r\n    };\r\n    this.inputRef = React.createRef();\r\n    this.scrollDiv = React.createRef();\r\n    this.width = 532;\r\n    this.heigth = 400;\r\n  }\r\n\r\n  openNotification = (title = \"\", message = \"\", placement = \"bottomRight\") => {\r\n    //to display notification msg\r\n    notification.open({\r\n      message: title,\r\n      description: message,\r\n      placement: placement,\r\n      className: \"ant-notify-class\",\r\n    });\r\n  };\r\n  navigateToDashboard = async () => {\r\n    // var windowFeatures = \"popup\";\r\n    let url = `https://saveme.ai/whiteboard/${this.state.ConsultationId}`;\r\n    window.open(url, \"Save-Me DashBoard\");\r\n  };\r\n  customCallback = async (info, obj) => {\r\n    //* callbacks given by sdk , based on case we can do our logic\r\n    let media = window.webRTCAdaptor?.MediaStreamList || {};\r\n    let multiStream = window.webRTCAdaptor?.multiStream || new MediaStream();\r\n    switch (info) {\r\n      case \"chatHistory\":\r\n        console.log(\"chatHistory\", obj);\r\n        for (let i = 0; i < obj?.length; i++) {\r\n          if (obj[i]?.replyType === \"message\") {\r\n            const messageHistory = `\r\n            <div class=\"left_chat\">\r\n                    <div class=\"left_chat_left\">\r\n                    <div >\r\n                    <p class=\"user_icon2\">${obj[i].from[0]}</p>\r\n                   </div> \r\n                      <div class=\"chat_content\">\r\n                        <p>${obj[i].from}</p>\r\n                        <span>${window.webRTCAdaptor.decryptMessage(obj[i].message)}</span>\r\n                      </div>\r\n                    </div>\r\n                    <div class=\"chat_right\" id=\"reply${obj[i].umessageId}\">\r\n                    <img class=\"reply_btn\" src=\"https://img.icons8.com/ios-glyphs/30/ffffff/reply-arrow.png\"/>\r\n                    </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[i]?.timeStamp}</span>\r\n                  </div>\r\n            `;\r\n            $(\"#messageBox\").append(messageHistory);\r\n            let onReply = document.getElementById(`reply${obj[i].umessageId}`);\r\n            onReply.addEventListener(\"click\", (event) => {\r\n              this.chatHandlerReply(obj[i]);\r\n            });\r\n            if (obj[i]?.reply?.length > 0) {\r\n              for (let mr = 0; mr < obj[i]?.reply?.length; mr++) {\r\n                const messageReplyHistory = `\r\n                    <div class=\"left_chat\">\r\n                        <div class=\"left_chat_left\">\r\n                          <div>\r\n                            <p class=\"user_icon\">${obj[i]?.reply[mr]?.from[0]}</p>\r\n                          </div> \r\n                        <div class=\"reply_file_content\">\r\n                            <p>${obj[i]?.reply[mr]?.from}</p>\r\n                            <span>${window.webRTCAdaptor.decryptMessage(obj[i]?.reply[mr]?.message)}</span>\r\n                        <div class=\"chat_content2\">\r\n                          <p class=\"reply2name\">${obj[i].from}</p>\r\n                          <span class=\"reply2mes\">${window.webRTCAdaptor.decryptMessage(obj[i].message)}</span>\r\n                        </div>\r\n                        </div>\r\n                        </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[i]?.timeStamp}</span>\r\n\r\n                    </div>\r\n                           `;\r\n                $(\"#messageBox\").append(messageReplyHistory);\r\n              }\r\n            }\r\n          } else if (obj[i]?.replyType === \"endcall\") {\r\n            var startTime = obj[i].endDate;\r\n            let [yyyy, mm, dd, hh, mi] = startTime.split(/[/:\\-T]/);\r\n            //*time duration format\r\n            //  var startTime = obj[i].startDate;\r\n            let oneDay = 24 * 60 * 60 * 1000; //* hours*minutes*seconds*milliseconds\r\n            let firstDate = new Date(obj[i].endDate);\r\n            let secondDate = new Date();\r\n            // *date difference\r\n            let diffDays = Math.round(Math.abs((firstDate - secondDate) / oneDay));\r\n            console.log(diffDays);\r\n            var dateChat;\r\n            if (diffDays === 1) {\r\n              dateChat = \"Yesterday\";\r\n            } else if (diffDays === 0) {\r\n              dateChat = \"Today\";\r\n            } else {\r\n              dateChat = `${mm} / ${dd} / ${yyyy}`;\r\n            }\r\n            let newTime = obj[i].duration.split(\":\"),\r\n              hour = newTime[0],\r\n              min = newTime[1],\r\n              sec = Math.round(newTime[2]);\r\n            //* local time format\r\n            let strTime = new Date(startTime).toLocaleString(\"en-US\", {\r\n              hour: \"numeric\",\r\n              minute: \"numeric\",\r\n              hour12: true,\r\n            });\r\n            const callDuration = `\r\n            <div class=\"call_details\">\r\n            <p class=\"call_details_p\"> \r\n            <img src=\"https://img.icons8.com/external-those-icons-fill-those-icons/25/ffffff/external-call-mobile-telephone-those-icons-fill-those-icons.png\" style=\"opacity=0.8\"/>\r\n             ${dateChat},&ensp;${strTime}</p>\r\n            <p class=\"call_details_p\"> call ended, &ensp;${hour}h ${min}m ${sec}s</p>\r\n            </div>`;\r\n            $(\"#messageBox\").append(callDuration);\r\n          } else {\r\n            const fileHistory = `\r\n            <div class=\"left_chat\">\r\n                <div class=\"left_chat_left\">\r\n                  <div  class=\"user_icon_block\">\r\n                    <p class=\"user_icon2\">${obj[i].from[0]}</p>\r\n                  </div> \r\n                  <div class=\"file_content\">\r\n                    <p>${obj[i].from}</p>\r\n                    <div class=\"chat_content2\">\r\n                     <div class=\"href_a\">${obj[i].file}</div>\r\n                     <a  class=\"down_ref\" href=${obj[i].name} target=\"_blank\" download>Download</a>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n                  <div class=\"chat_right\" id=\"reply${obj[i].umessageId}\">\r\n                    <img class=\"reply_btn\" src=\"https://img.icons8.com/ios-glyphs/30/ffffff/reply-arrow.png\"/>\r\n                  </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[i]?.timeStamp}</span>\r\n            </div>\r\n            `;\r\n            $(\"#messageBox\").append(fileHistory);\r\n            let onReply = document.getElementById(`reply${obj[i].umessageId}`);\r\n            onReply.addEventListener(\"click\", (event) => {\r\n              this.fileHandlerReply(obj[i]);\r\n            });\r\n            if (obj[i]?.reply?.length > 0) {\r\n              for (let fr = 0; fr < obj[i]?.reply?.length; fr++) {\r\n                const fileReplyHistory = `\r\n              <div class=\"left_chat\">\r\n                <div class=\"left_chat_left\">\r\n                    <div  class=\"user_icon_block\">\r\n                        <p class=\"user_icon2\">${obj[i]?.reply[fr]?.from[0]}</p>\r\n                      </div> \r\n                      <div class=\"reply_file_content\">\r\n                      <p>${obj[i]?.reply[fr]?.from}</p>\r\n                      <span class=\"replyFileName\">${window.webRTCAdaptor.decryptMessage(obj[i]?.reply[fr]?.message)}</span>\r\n                      <div class=\"chat_content2\">\r\n                      <p class=\"reply2name\">${obj[i].from}</p>\r\n                      <div class=\"href_a\">${obj[i].file}</div>\r\n                      <a  class=\"down_ref\" href=${obj[i].name} target=\"_blank\" download>Download</a>\r\n                      </div>\r\n                      </div>\r\n              </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[i]?.timeStamp}</span>\r\n                    </div>\r\n              `;\r\n                $(\"#messageBox\").append(fileReplyHistory);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case \"createMessage\":\r\n        this.setState({ message: obj.message });\r\n        if (obj.umessageId === this.state.leftChat) {\r\n          const messageComponent = `\r\n                <div class=\"right_chat\">\r\n                  <div class=\"left_chat_left\">\r\n                    <div>\r\n                     <div  class=\"user_icon\">${obj.from[0]}</div>\r\n                    </div>          \r\n                    <div class=\"chat_content\">\r\n                      <p>${obj.from}</p>\r\n                      <span>${window.webRTCAdaptor.decryptMessage(obj.message)}</span>\r\n                    </div>\r\n                  </div>\r\n                     <div class=\"chat_right\">\r\n                     </div>\r\n                    <span class=\"time_stamp_chat2\">${obj?.timeStamp}</span>\r\n                </div>\r\n          `;\r\n          $(\"#messageBox\").append(messageComponent);\r\n          this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n          this.setState({\r\n            leftChat: \"\",\r\n            seenStatus: false,\r\n          });\r\n        } else {\r\n          if (this.state.setDouble) {\r\n            this.setState({ actualMessage: 0 });\r\n          } else {\r\n            this.setState({ actualMessage: this.state.actualMessage + 1 });\r\n          }\r\n          const messageComponent = `\r\n        <div class=\"left_chat\" id=${obj.umessageId}>\r\n                <div class=\"left_chat_left\">\r\n                <div >\r\n                <p class=\"user_icon2\">${obj.from[0]}</p>\r\n               </div> \r\n                  <div class=\"chat_content\">\r\n                    <p>${obj.from}</p>\r\n                    <span>${window.webRTCAdaptor.decryptMessage(obj.message)}</span>\r\n                  </div>\r\n                </div>\r\n                <div class=\"chat_right\" id=\"reply${obj.umessageId}\">\r\n                     <img class=\"reply_btn\" src=\"https://img.icons8.com/ios-glyphs/30/ffffff/reply-arrow.png\"/>\r\n               \r\n                     </div>\r\n                    <span class=\"time_stamp_chat2\">${obj?.timeStamp}</span>\r\n              </div>\r\n        `;\r\n          $(\"#messageBox\").append(messageComponent);\r\n          let onReply = document.getElementById(`reply${obj.umessageId}`);\r\n          onReply.addEventListener(\"click\", (event) => {\r\n            this.chatHandlerReply(obj);\r\n          });\r\n          this.scrollDiv?.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n          this.setState({\r\n            leftChat: \"\",\r\n            seenStatus: true,\r\n            messageSent: false,\r\n            newMessage: true,\r\n          });\r\n        }\r\n        break;\r\n      case \"File\":\r\n        console.log(obj);\r\n        this.setState({ message: \"Sent a file\" });\r\n        if (obj.umessageId === this.state.leftChat) {\r\n          const messageComponent2 = `\r\n          <div class=\"right_chat\">\r\n                  <div class=\"left_chat_left\">\r\n                  <div >\r\n                  <p class=\"user_icon\">${obj.from[0]}</p>\r\n                 </div> \r\n                  <div class=\"file_content\">\r\n                    <p>${obj.from}</p>\r\n                  <div class=\"chat_content2\">\r\n                  <div class=\"href_a\">${obj.file}</div>\r\n                  <a  class=\"down_ref\" href=${obj.name} target=\"_blank\" download>Download</a>\r\n                  </div>\r\n                  </div>\r\n                  </div>              \r\n                    <span class=\"time_stamp_chat2\">${obj?.timeStamp}</span>\r\n                </div>\r\n          `;\r\n          $(\"#messageBox\").append(messageComponent2);\r\n          this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n          this.setState({\r\n            leftChat: \"\",\r\n            messageSent: false,\r\n            seenStatus: false,\r\n          });\r\n        } else {\r\n          if (this.state.setDouble) {\r\n            this.setState({ actualMessage: 0 });\r\n          } else {\r\n            this.setState({ actualMessage: this.state.actualMessage + 1 });\r\n          }\r\n          this.setState({\r\n            leftChat: \"\",\r\n            seenStatus: true,\r\n            messageSent: false,\r\n            newMessage: true,\r\n          });\r\n          const messageComponent2 = `\r\n          <div class=\"left_chat\">\r\n                  <div class=\"left_chat_left\">\r\n                  <div  class=\"user_icon_block\">\r\n                  <p class=\"user_icon2\">${obj.from[0]}</p>\r\n                 </div> \r\n                  <div class=\"file_content\">\r\n                  <p>${obj.from}</p>\r\n                  <div class=\"chat_content2\">\r\n                  <div class=\"href_a\">${obj.file}</div>\r\n                  <a  class=\"down_ref\" href=${obj.name} target=\"_blank\" download>Download</a>\r\n                  </div>\r\n                  </div>\r\n                  </div>\r\n                  <div class=\"chat_right\" id=\"reply${obj.umessageId}\">\r\n                  <img class=\"reply_btn\" src=\"https://img.icons8.com/ios-glyphs/30/ffffff/reply-arrow.png\"/>\r\n                    <span class=\"time_stamp_chat2\">${obj?.timeStamp}</span>        \r\n                  </div>\r\n                </div>\r\n          `;\r\n          $(\"#messageBox\").append(messageComponent2);\r\n          let onReply = document.getElementById(`reply${obj.umessageId}`);\r\n          onReply.addEventListener(\"click\", (event) => {\r\n            this.fileHandlerReply(obj);\r\n          });\r\n          this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });  \r\n         }\r\n        break;\r\n      case \"createReplyMessage\":\r\n        console.log(obj);\r\n        this.setState({ message: \"reply message\" });\r\n        if (obj[1].umessageId === this.state.leftChat) {\r\n          const messageComponent2 = `\r\n          <div class=\"right_chat\">\r\n                  <div class=\"left_chat_left\">\r\n                  <div>\r\n                  <p class=\"user_icon\">${obj[1].from[0]}</p>\r\n                 </div> \r\n                  <div class=\"reply_file_content\">\r\n                    <p>${obj[1].from}</p>\r\n                    <span>${window.webRTCAdaptor.decryptMessage(obj[1].message)}</span>\r\n                  <div class=\"chat_content2\">\r\n                  <p class=\"reply2name\">${obj[0].from}</p>\r\n                  <span class=\"reply2mes\">${window.webRTCAdaptor.decryptMessage(obj[0].message)}</span>\r\n                  </div>\r\n                  </div>\r\n                  </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[1]?.timeStamp}</span>\r\n                </div>\r\n          `;\r\n          $(\"#messageBox\").append(messageComponent2);\r\n          this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n          this.setState({\r\n            leftChat: \"\",\r\n            messageSent: false,\r\n            seenStatus: false,\r\n          });\r\n        } else {\r\n          if (this.state.setDouble) {\r\n            this.setState({ actualMessage: 0 });\r\n          } else {\r\n            this.setState({ actualMessage: this.state.actualMessage + 1 });\r\n          }\r\n          this.setState({\r\n            leftChat: \"\",\r\n            seenStatus: true,\r\n            messageSent: false,\r\n            newMessage: true,\r\n          });\r\n          const messageComponent2 = `\r\n          <div class=\"left_chat\">\r\n                  <div class=\"left_chat_left\">\r\n                  <div>\r\n                  <p class=\"user_icon\">${obj[1].from[0]}</p>\r\n                 </div> \r\n                  <div class=\"reply_file_content\">\r\n                    <p>${obj[1].from}</p>\r\n                    <span >${window.webRTCAdaptor.decryptMessage(obj[1].message)}</p>\r\n                  <div class=\"chat_content2\">\r\n                  <p class=\"reply2name\">${obj[0].from}</p>\r\n                  <span class=\"reply2mes\">${window.webRTCAdaptor.decryptMessage(obj[0].message)}</span>\r\n                  </div>\r\n                  </div>\r\n                  </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[1]?.timeStamp}</span>\r\n\r\n                </div>\r\n          `;\r\n          $(\"#messageBox\").append(messageComponent2);\r\n          this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n        }\r\n        break;\r\n      case \"createReplyFileMessage\":\r\n        console.log(obj);\r\n        this.setState({ message: \"reply message\" });\r\n        if (obj[1].umessageId === this.state.leftChat) {\r\n          const messageComponent3 = `\r\n          <div class=\"right_chat\">\r\n          <div class=\"left_chat_left\">\r\n          <div  class=\"user_icon_block\">\r\n          <p class=\"user_icon2\">${obj[1].from[0]}</p>\r\n         </div> \r\n          <div class=\"reply_file_content\">\r\n          <p>${obj[1].from}</p>\r\n          <span class=\"replyFileName\">${window.webRTCAdaptor.decryptMessage(obj[1].message)}</span>\r\n          <div class=\"chat_content2\">\r\n          <p class=\"reply2name\">${obj[0].from}</p>\r\n          <div class=\"href_a\">${obj[0].file}</div>\r\n          <a  class=\"down_ref\" href=${obj[0].name} target=\"_blank\" download>Download</a>\r\n          </div>\r\n          </div>\r\n          </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[1]?.timeStamp}</span>   \r\n                </div>\r\n          `;\r\n          $(\"#messageBox\").append(messageComponent3);\r\n          this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n          this.setState({\r\n            leftChat: \"\",\r\n            messageSent: false,\r\n            seenStatus: false,\r\n          });\r\n        } else {\r\n          if (this.state.setDouble) {\r\n            this.setState({ actualMessage: 0 });\r\n          } else {\r\n            this.setState({ actualMessage: this.state.actualMessage + 1 });\r\n          }\r\n          this.setState({\r\n            leftChat: \"\",\r\n            seenStatus: true,\r\n            messageSent: false,\r\n            newMessage: true,\r\n          });\r\n          const messageComponent3 = `\r\n          <div class=\"left_chat\">\r\n             <div class=\"left_chat_left\">\r\n               <div  class=\"user_icon_block\">\r\n               <p class=\"user_icon2\">${obj[1].from[0]}</p>\r\n               </div> \r\n               <div class=\"reply_file_content\">\r\n               <p>${obj[1].from}</p>\r\n               <span class=\"replyFileName\">${window.webRTCAdaptor.decryptMessage(obj[1].message)}</span>\r\n               <div class=\"chat_content2\">\r\n               <p class=\"reply2name\"> ${obj[0].from}</p>\r\n               <div class=\"href_a\">${obj[0].file}</div>\r\n               <a  class=\"down_ref\" href=${obj[0].name} target=\"_blank\" download>Download</a>\r\n               </div>\r\n               </div>\r\n               </div>\r\n                    <span class=\"time_stamp_chat2\">${obj[1]?.timeStamp}</span>\r\n          </div>\r\n          `;\r\n          $(\"#messageBox\").append(messageComponent3);\r\n          this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n        }\r\n\r\n        break;\r\n      case \"messageSent\":\r\n        this.setState({ messageSent: true, justSend: true });\r\n        let mesRecdata = {\r\n          username: this.state.UserName,\r\n          text: this.state.message,\r\n          id: obj.id,\r\n          dbName: window.webRTCAdaptor.secToken,\r\n        };\r\n        window.webRTCAdaptor.s.emit(\"messageReceived\", mesRecdata);\r\n        break;\r\n      case \"messageReceived\":\r\n        await notification[\"success\"]({\r\n          message: `Message from ${obj.username}`,\r\n          duration: 3,\r\n          description: <>{ReactHtmlParser(window.webRTCAdaptor.decryptMessage(obj.text))}</>,\r\n          placement: \"bottomRight\",\r\n        });\r\n        if (this.state.seenStatus && this.state.newMessage && this.state.setDouble) {\r\n          window.webRTCAdaptor.s.emit(\"messageSeen\");\r\n        }\r\n        break;\r\n      case \"messageSeen\":\r\n        this.setState({ justSend: false });\r\n        break;\r\n      case \"typing\":\r\n        await this.setState({\r\n          TypingName: `${obj.userName}`,\r\n          isTyping: true,\r\n        });\r\n        break;\r\n      case \"typingEnd\":\r\n        await this.setState({\r\n          isTyping: false,\r\n          TypingName: \"\",\r\n        });\r\n        break;\r\n      case \"pong\":\r\n        break;\r\n      case \"available_devices\":\r\n        // console.log(\"available devices\", obj);\r\n        break;\r\n      case \"initialized\":\r\n        if (window.playOnly) {\r\n          window.isCameraOff = true;\r\n        }\r\n        if (window.webRTCAdaptor.isConnectionRefreshEnabled || window.webRTCAdaptor.autoJoin) {\r\n          let userName = this.state.UserName;\r\n          window.webRTCAdaptor.joinRoom(window.roomId, window.publishStreamId, userName);\r\n        } else {\r\n          console.warn(\"The Connection Cannot be Refreshed!\");\r\n        }\r\n        break;\r\n      case \"joinedTheRoom\":\r\n        var room = obj.ATTR_ROOM_NAME;\r\n        window.roomOfStream[obj.streamId] = room;\r\n        window.publishStreamId = obj.streamId;\r\n        let userName = this.state.UserName;\r\n        if (window.playOnly) {\r\n          window.isCameraOff = true;\r\n          window.webRTCAdaptor.play(window.roomId, window.token, window.token, obj.streams)\r\n        } else {\r\n          publish(window.webRTCAdaptor, obj.streamId, window.token, userName);\r\n        }\r\n        if (obj.streams != null) {\r\n          obj.streams.forEach(function (item) {\r\n            console.log(\"Stream joined with ID: \" + item);\r\n            window.webRTCAdaptor.play(item, window.token, window.roomId);\r\n          });\r\n          window.streamsList = obj.streams;\r\n        }\r\n        window.roomTimerId = setInterval(() => {\r\n          window.webRTCAdaptor?.getRoomInfo(window.roomId, window.publishStreamId);\r\n        }, 5000);\r\n\r\n        break;\r\n      case \"newStreamAvailable\":\r\n        await this.setState({ MediaStreamList: media });\r\n        await this.setState({ MultiStream: multiStream });\r\n        ReSize();\r\n        this.forceUpdate();\r\n        break;\r\n      case \"publish_started\":\r\n        console.debug(\"publish started to room: \" + window.roomOfStream[obj.streamId]);\r\n        window.webRTCAdaptor.getRoomInfo(window.roomId, window.publishStreamId);\r\n        break;\r\n      case \"publish_finished\":\r\n        console.debug(\"publish finished\");\r\n        break;\r\n      case \"screen_share_stopped\":\r\n        ReSize();\r\n        break;\r\n      case \"browser_screen_share_supported\":\r\n        console.log(\"browser screen share supported\");\r\n        break;\r\n      case \"leavedFromRoom\":\r\n        room = obj.ATTR_ROOM_NAME;\r\n        if (window.roomTimerId != null) {\r\n          clearInterval(window.roomTimerId);\r\n        }\r\n        await this.setState({ MediaStreamList: media });\r\n        await this.setState({ MultiStream: multiStream });\r\n        ReSize();\r\n        window.streamsList = [];\r\n        break;\r\n      case \"closed\":\r\n        if (typeof obj != \"undefined\") {\r\n          // let errorMessage = \"Connection Closed\";\r\n          // await this.setState({ isError: true, displayMessage: errorMessage });\r\n          console.log(\"Connection Closed\");\r\n        }\r\n        break;\r\n      case \"play_finished\":\r\n        window.webRTCAdaptor.s.emit(\"leftedMeeting\", {\r\n          streamId: window.publishStreamId,\r\n          dbName: window.webRTCAdaptor.secToken,\r\n        });\r\n        ReSize();\r\n        break;\r\n      case \"streamInformation\":\r\n        streamInformation(window.webRTCAdaptor, obj);\r\n        break;\r\n      case \"roomInformation\":\r\n        var tempList = obj.streams;\r\n        tempList.push(\"!\" + window.publishStreamId);\r\n        if (!this.state.isPlaying) {\r\n          window.webRTCAdaptor.play(window.roomId, window.token, window.roomId, tempList);\r\n          await this.setState({ isPlaying: true });\r\n        }\r\n        for (let str of window.streamsList) {\r\n          if (!obj.streams.includes(str)) {\r\n            ReSize();\r\n          }\r\n        }\r\n        window.streamsList = obj.streams;\r\n        ReSize();\r\n        break;\r\n      case \"data_channel_opened\":\r\n        window.isDataChannelOpen = true;\r\n        console.log(\"obj getted\", obj);\r\n        try {\r\n          if (obj !== window.publishStreamId) {\r\n            console.log(\"getting joining user name\", window.webRTCAdaptor.MediaStreamList?.[obj]?.userName + \" Joined..\");\r\n            this.openNotification(`${window.webRTCAdaptor.MediaStreamList?.[obj]?.userName} Joined..`);\r\n          } else {\r\n            console.log(\"getting joining user name\", \"Joined..\");\r\n            this.openNotification(\"Joined...\");\r\n          }\r\n        } catch {\r\n          console.log(\" Joining username not found\");\r\n        }\r\n        ReSize();\r\n        break;\r\n      case \"data_channel_closed\":\r\n        try {\r\n          if (obj !== window.publishStreamId) {\r\n            console.log(\"getting leaving user name\", window.webRTCAdaptor.MediaStreamList?.[obj]?.userName + \" Leaving..\");\r\n            this.openNotification(`${window.webRTCAdaptor.MediaStreamList?.[obj]?.userName} Leaving...`);\r\n          } else {\r\n            console.log(\"getting leaving user name\", \"Leaving..\");\r\n            this.openNotification(\"Leaving...\");\r\n          }\r\n        } catch {\r\n          console.log(\" Leaving username not found\");\r\n        }\r\n        window.isDataChannelOpen = false;\r\n        ReSize();\r\n        break;\r\n      case \"data_received\":\r\n        handleNotificationEvent(obj);\r\n        break;\r\n      case \"refreshConnection\":\r\n        reInit(obj);\r\n        break;\r\n      case \"whiteBoardData\":\r\n        this.openNotification(`${obj.userName} opened whiteboard...`);\r\n        let url = `https://saveme.ai/whiteboard/${this.state.ConsultationId}`;\r\n        window.open(url, \"Save-Me DashBoard\");\r\n        break\r\n      case \"handRaise\":\r\n        console.log(\"handRaise\", obj);\r\n        var handId = \"raiseHand\" + obj.streamId;\r\n        const id = document.getElementById(handId);\r\n        var videotag = \"Hand\" + obj.streamId;\r\n        var thumbsupId = \"Thumbsup\" + obj.streamId;\r\n        var heartId = \"Heart\" + obj.streamId;\r\n        if (obj.partEmoji === \"handraise\") {\r\n          const raiseHand =\r\n            '<h5 id=\"raiseHand' +\r\n            obj.streamId +\r\n            '\"><svg xmlns=\"http://www.w3.org/2000/svg\" width=\"25\" height=\"25\" fill=\"yellow\" class=\"bi bi-hand-index-fill\" viewBox=\"0 0 16 16\"><path d=\"M8.5 4.466V1.75a1.75 1.75 0 1 0-3.5 0v5.34l-1.2.24a1.5 1.5 0 0 0-1.196 1.636l.345 3.106a2.5 2.5 0 0 0 .405 1.11l1.433 2.15A1.5 1.5 0 0 0 6.035 16h6.385a1.5 1.5 0 0 0 1.302-.756l1.395-2.441a3.5 3.5 0 0 0 .444-1.389l.271-2.715a2 2 0 0 0-1.99-2.199h-.581a5.114 5.114 0 0 0-.195-.248c-.191-.229-.51-.568-.88-.716-.364-.146-.846-.132-1.158-.108l-.132.012a1.26 1.26 0 0 0-.56-.642 2.632 2.632 0 0 0-.738-.288c-.31-.062-.739-.058-1.05-.046l-.048.002z\" /></svg>&nbsp;&nbsp;' +\r\n            obj.userName +\r\n            \"</h5>\";\r\n          if (id) {\r\n            $(id).remove();\r\n            if (obj.streamId !== window.publishStreamId) {\r\n              if (document.getElementById(videotag)) {\r\n                document.getElementById(videotag).style.display = \"none\";\r\n              }\r\n              if (document.getElementById(\"HandscreenDiv\") && window.webRTCAdaptor.screenShareStream === obj.streamId) {\r\n                document.getElementById(\"HandscreenDiv\").style.display = \"none\"; ///* screenshare div element\r\n              }\r\n            } else {\r\n              if (document.getElementById(\"Hand\")) {\r\n                document.getElementById(\"Hand\").style.display = \"none\";\r\n              }\r\n            }\r\n          } else {\r\n            $(\"#raiseHand\").append(raiseHand);\r\n            if (obj.streamId !== window.publishStreamId) {\r\n              if (document.getElementById(videotag)) {\r\n                document.getElementById(videotag).style.display = \"block\";\r\n              }\r\n              if (document.getElementById(\"HandscreenDiv\") && window.webRTCAdaptor.screenShareStream === obj.streamId) {\r\n                document.getElementById(\"HandscreenDiv\").style.display = \"block\"; ///* screenshare div element\r\n              }\r\n            } else {\r\n              if (document.getElementById(\"Hand\")) {\r\n                document.getElementById(\"Hand\").style.display = \"block\";\r\n              }\r\n            }\r\n          }\r\n        } else {\r\n          if (obj.partEmoji === \"thumbsup\") {\r\n            if (obj.streamId !== window.publishStreamId) {\r\n              getHandRaiseEmojiTag(\"Thumbsup\", thumbsupId);\r\n              if (document.getElementById(\"ThumbsupscreenDiv\") && window.webRTCAdaptor.screenShareStream === obj.streamId) {\r\n                getHandRaiseEmojiTag(\"Thumbsup\", \"ThumbsupscreenDiv\");\r\n              }\r\n            } else {\r\n              if (document.getElementById(\"ThumbsupId\")) {\r\n                document.getElementById(\"ThumbsupId\").style.display = \"block\";\r\n                setTimeout(function () {\r\n                  document.getElementById(\"ThumbsupId\").style.display = \"none\";\r\n                }, 4000);\r\n              }\r\n            }\r\n          } else {\r\n            if (obj.streamId !== window.publishStreamId) {\r\n              getHandRaiseEmojiTag(\"Heart\", heartId);\r\n              if (document.getElementById(\"HeartscreenDiv\") && window.webRTCAdaptor.screenShareStream === obj.streamId) {\r\n                getHandRaiseEmojiTag(\"Heart\", \"HeartscreenDiv\");\r\n              }\r\n            } else {\r\n              if (document.getElementById(\"HeartId\")) {\r\n                document.getElementById(\"HeartId\").style.display = \"block\";\r\n                setTimeout(function () {\r\n                  document.getElementById(\"HeartId\").style.display = \"none\";\r\n                }, 4000);\r\n              }\r\n            }\r\n          }\r\n        }\r\n        break;\r\n      case \"screensharing\":\r\n        window.webRTCAdaptor.screenShareStream = obj.streamId;\r\n        if (window.webRTCAdaptor?.isScreenShare && obj.streamId !== window.publishStreamId) {\r\n          window.webRTCAdaptor.s.emit(\"stop_screensharing\", {\r\n            streamId: window.publishStreamId,\r\n            dbName: window.webRTCAdaptor.secToken,\r\n          });\r\n          window.webRTCAdaptor.stopScreenShare(window.publishStreamId);\r\n        }\r\n        console.log(\"objjjjjjjjj1111\", obj);\r\n        if (obj.streamId !== window.publishStreamId) {\r\n          console.log(\"screenshare_started\");\r\n          let screensharevideo = document.getElementById(\"screenshare\");\r\n          screensharevideo.srcObject = document.getElementById(\"remoteVideo\" + obj.streamId).srcObject;\r\n          document.getElementById(\"player\" + obj.streamId).style.display = \"none\";\r\n          document.getElementById(\"screensharediv\").style.display = \"block\";\r\n        }\r\n        this.forceUpdate();\r\n        ReSize();\r\n        break;\r\n      case \"stop_screensharing\":\r\n        console.log(\"objjjjjjjjj\", obj);\r\n        if (obj.streamId !== window.publishStreamId) {\r\n          document.getElementById(\"player\" + obj.streamId).style.display = \"block\";\r\n          document.getElementById(\"screensharediv\").style.display = \"none\";\r\n        }\r\n        this.forceUpdate();\r\n        ReSize();\r\n        break;\r\n      case \"micChange\":\r\n        console.log(\"micchange\", obj);\r\n        if (obj.streamId !== window.publishStreamId) {\r\n          console.log(\"if micchange\");\r\n          handleNotificationEvent(obj);\r\n          console.log(\"obj in mic chage\", obj);\r\n          window.webRTCAdaptor.micDetails[obj.streamId] = obj.eventType === \"MIC_UNMUTED\" ? true : false;\r\n        }\r\n        break;\r\n      case \"syncUser\":\r\n        console.log(\"sync user case called\", obj.streamId);\r\n        if (window.userList) {\r\n          console.log(\"syncUser if\");\r\n          if (typeof window.userList[obj.streamId] == \"undefined\") {\r\n            window.userList[obj.streamId] = obj;\r\n            if (document.getElementById(\"userName\" + obj.streamId) !== null) {\r\n              document.getElementById(\"userName\" + obj.streamId).innerHTML = obj.userName;\r\n            }\r\n          }\r\n        } else {\r\n          console.log(\"syncUser else\");\r\n          window.userList = {};\r\n          window.userList[obj.streamId] = obj;\r\n          console.log(\"syncUser else userList\", window.userList);\r\n          if (document.getElementById(\"userName\" + obj.streamId) !== null) {\r\n            document.getElementById(\"userName\" + obj.streamId).innerHTML = obj.userName;\r\n          }\r\n        }\r\n        var [participantList, participantCount] = handleNotificationEvent({\r\n          eventType: \"PARTICIPANT\",\r\n          streamId: window.userList,\r\n        });\r\n        window.participantList = participantList;\r\n        window.participantCount = participantCount;\r\n        console.log(\"participant\", window.participantList, \"count\", window.participantCount);\r\n        break;\r\n      case \"closePeer\":\r\n        // if (obj.hasOwnProperty(\"streamId\")) {\r\n        //   this.openNotification(`${window.webRTCAdaptor.MediaStreamList[obj.streamId].userName} left`);\r\n        //   delete window.webRTCAdaptor.MediaStreamList[obj.streamId];\r\n        // }\r\n        console.log(obj)\r\n        await this.setState({ MultiStream: multiStream });\r\n        await this.setState({ MediaStreamList: media });\r\n        this.openNotification(`${obj.data.userName} left`);\r\n        ReSize();\r\n        break;\r\n      case \"recording_start\":\r\n        this.openNotification(`${obj.userName} started recording...`);\r\n        this.setState({ isRecording: true });\r\n        break;\r\n      case \"recording_stop\":\r\n        this.openNotification(`${obj.userName} stoped recording...`);\r\n        this.setState({ isRecording: false });\r\n        break;\r\n      case \"ledger\":\r\n        this.state.ledger = obj.result;\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n  };\r\n\r\n\r\n  defaultErrorCallback = async (error, message) => {\r\n\r\n    //some of the possible errors, NotFoundError, SecurityError,PermissionDeniedError will handle here\r\n    if (\r\n      error.indexOf(\"publishTimeoutError\") != -1 &&\r\n      window.roomTimerId != null\r\n    ) {\r\n      clearInterval(window.roomTimerId);\r\n      window.location.reload();\r\n    }\r\n\r\n    var errorMessage = JSON.stringify(error);\r\n    if (typeof message != \"undefined\") {\r\n      errorMessage = message;\r\n    }\r\n\r\n    if (error.indexOf(\"NotFoundError\") != -1) {\r\n      errorMessage = \"Camera or Mic are not found or not allowed in your device.\";\r\n      await this.setState({ isError: true, displayMessage: errorMessage });\r\n    } else if (\r\n      error.indexOf(\"NotReadableError\") !== -1 ||\r\n      error.indexOf(\"TrackStartError\") !== -1\r\n    ) {\r\n      errorMessage = \"Camera or Mic is being used by some other process that does not  allow these devices to be read.\";\r\n      await this.setState({ isError: true, displayMessage: errorMessage });\r\n    } else if (\r\n      error.indexOf(\"OverconstrainedError\") != -1 ||\r\n      error.indexOf(\"ConstraintNotSatisfiedError\") != -1\r\n    ) {\r\n      errorMessage = \"There is no device found that fits your video and audio constraints.\";\r\n      await this.setState({ isError: true, displayMessage: errorMessage });\r\n    } else if (\r\n      error.indexOf(\"NotAllowedError\") != -1 ||\r\n      error.indexOf(\"PermissionDeniedError\") != -1\r\n    ) {\r\n      errorMessage = \"You are not allowed to access camera and mic.\";\r\n      await this.setState({ isError: true, displayMessage: errorMessage });\r\n    } else if (error.indexOf(\"TypeError\") != -1) {\r\n      errorMessage = \"Video/Audio is required.\";\r\n      // this.openNotification(errorMessage);\r\n      console.log(errorMessage);\r\n    } else if (error.indexOf(\"UnsecureContext\") != -1) {\r\n      errorMessage = \"Browser cannot access camera and mic because of unsecure context. Please install SSL and access via https\";\r\n      this.openNotification(errorMessage);\r\n    } else if (error.indexOf(\"WebSocketNotSupported\") != -1) {\r\n      errorMessage = \"WebSocket not supported in this browser\";\r\n      await this.setState({ isError: true, displayMessage: errorMessage });\r\n    } else if (error.indexOf(\"no_stream_exist\") != -1) {\r\n      //TODO: removeRemoteVideo(error.streamId);\r\n    } else if (error.indexOf(\"data_channel_error\") != -1) {\r\n      errorMessage = \"There was a error during data channel communication\";\r\n      this.openNotification(errorMessage);\r\n    } else if (error.indexOf(\"ScreenSharePermissionDenied\") != -1) {\r\n      errorMessage = \"You are not allowed to access screen share\";\r\n      this.openNotification(errorMessage);\r\n    } else if (error.indexOf(\"WebSocketNotConnected\") != -1) {\r\n      this.setState({ webSocketModel: true, displayMessage: \"Your call is disconnected Please refresh\", isError: true });\r\n    }\r\n    else  {\r\n      this.openNotification(errorMessage);\r\n    }\r\n  }\r\n  componentDidMount = async () => {\r\n    await this.getvaluesfromurl();\r\n    await this.openJoinModal();\r\n    console.log(\"initialised cmdidmount\", this.props);\r\n    //*On Load Event , Resize  for Remote videos\r\n    window.addEventListener(\r\n      \"load\",\r\n      function (event) {\r\n        ReSize();\r\n        window.onresize = ReSize;\r\n      },\r\n      false\r\n    );\r\n  };\r\n  getvaluesfromurl = async () => {\r\n    //*get roomId(ConsultationId) from URL\r\n    console.log(this.props?.location?.search);\r\n    let queries = queryString.parse(this.props?.location?.search);\r\n    console.log(queries, \"DDDDDDDDDDDDDDDD\");\r\n    await this.setState({ ConsultationId: queries.ConsultationId });\r\n    if (queries?.UserName) {\r\n      await this.setState({ UserName: queries.UserName });\r\n    }\r\n    if (queries?.UserRole) {\r\n      await this.setState({ USERROLE: queries.UserRole });\r\n    }\r\n    //to ByPass Camera Permission\r\n    if (queries.Automate && queries.Automate === automationKey) {\r\n      await this.setState({ isAutomate: true });\r\n    }\r\n    window.roomId = queries.ConsultationId;\r\n  };\r\n  initiateWebRtc = () => {\r\n    // *initialise antsdk WebRTC class\r\n    window.webRTCAdaptor = new WebRTCAdaptor({\r\n      mediaConstraints: {\r\n        video: this.state.isCameraOn,\r\n        audio: this.state.isMicOn,\r\n      },\r\n      autoJoin: true,\r\n      localVideoId: \"#localVideo\",\r\n      roomName: this.state.ConsultationId,\r\n      ioPath: \"https://saveme.ai/\",\r\n      // ioPath: \"http://localhost:5434/\",\r\n      secToken: staticToken,\r\n      callback: this.customCallback,\r\n      callbackError: this.defaultErrorCallback,\r\n    });\r\n    //*to load Tensorfolw model for change background\r\n    // window.webRTCAdaptor.backgroundModel();\r\n  };\r\n  backgroundChange = () => {\r\n    window.webRTCAdaptor.backgroundChangeCl();\r\n  };\r\n  removeBackground = () => {\r\n    window.webRTCAdaptor.removeBackground();\r\n  };\r\n  checkCameraPerMission = async () => {\r\n    // if (navigator.mediaDevices || navigator.getUserMedia) {\r\n    //   //name: camera\r\n    //   //name: microphone\r\n    //   await navigator.permissions.query({ name: \"camera\" }).then(({ state }) => {\r\n    //     if (state === \"granted\") {\r\n    //       console.log(\"permission granted.....!\");\r\n\r\n    //       isCameraAccess = true;\r\n    //     } else if (state === \"denied\") {\r\n    //       console.log(\"permission denied.........!\");\r\n    //       alert(\"hello\");\r\n\r\n    //     }\r\n    //   });\r\n    // }\r\n    let isCameraAccess = await navigator.mediaDevices.getUserMedia({ audio: true, video: true }).then(stream => {\r\n      stream.getTracks().forEach(track => track.stop());\r\n      return true;\r\n    }).catch(err => {\r\n      return false;\r\n    });\r\n    return isCameraAccess;\r\n  };\r\n\r\n  getlocalVideo = async () => {\r\n    //* get local stream for joining  model\r\n\r\n    let videoEle;\r\n\r\n    navigator.mediaDevices\r\n      .getUserMedia({ audio: this.state.isMicOn, video: this.state.isCameraOn })\r\n      .then((stream) => {\r\n        console.log(\"stream\", stream);\r\n\r\n        this.setState({ LocalStream: stream });\r\n        videoEle = document.querySelector(\"#modelLocalVideo\");\r\n        videoEle.srcObject = stream;\r\n        console.log(\"video element source\", videoEle.srcObject);\r\n        videoEle.play();\r\n      })\r\n      .catch((error) => console.log(error, \"media device error\"));\r\n  };\r\n\r\n  stopLocalStream = () => {\r\n    //* stop the stream, get by  navigator.mediaDevices.getUserMedia()\r\n    if (this.state.LocalStream?.getTracks()) {\r\n      this.state.LocalStream.getTracks().forEach((track) => {\r\n        track.stop();\r\n      });\r\n    }\r\n  };\r\n  getPerViewLocalVideo = () => {\r\n    //* get Local video for perview before turn on camera\r\n    let videoEle;\r\n    navigator.mediaDevices.getUserMedia({ audio: false, video: true }).then((stream) => {\r\n      console.log(\"stream\", stream);\r\n      this.setState({ LocalStream: stream });\r\n      videoEle = document.querySelector(\"#PerViewLocalVideo\");\r\n      videoEle.srcObject = stream;\r\n      console.log(\"video element source\", videoEle.srcObject);\r\n      videoEle.play();\r\n    });\r\n  };\r\n  muteMic = async () => {\r\n    const res = await window.webRTCAdaptor.muteLocalMic(window.publishStreamId);\r\n    console.log(res, \"micof\");\r\n    if (res) {\r\n      await this.setState({ isMicOn: false });\r\n    }\r\n  };\r\n  unMuteMic = async () => {\r\n    const res = await window.webRTCAdaptor.unmuteLocalMic(window.publishStreamId);\r\n    console.log(res, \"micon\");\r\n    if (res) {\r\n      this.setState({ isMicOn: true });\r\n    }\r\n  };\r\n  turnOfCamera = async () => {\r\n    const res = await window.webRTCAdaptor.turnOffLocalCamera();\r\n    console.log(res, \"cof\");\r\n    if (res) {\r\n      this.setState({ isCameraOn: false });\r\n    }\r\n  };\r\n  turnOnCamera = async () => {\r\n    const res = await window.webRTCAdaptor.turnOnLocalCamera();\r\n    console.log(res, \"con\");\r\n    if (res) {\r\n      this.setState({ isCameraOn: true });\r\n    }\r\n  };\r\n  enableRecording = async () => {\r\n    const res = await window.webRTCAdaptor.enableRecording(window.publishStreamId, this.state.UserName);\r\n    console.log(res, \"ron\");\r\n    if (res) {\r\n      this.setState({ isRecording: true });\r\n    }\r\n  };\r\n  disableRecording = async () => {\r\n    console.log(\"dis\");\r\n    const res = await window.webRTCAdaptor.disableRecording();\r\n    console.log(res, \"rof\");\r\n    if (res) {\r\n      this.setState({ isRecording: false });\r\n    }\r\n  };\r\n  startScreenShare = async () => {\r\n    // const res = await window.webRTCAdaptor.switchDesktopCapture(window.publishStreamId);\r\n    const res = await window.webRTCAdaptor.startScreenShare(window.publishStreamId);\r\n    console.log(res, \"sson\");\r\n  };\r\n  stopScreenShare = async () => {\r\n    const res = await window.webRTCAdaptor.stopScreenShare(window.publishStreamId);\r\n    console.log(res, \"ssoff\");\r\n  };\r\n  endCall = async () => {\r\n    if (window.webRTCAdaptor?.isScreenShare) {\r\n      //* if screen share is on stopScreenShare and then end call\r\n      this.stopScreenShare();\r\n    }\r\n    await window.webRTCAdaptor.stop(window.publishStreamId);\r\n    if (window.streamsList.length === 0) {\r\n      console.log(\"endcall checking\");\r\n      //* save call end log\r\n      window.webRTCAdaptor.s.emit(\"endcall\", {\r\n        streamId: window.publishStreamId,\r\n        dbName: window.webRTCAdaptor.secToken,\r\n      });\r\n    }\r\n    setTimeout(() => {\r\n      this.props.history.push({\r\n        pathname: `${SubDirectory}/VideoCallEnd`,\r\n      });\r\n    }, 3000);\r\n  };\r\n  openJoinModal = async () => {\r\n    let isCameraAccess = false;\r\n    if (this.state.isAutomate) {\r\n      // no need to check camera permision for android and automation tesing\r\n      isCameraAccess = true;\r\n    } else {\r\n      // tocheck Camera Permission\r\n      isCameraAccess = await this.checkCameraPerMission();\r\n    }\r\n\r\n    if (isCameraAccess) {\r\n    await this.setState({ isError: false });\r\n    await this.setState({ isJoinModal: true });\r\n    await this.getlocalVideo();\r\n    const Name = await getCookies(\"USERNAME\");\r\n    const UserName = this.state.UserName;\r\n    if (Name || UserName) {\r\n      const USERROLE = await getCookies(\"USERROLE\");\r\n      console.log(USERROLE, this.state.USERROLE, \"UserROle\");\r\n      if (USERROLE) this.setState({ USERROLE: USERROLE });\r\n      this.formApiJoin.setValue(\"UserName\", Name || UserName);\r\n    }\r\n    } else {\r\n      await this.setState({ isError: true, displayMessage: \"Your Camera is Blocked\" });\r\n    }\r\n  };\r\n  closeJoinModal = () => {\r\n    this.setState({ isJoinModal: false });\r\n    this.stopLocalStream();\r\n  };\r\n  handleJoinOk = async () => {\r\n    let inputData = this.formApiJoin.getValue(\"UserName\"); \r\n      window.UserName = inputData;\r\n      await this.setState({ UserName: inputData });\r\n      await this.initiateWebRtc();\r\n      await this.closeJoinModal();\r\n  };\r\n  handleJoinCancel = () => {\r\n    this.stopLocalStream();\r\n    console.log(\"cancel\");\r\n    this.closeJoinModal();\r\n     this.props.history.push({\r\n        pathname: `${SubDirectory}/VideoCallEnd`,\r\n      });\r\n  };\r\n  onEnableCamera = async (checked) => {\r\n    if (checked) {\r\n      await this.setState({ isCameraOn: true });\r\n      await this.getlocalVideo();\r\n    } else {\r\n      await this.setState({ isCameraOn: false });\r\n      await this.getlocalVideo();\r\n      await this.stopLocalStream();\r\n    }\r\n\r\n    console.log(checked, \"camera\");\r\n  };\r\n  // onEnableMic = async (checked) => {\r\n  //   if (checked) {\r\n  //     await this.setState({ isMicOn: true });\r\n  //   } else {\r\n  //     await this.setState({ isMicOn: false });\r\n  //   }\r\n  //   console.log(checked, \"mic\");\r\n  //   await this.getlocalVideo();\r\n  // };\r\n  openInvitation = async () => {\r\n    var $temp = $(\"<input>\");\r\n    var $url = $(window.location).attr(\"href\");\r\n    $(\"body\").append($temp);\r\n    $temp.val($url).select();\r\n    document.execCommand(\"copy\");\r\n    $temp.remove();\r\n    await this.setState({\r\n      inviteUrl: $url,\r\n      isInviteModal: true,\r\n      DoctorData: [],\r\n      SelectedDoctor: \"\",\r\n    });\r\n  };\r\n  setFormApiSms = (formApi) => {\r\n    this.formApiSms = formApi;\r\n  };\r\n  setFormApiJoin = (formApi) => {\r\n    this.formApiJoin = formApi;\r\n  };\r\n  customValidationSms = (value) => {\r\n    if (value) {\r\n      const patternEmail = new RegExp(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/);\r\n      const patternMobile = new RegExp(/^(\\+91|0)?\\d{10}$/);\r\n      if (patternEmail.test(value) || patternMobile.test(value)) {\r\n        return undefined;\r\n      } else {\r\n        return \"Enter Valid Data\";\r\n      }\r\n    } else {\r\n      return \"Enter Valid Data\";\r\n    }\r\n  };\r\n  ValidateUserName = (value) => {\r\n    if (value && value.trim().length > 0) {\r\n    } else {\r\n      return \"Enter User Name\";\r\n    }\r\n  };\r\n  sendInviteMsg = async () => {\r\n    //*send invitation link via mail or sms\r\n    let value = this.formApiSms.getValue(\"UserData\");\r\n    const patternEmail = new RegExp(/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9-]+(?:\\.[a-zA-Z0-9-]+)*$/);\r\n    const patternMobile = new RegExp(/^(\\+91|0)?\\d{10}$/);\r\n    let Response = \"Message Not Send\";\r\n    this.setState({ isInviteModal: false });\r\n    if (patternEmail.test(value)) {\r\n      let Email = value;\r\n      let details = `Hi, this is video call request from ${\"saveme.ai\"}, please join by clicking the below link ${this.state.inviteUrl} -- PREMATIX`;\r\n      let subject = \"Saveme.ai Video Call Invitation\";\r\n      const res = await sendInviteMail(details, Email, subject);\r\n      if (res.data.response) {\r\n        Response = res.data.response;\r\n      }\r\n    } else if (patternMobile.test(value)) {\r\n      let MobileNo = value;\r\n      // let Detail = `Hi, this is video call request from ${\"saveme.ai\"}, please join by clicking the below link ${this.state.inviteUrl}  -- PREMATIX`;\r\n      let Link = this.state.inviteUrl;\r\n      const res = await sendInviteSms(MobileNo, Link);\r\n      console.log(res, \"resss\")\r\n      if (res.data.statusCode == 1 && res.data.response.includes(\"Success\")) {\r\n        Response = \"Message Send Successfully\";\r\n      }\r\n    } else {\r\n      console.log(\"wrong data\");\r\n      Response = \"Message Not Send\";\r\n    }\r\n    this.openNotification(Response);\r\n  };\r\n  openSetting = () => {\r\n    this.setState({ isOpenSetting: true });\r\n  };\r\n  onAfterChangeMicGain = (value) => {\r\n    //* set microphone volume level\r\n    const res = window.webRTCAdaptor.changeVolume(value);\r\n    console.log(value, res, \"mic gain\");\r\n  };\r\n  onVideoQualityChange = (value) => {\r\n    //* set video quality level\r\n    console.log(value, \"video quality\", value.value);\r\n    window.webRTCAdaptor.changeBandwidth(value.value, window.publishStreamId);\r\n  };\r\n  debounce = (callbackfnc, delay) => {\r\n    //* here debounse () is to reduce continious api call on, onchange input(like search), we can write custom funtion debounce or  import {debounce} from lodash\r\n    let timer = null;\r\n    return function (...args) {\r\n      clearTimeout(timer);\r\n      timer = setTimeout(() => {\r\n        callbackfnc(...args);\r\n      }, delay);\r\n    };\r\n  };\r\n  handleDoctorNameChange = this.debounce(async (value) => {\r\n    //* Search  doctors in saveme\r\n    this.setState({ isFetching: true });\r\n    console.log(value, \"search\");\r\n    if (value) {\r\n      const res = await getDoctorSearchList(value);\r\n      if (res.data.statusCode === 1 && res.data?.response?.length > 0) {\r\n        this.setState({ DoctorData: res.data.response });\r\n      } else {\r\n        this.setState({ DoctorData: [] });\r\n      }\r\n    } else {\r\n      this.setState({ DoctorData: [] });\r\n    }\r\n    this.setState({ isFetching: false });\r\n  }, 1000);\r\n  handleDoctorChange = (value) => {\r\n    //* selected Doctor details\r\n    console.log(value, \"selected\");\r\n    this.setState({ SelectedDoctor: value });\r\n  };\r\n  onSelectDoctorData = (e) => {\r\n    //* choose Mobile number or mail form doctor data to set that in userdata feild\r\n    console.log(e.target.value, \"data for doctor\");\r\n    this.formApiSms.setValue(\"UserData\", e.target.value);\r\n  };\r\n  //! chat functionalities\r\n  toggleChat = async () => {\r\n    let participants = document.getElementById(\"participant_toggle\");\r\n    participants.style.display = \"none\";\r\n    if (this.state.isOpenChat) {\r\n      let chat = document.getElementById(\"chat_toggle\");\r\n      chat.style.display = \"none\";\r\n      await this.setState({\r\n        setDouble: false,\r\n        newMessage: false,\r\n        isOpenChat: false,\r\n        isOpenParticipant: false,\r\n      });\r\n    } else {\r\n      let chat = document.getElementById(\"chat_toggle\");\r\n      chat.style.display = \"block\";\r\n      await this.setState({\r\n        setDouble: true,\r\n        actualMessage: 0,\r\n        isOpenChat: true,\r\n        isOpenParticipant: false,\r\n      });\r\n      this.scrollDiv.current?.scrollIntoView({ behavior: \"smooth\", block: \"nearest\" });\r\n      if (this.state.newMessage) {\r\n        window.webRTCAdaptor.s.emit(\"messageSeen\");\r\n      }\r\n    }\r\n    ReSize();\r\n  };\r\n\r\n  toggleParticipant = async () => {\r\n    let chat = document.getElementById(\"chat_toggle\");\r\n    let participants = document.getElementById(\"participant_toggle\");\r\n    chat.style.display = \"none\";\r\n    if (this.state.isOpenParticipant) {\r\n      participants.style.display = \"none\";\r\n      await this.setState({\r\n        isOpenChat: false,\r\n        isOpenParticipant: false,\r\n      });\r\n    } else {\r\n      participants.style.display = \"block\";\r\n      await this.setState({\r\n        isOpenChat: false,\r\n        isOpenParticipant: true,\r\n        setDouble: false,\r\n      });\r\n    }\r\n    ReSize();\r\n  };\r\n  onEmojiClick = async (event, emojiObject) => {\r\n    await this.setState({ selectedEmoji: emojiObject, visibleEmoji: false });\r\n    console.log(this.state.selectedEmoji);\r\n    var elem = document.getElementById(\"text\").textContent;\r\n    var elem2 = document.getElementById(\"text\");\r\n    if (elem === undefined) {\r\n      elem2.textContent = String.fromCodePoint(parseInt(emojiObject.unified, 16));\r\n    } else {\r\n      elem2.textContent = elem + String.fromCodePoint(parseInt(emojiObject.unified, 16));\r\n    }\r\n  };\r\n  submitData = (e) => {\r\n    //* send chat msg by pressing Enter Key\r\n    let inputData = document.getElementById(\"text\").textContent;\r\n    // console.log(e.keycode, \"key\", e);\r\n    if (e.keyCode === 13) {\r\n      e.preventDefault();\r\n      this.sendMesg();\r\n    } else {\r\n      this.setState({ showUserDropList: false });\r\n    }\r\n\r\n    //* send private msg\r\n    if (e.keyCode === 50 && inputData.trim().length === 1) {\r\n      // e.preventDefault();\r\n      this.setState({ showUserDropList: true });\r\n    } else {\r\n      this.setState({ showUserDropList: false });\r\n    }\r\n  };\r\n  //debounce is used to avoid multiple times clicked\r\n  sendMesg = this.debounce(async () => {\r\n    //* send chat data\r\n    let uid = uuidv4();\r\n    console.log(uid);\r\n    this.setState({ leftChat: uid });\r\n    let currentdate = new Date();\r\n    let timeStamp = currentdate.getHours() + \":\" + currentdate.getMinutes();\r\n    let inputData = document.getElementById(\"text\").innerHTML;\r\n    let inputData2 = document.getElementById(\"text\").textContent;\r\n\r\n    if (inputData2.trim().length === 0) {\r\n\r\n      if (this.state.fileAppend) {\r\n        if (this.state.youCanSend === true) {\r\n          this.setState({\r\n            fileAppend: false,\r\n            targetFileName: \"\",\r\n            targetFile: \"\",\r\n          });\r\n          let data = {\r\n            from: this.state.UserName,\r\n            name: this.state.FileTobeSend.data.image,\r\n            file: this.state.FileTobeSend.data.filename,\r\n            umessageId: uid,\r\n            time: new Date(),\r\n            dbName: window.webRTCAdaptor.secToken,\r\n            timeStamp: timeStamp,\r\n            reply: [],\r\n            replyType: \"file\",\r\n          };\r\n          await window.webRTCAdaptor.s.emit(\"File\", data);\r\n          $(\"#fileUploader\").val(\"\");\r\n        } else {\r\n          await message.warning(\"Please try again...\");\r\n          this.setState({\r\n            targetFile: \"\",\r\n            FileLoading: false,\r\n          });\r\n        }\r\n      } else {\r\n        await message.warning(\"Please send something...\");\r\n      }\r\n    } else {\r\n      if (this.state.youCanSendTo) {\r\n        let mdata = {\r\n          from: this.state.UserName,\r\n          message: window.webRTCAdaptor.encryptMessage(inputData),\r\n          userId: this.state.selectedMentionUserId,\r\n          umessageId: uid,\r\n          timeStamp: timeStamp,\r\n          time: new Date(),\r\n          dbName: window.webRTCAdaptor.secToken,\r\n          reply: [],\r\n          replyType: \"message\",\r\n        };\r\n        window.webRTCAdaptor.s.emit(\"privatemessage\", mdata);\r\n        this.setState({\r\n          selectedUserDropList: false,\r\n          youCanSendTo: false,\r\n          selectedMentionUser: \"\",\r\n          selectedMentionUserId: \"\",\r\n        });\r\n      } else {\r\n        if (!this.state.replyMessageActivated && !this.state.replyFileMessageActivated) {\r\n          let data = {\r\n            from: this.state.UserName,\r\n            message: window.webRTCAdaptor.encryptMessage(inputData),\r\n            timeStamp: timeStamp,\r\n            umessageId: uid,\r\n            time: new Date(),\r\n            dbName: window.webRTCAdaptor.secToken,\r\n            reply: [],\r\n            replyType: \"message\",\r\n          };\r\n          window.webRTCAdaptor.s.emit(\"message\", data);\r\n        } else {\r\n          if (this.state.replyMessageActivated) {\r\n            let replyData = {\r\n              from: this.state.UserName,\r\n              timeStamp: timeStamp,\r\n              message: window.webRTCAdaptor.encryptMessage(inputData),\r\n              umessageId: uid,\r\n              time: new Date(),\r\n              dbName: window.webRTCAdaptor.secToken,\r\n              reply: [],\r\n              replyType: \"message\",\r\n            };\r\n            window.webRTCAdaptor.s.emit(\"replymessage\", replyData, this.state.selectedReplyMessageId);\r\n            this.setState({ replyMessageActivated: false });\r\n          }\r\n          if (this.state.replyFileMessageActivated) {\r\n            let replyData = {\r\n              from: this.state.UserName,\r\n              message: window.webRTCAdaptor.encryptMessage(inputData),\r\n              timeStamp: timeStamp,\r\n              umessageId: uid,\r\n              time: new Date(),\r\n              dbName: window.webRTCAdaptor.secToken,\r\n              reply: [],\r\n              replyType: \"message\",\r\n            };\r\n            console.log({ replyData });\r\n            window.webRTCAdaptor.s.emit(\"replyfilemessage\", replyData, this.state.selectedReplyMessageId);\r\n            this.setState({ replyFileMessageActivated: false });\r\n          }\r\n        }\r\n      }\r\n      if (this.state.fileAppend) {\r\n        if (this.state.youCanSend === true) {\r\n          this.setState({\r\n            fileAppend: false,\r\n            targetFileName: \"\",\r\n            targetFile: \"\",\r\n          });\r\n        } else {\r\n          await message.warning(\"Please try again...\");\r\n          this.setState({\r\n            targetFile: \"\",\r\n          });\r\n        }\r\n        let data = {\r\n          from: this.state.UserName,\r\n          name: this.state.FileTobeSend.data.image,\r\n          timeStamp: timeStamp,\r\n          file: this.state.FileTobeSend.data.filename,\r\n          umessageId: uid,\r\n          time: new Date(),\r\n          dbName: window.webRTCAdaptor.secToken,\r\n          reply: [],\r\n          replyType: \"file\",\r\n        };\r\n        await window.webRTCAdaptor.s.emit(\"File\", data);\r\n        $(\"#fileUploader\").val(\"\");\r\n      }\r\n    }\r\n    document.getElementById(\"text\").innerText = \"\";\r\n  }, 1000);\r\n  onBlurTyping = async () => {\r\n    //* triger Typing end\r\n    if (this.state.focus) {\r\n      this.setState({\r\n        focus: false,\r\n      });\r\n      window.webRTCAdaptor.s.emit(\"typingEnd\");\r\n    }\r\n  };\r\n  onFocusTyping = async () => {\r\n    //* triger Typing start\r\n    if (!this.state.focus) {\r\n      this.setState({\r\n        focus: true,\r\n      });\r\n      let data = {\r\n        userName: this.state.UserName,\r\n        dbName: window.webRTCAdaptor.secToken,\r\n      };\r\n      window.webRTCAdaptor.s.emit(\"typing\", data);\r\n    }\r\n  };\r\n  onFileChange = async (e) => {\r\n    console.log(e.target.files, e.target, \"files\")\r\n    var iFileSize = e.target.files[0].size;\r\n    // var iConvert = (iFileSize.size / 1048576).toFixed(2);\r\n    if (iFileSize > 1048576) {\r\n      await message.warning(\"Please Choose file less than 1 MB\");\r\n      await this.setState({\r\n        targetFileName: \"\",\r\n        fileAppend: false,\r\n        FileUploadProgress: 0,\r\n      });\r\n    } else {\r\n      this.setState({ targetFile: e.target.files[0], FileUploadProgress: 0 });\r\n      await this.setState({\r\n        targetFileName: e.target.files[0].name,\r\n        fileAppend: true,\r\n      });\r\n      $(\"#fileUploader\").val(\"\");\r\n      var data = new FormData();\r\n      data.append(\"file\", e.target.files[0]);\r\n\r\n      //* for getting upload progress\r\n      var config = {\r\n        onUploadProgress: (progressEvent) => {\r\n          var percentCompleted = Math.round((progressEvent.loaded * 100) / progressEvent.total);\r\n          this.setState({ FileUploadProgress: percentCompleted });\r\n        },\r\n        headers: {\r\n          Authorization: `${staticToken}`,\r\n        },\r\n      };\r\n      axios\r\n        .post(`https://saveme.ai/antmedia/d2/api/upload`, data, config)\r\n        .then((response) => {\r\n          console.log(response);\r\n          this.setState({\r\n            youCanSend: response.data.status,\r\n            FileTobeSend: response,\r\n          });\r\n          console.log(this.state.youCanSend, \"success\");\r\n        })\r\n        .catch((error) => {\r\n          this.setState({\r\n            youCanSend: false,\r\n            fileAppend: false,\r\n            targetFile: false,\r\n            targetFileName: \"\",\r\n          });\r\n          console.log(error);\r\n          console.log(this.state.youCanSend, \"error\");\r\n        });\r\n    }\r\n  };\r\n  closeAppendedFile = async () => {\r\n    await this.setState({\r\n      targetFileName: \"\",\r\n      fileAppend: false,\r\n      FileUploadProgress: 0,\r\n    });\r\n  };\r\n  handleVisibleChange = async () => {\r\n    this.setState({ visibleEmoji: !this.state.visibleEmoji });\r\n  };\r\n  //Makes selected or typing Text Bolder and vice versa\r\n  makeTextBold = this.debounce(async () => {\r\n    if (!this.state.bold) {\r\n      let allBold = document.getElementById(\"jBold\");\r\n      document.execCommand(\"bold\", null, false);\r\n      allBold.style.border = \"none\";\r\n    } else {\r\n      this.inputRef.current.focus();\r\n      let allBold = document.getElementById(\"jBold\");\r\n      allBold.style.border = \"1px solid silver\";\r\n      document.execCommand(\"bold\", null, false);\r\n    }\r\n    await this.setState({ bold: !this.state.bold });\r\n\r\n  }, 500);\r\n  //Makes selected or typing Text Striked and vice versa\r\n  strikethrough = this.debounce(async () => {\r\n    if (this.state.strike) {\r\n      let allStrike = document.getElementById(\"jStrike\");\r\n      allStrike.style.border = \"none\";\r\n      document.execCommand(\"strikethrough\", null, false);\r\n    } else {\r\n      this.inputRef.current.focus();\r\n      let allStrike = document.getElementById(\"jStrike\");\r\n      allStrike.style.border = \"1px solid silver\";\r\n      document.execCommand(\"strikethrough\", null, false);\r\n    }\r\n    await this.setState({ strike: !this.state.strike });\r\n  //Makes selected or typing Text Bolder and vice versa\r\n  }, 500);\r\n  //Makes selected or typing Text Italic and vice versa\r\n  makeTextItalic = this.debounce(async () => {\r\n    if (this.state.italic) {\r\n      let allItalic = document.getElementById(\"jItalic\");\r\n      allItalic.style.border = \"none\";\r\n      document.execCommand(\"italic\", null, false);\r\n    } else {\r\n      this.inputRef.current.focus();\r\n      let allItalic = document.getElementById(\"jItalic\");\r\n      allItalic.style.border = \"1px solid silver\";\r\n      document.execCommand(\"italic\", null, false);\r\n    }\r\n    await this.setState({ italic: !this.state.italic });\r\n\r\n  }, 500);\r\n  //Makes selected or typing Text Underlined and vice versa\r\n  makeTextUnderline = this.debounce(async () => {\r\n    if (this.state.underlined) {\r\n      let allUderline = document.getElementById(\"jUnderline\");\r\n      allUderline.style.border = \"none\";\r\n      document.execCommand(\"underline\", null, false);\r\n    } else {\r\n      this.inputRef.current.focus();\r\n      let allUderline = document.getElementById(\"jUnderline\");\r\n      allUderline.style.border = \"1px solid silver\";\r\n      document.execCommand(\"underline\", null, false);\r\n    }\r\n    await this.setState({ underlined: !this.state.underlined });\r\n\r\n  }, 500);\r\n  submitHandlerLink = async () => {\r\n    //* send link in chat  attached with to text\r\n    let a = document.createElement(\"a\");\r\n    let data1 = document.getElementById(\"chat-t2d\").value;\r\n    let data2 = document.getElementById(\"chat-l2wp\").value;\r\n    let linkText = document.createTextNode(data1);\r\n    a.appendChild(linkText);\r\n    a.title = data1;\r\n    a.target = \"_blank\";\r\n    a.href = data2;\r\n    var insert = document.getElementById(\"text\");\r\n    insert.appendChild(a);\r\n    this.setState({ showInsertModal: false });\r\n  };\r\n  cancelInsertModal = async () => {\r\n    await this.setState({ showInsertModal: false });\r\n  };\r\n  mentionThisUser = async (menUserList) => {\r\n    //* select private msg user name\r\n    console.log(\"userSelected\", menUserList);\r\n    this.setState({\r\n      showUserDropList: false,\r\n      selectedUserDropList: true,\r\n      selectedMentionUser: menUserList.userName,\r\n      selectedMentionUserId: menUserList.socketId,\r\n      youCanSendTo: true,\r\n    });\r\n    this.inputRef.current.focus();\r\n  };\r\n  chatHandlerReply = async (data) => {\r\n    //* chat paticular msg reply\r\n    console.log(data);\r\n    await this.setState({\r\n      selectedReplyMessageId: data.umessageId,\r\n      replyMessageData: data,\r\n      replyMessageActivated: true,\r\n    });\r\n    this.inputRef.current.focus();\r\n  };\r\n  fileHandlerReply = async (data) => {\r\n    //* chat paticular file reply\r\n    console.log(data);\r\n    await this.setState({\r\n      selectedReplyMessageId: data.umessageId,\r\n      replyFileData: data,\r\n      replyFileMessageActivated: true,\r\n    });\r\n    this.inputRef.current.focus();\r\n  };\r\n  reloadWindowFunction = () => {\r\n    window.location.reload();\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <>\r\n        <div className=\"overallbody\">\r\n          <div id=\"raiseHand\" style={{ display: \"none\" }}></div>\r\n          <div className=\"video-call-container\">\r\n            <div className=\"video_func_div\">\r\n              <div className=\"video-call-container-header\">\r\n                {this.state.isRecording && (\r\n                  <div className=\"video-call-container-header-recording\">\r\n                    {/* //* Recording indication */}\r\n                    <RiRecordCircleFill className=\"func_icon_tooltip\" style={{ color: \"red\" }} />\r\n                  </div>\r\n                )}\r\n                <div className=\"video-app-heading\">SaveMe</div>\r\n              </div>\r\n\r\n              <div className=\"video_func_elements\">\r\n                {/*//* video call control buttons section  */}\r\n                <div className=\"video_funcs first-options-btn\" onClick={this.toggleParticipant}>\r\n                  {this.state.MediaStreamList && <span className=\"count_span\">{Object.keys(this.state.MediaStreamList)?.length + 1}</span>}\r\n                  <FaUserFriends className=\"func_icon\" />\r\n                </div>\r\n                <div className=\"video_funcs \" onClick={this.toggleChat}>\r\n                  {this.state.actualMessage >= 1 && !this.state.setDouble ? <span className=\"count_span\">{this.state.actualMessage}</span> : \"\"}\r\n                  <BsChatSquareDotsFill className=\"func_icon\" />\r\n                </div>\r\n\r\n                <Tooltip\r\n                  placement=\"bottomLeft\"\r\n                  overlayClassName=\"threedot_options\"\r\n                  destroyTooltipOnHide\r\n                  trigger=\"click\"\r\n                  title={\r\n                    <div className=\"options_container\">\r\n                      <div className=\"handrise-icons \">\r\n                        <div\r\n                          className=\"handrise-subicon handraise\"\r\n                          onClick={() => {\r\n                            window.webRTCAdaptor?.showRaiseHand(window.publishStreamId, \"handraise\", \"user\");\r\n                          }}\r\n                        >\r\n                          <IoIosHand\r\n                            style={{\r\n                              cursor: \"pointer\",\r\n                              fontSize: \"26px\",\r\n                              color: \"#ffc800\",\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div\r\n                          className=\"handrise-subicon heart\"\r\n                          onClick={() => {\r\n                            window.webRTCAdaptor?.showRaiseHand(window.publishStreamId, \"heart\", \"user\");\r\n                          }}\r\n                        >\r\n                          <IoIosHeart\r\n                            style={{\r\n                              cursor: \"pointer\",\r\n                              fontSize: \"26px\",\r\n                              color: \"#ff0000\",\r\n                            }}\r\n                          />\r\n                        </div>\r\n                        <div\r\n                          className=\"handrise-subicon thumbsup\"\r\n                          onClick={() => {\r\n                            window.webRTCAdaptor?.showRaiseHand(window.publishStreamId, \"thumbsup\", \"user\");\r\n                          }}\r\n                        >\r\n                          <AiFillLike\r\n                            className=\"ml-2\"\r\n                            style={{\r\n                              cursor: \"pointer\",\r\n                              fontSize: \"26px\",\r\n                              color: \"#ffc800\",\r\n                            }}\r\n                          />\r\n                        </div>\r\n                      </div>\r\n                      <div className=\"video_funcs_tooltip\" onClick={this.backgroundChange}>\r\n                        <FaUserCircle className=\"func_icon_tooltip\" />\r\n                        &nbsp;\r\n                        <span className=\"tooltip_options\">Change Background</span>\r\n                      </div>\r\n                      <div className=\"video_funcs_tooltip\" onClick={this.removeBackground}>\r\n                        <FaRegUserCircle className=\"func_icon_tooltip\" />\r\n                        &nbsp;\r\n                        <span className=\"tooltip_options\">Remove Background</span>\r\n                      </div>\r\n                      {this.state.isRecording ? (\r\n                        <div className=\"video_funcs_tooltip\" onClick={this.disableRecording}>\r\n                          <RiRecordCircleFill className=\"func_icon_tooltip\" style={{ color: \"red\" }} />\r\n                          &nbsp;\r\n                          <span className=\"tooltip_options\">Stop Recording</span>\r\n                        </div>\r\n                      ) : (\r\n                        <div className=\"video_funcs_tooltip\" onClick={this.enableRecording}>\r\n                          <RiRecordCircleFill className=\"func_icon_tooltip\" />\r\n                          &nbsp;\r\n                          <span className=\"tooltip_options\">Start Recording</span>\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"video_funcs_tooltip\" onClick={this.openInvitation}>\r\n                        <FaUserPlus className=\"func_icon_tooltip\" />\r\n                        &nbsp;\r\n                        <span className=\"tooltip_options\">Invite People</span>\r\n                      </div>\r\n                      {window.webRTCAdaptor?.isScreenShare === true && (\r\n                        <div className=\"video_funcs_tooltip\" onClick={this.stopScreenShare}>\r\n                          <MdStopScreenShare size=\"20px\" className=\"func_icon_tooltip\" />\r\n                          &nbsp;\r\n                          <span className=\"tooltip_options\">Stop Screen Share</span>\r\n                        </div>\r\n                      )}\r\n                      {window.webRTCAdaptor?.isScreenShare === false && (\r\n                        <div className=\"video_funcs_tooltip\" onClick={this.startScreenShare}>\r\n                          <MdScreenShare size=\"20px\" className=\"func_icon_tooltip\" />\r\n                          &nbsp;\r\n                          <span className=\"tooltip_options\">Start Screen Share</span>\r\n                        </div>\r\n                      )}\r\n\r\n                      <div className=\"video_funcs_tooltip\" onClick={this.openSetting}>\r\n                        <RiSettings2Fill className=\"func_icon_tooltip\" />\r\n                        &nbsp;<span className=\"tooltip_options\">Settings</span>\r\n                      </div>\r\n                      <div className=\"video_funcs_tooltip\" onClick={this.navigateToDashboard}>\r\n                        <MdDashboard className=\"func_icon_tooltip\" />\r\n                        &nbsp;\r\n                        <span className=\"tooltip_options\">WhiteBoard</span>\r\n                      </div>\r\n                    </div>\r\n                  }\r\n                >\r\n                  <div className=\"video_funcs \">\r\n                    <BsThreeDots className=\"func_icon\" />\r\n                  </div>\r\n                </Tooltip>\r\n                {this.state.isMicOn ? (\r\n                  <div className=\"video_funcs\" onClick={this.muteMic}>\r\n                    <RiMicFill className=\"func_icon\" />\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"video_funcs\" onClick={this.unMuteMic}>\r\n                    <RiMicOffFill className=\"func_icon\" />\r\n                  </div>\r\n                )}\r\n                {this.state.isCameraOn ? (\r\n                  <div className=\"video_funcs video_funcs_corner\" onClick={this.turnOfCamera}>\r\n                    <FaVideo className=\"func_icon\" />\r\n                  </div>\r\n                ) : (\r\n                  <Tooltip\r\n                    placement=\"bottom\"\r\n                    overlayClassName=\"perview-local-video\"\r\n                    trigger=\"hover\"\r\n                    mouseEnterDelay={2.0}\r\n                    mouseLeaveDelay={2.0}\r\n                    onVisibleChange={(visible) => {\r\n                      console.log(visible);\r\n                      if (visible) {\r\n                        this.getPerViewLocalVideo();\r\n                      } else {\r\n                        this.stopLocalStream();\r\n                      }\r\n                    }}\r\n                    title={\r\n                      <div className=\"perview-video-container\">\r\n                        <div className=\"perview-title\">\r\n                          <span className=\"perview-title-main\">Private perview</span>&nbsp;\r\n                          <span className=\"perview-title-sub\">(only you can see this)</span>\r\n                        </div>\r\n                        <div className=\"perview-video-player\">\r\n                          <video id=\"PerViewLocalVideo\" type=\"video/ogg\" className=\"PerViewlocalVideo\" autoPlay={true} muted></video>\r\n                        </div>\r\n                      </div>\r\n                    }\r\n                  >\r\n                    <div className=\"video_funcs video_funcs_corner\" onClick={this.turnOnCamera}>\r\n                      <FaVideoSlash className=\"func_icon\" />\r\n                    </div>\r\n                  </Tooltip>\r\n                )}\r\n                <div className=\"video_funcs2\" onClick={this.endCall}>\r\n                  <MdCallEnd className=\"func_icon2\" />\r\n                  <span className=\"leave-btn\"> Leave</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n\r\n            <div className=\"video_consultation_main\">\r\n              <div className=\"videoPlayers\" onContextMenu={(e) => e.preventDefault()}>\r\n                {/* //* videos section  localvideo,remotevideo and screenshare video*/}\r\n                <Draggable bounds=\"parent\">\r\n                  <div className=\"localVideoPlayer\">\r\n                    {/* //* local Video Player */}\r\n                    <div className=\"local-video-content\">\r\n                      <video id=\"localVideo\" className=\"localVideo\" autoPlay={true} width={this.width} height={this.heigth} type=\"video/mp4\" muted />\r\n                      {/* //* poster image for recording backgroung */}\r\n                      <img id=\"posterImgId\" className=\"localVideo\" src={posterImg} alt=\"img\" style={{ display: \"none\", width: \"100%\", height: \"100%\" }} />\r\n                      <canvas id=\"posterImageCanvas\" className=\"localVideo\" style={{ display: \"none\", width: \"100%\", height: \"100%\" }}></canvas>\r\n                      {/* //* For Background img change */}\r\n                      <canvas id=\"localVideoCanvas\" className=\"personBackGround\" width={this.width} height={this.heigth} />\r\n                      <div className=\"background-replacement\">\r\n                        <img\r\n                          id=\"bacImg\"\r\n                          style={{\r\n                            width: this.width,\r\n                            height: this.height,\r\n                            display: \"none\",\r\n                          }}\r\n                          src={bgImg}\r\n                          alt=\"BackGround\"\r\n                        />\r\n                      </div>\r\n                      {/* //* For Background img change */}\r\n                      <canvas id=\"canvasSecId\" style={{ display: \"none\" }} width={this.width} height={this.heigth} />\r\n                      <div className=\"local-video-user-details\">\r\n                        <div className=\"local-video-username\">You</div>\r\n                        <span\r\n                          id=\"Hand\"\r\n                          style={{ display: \"none\" }}\r\n                          className=\"handrise-subicon-localvideo handraise\"\r\n                          onClick={() => window.webRTCAdaptor.showRaiseHand(window.publishStreamId, \"handraise\", \"user\")}\r\n                        >\r\n                          <IoIosHand\r\n                            style={{\r\n                              cursor: \"pointer\",\r\n                              color: \"#ffc800\",\r\n                            }}\r\n                          />\r\n                        </span>\r\n                        <span id=\"HeartId\" style={{ display: \"none\" }} className=\"handrise-subicon-localvideo mr-2 ml-2 heart\">\r\n                          <IoIosHeart\r\n                            style={{\r\n                              color: \"#ff0000\",\r\n                            }}\r\n                          />\r\n                        </span>\r\n                        <span id=\"ThumbsupId\" style={{ display: \"none\" }} className=\"handrise-subicon-localvideo thumbsup\">\r\n                          <AiFillLike\r\n                            className=\"ml-2\"\r\n                            style={{\r\n                              color: \"#ffc800\",\r\n                            }}\r\n                          />\r\n                        </span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </Draggable>\r\n                <div id=\"screensharediv\" className=\"screen-share-video-player\" style={{ display: \"none\" }}>\r\n                  {/*//* screen share  video section */}\r\n                  <div className=\"screenshare-video-content\">\r\n                    <video id=\"screenshare\" poster={screenImg} className=\"screen-share-video-tag \" autoPlay={true}></video>\r\n                    <div className=\"screenshare-user-detail\">\r\n                      <div id=\"screanShareIconDiv\">\r\n                        <div className=\"screenshare-user-icons\">\r\n                          <i className=\"antsdk-remote-video-mic-icon antsdk-remote-video-mic-icon-unmute\" id=\"munmutescreenDiv\" style={{ display: \"block\" }}>\r\n                            <RiMicFill />\r\n                          </i>\r\n                          <i className=\"antsdk-remote-video-mic-icon antsdk-remote-video-mic-icon-mute\" id=\"mmutescreenDiv\" style={{ display: \"none\" }}>\r\n                            <RiMicOffFill />\r\n                          </i>\r\n                          <i className=\"antsdk-remote-video-handraise-icon antsdk-remote-video-handraise-icon-handraise\" id=\"HandscreenDiv\" style={{ display: \"none\" }}>\r\n                            <IoIosHand\r\n                              style={{\r\n                                color: \"#ffc800\",\r\n                              }}\r\n                            />\r\n                          </i>\r\n                          <i className=\"antsdk-remote-video-handraise-icon antsdk-remote-video-handraise-icon-thumbsup\" id=\"ThumbsupscreenDiv\" style={{ display: \"none\" }}>\r\n                            <AiFillLike\r\n                              className=\"ml-2\"\r\n                              style={{\r\n                                color: \"#ffc800\",\r\n                              }}\r\n                            />\r\n                          </i>\r\n                          <i className=\"antsdk-remote-video-handraise-icon antsdk-remote-video-handraise-icon-heart\" id=\"HeartscreenDiv\" style={{ display: \"none\" }}>\r\n                            <IoIosHeart\r\n                              style={{\r\n                                color: \"#ff0000\",\r\n                              }}\r\n                            />\r\n                          </i>\r\n                        </div>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div id=\"players\" className=\"antsdk-remote-video-players\">\r\n                  {/* //* remote videos section*/}\r\n                  {/* {this.state.MediaStreamList &&\r\n                    Object.entries(this.state.MediaStreamList).map((user) => {\r\n                      //* Note: 1.user[0]=>key(streamId), 2.user[1]=>values(stream and userName)\r\n                      return <RemoteVideo streamId={user[0]} mediaStream={user[1].stream} raiseIfRequired={this.customCallback} ledger={this.state.ledger} userName={user[1].userName} notifyUser={this.openNotification} />;\r\n                    })} */}\r\n                  {this.state.MultiStream &&\r\n                    this.state.MultiStream.getVideoTracks().map((track) => {\r\n                      //* Note: 1.user[0]=>key(streamId), 2.user[1]=>values(stream and userName)\r\n                      return <RemoteVideo streamId={track.id} videoTrack={track} userName={track.id} raiseIfRequired={this.customCallback} ledger={this.state.ledger} notifyUser={this.openNotification} />;\r\n                    })}\r\n                </div>\r\n              </div>\r\n              {\r\n                <div className=\"side_div_main\" id=\"participant_toggle\">\r\n                  {/*//* participant section*/}\r\n                  <ParticipantList MediaStreamList={this.state.MediaStreamList} onToogleParticipant={this.toggleParticipant} />\r\n                </div>\r\n              }\r\n              {\r\n                <div className=\"side_div_main\" id=\"chat_toggle\">\r\n                  {/*//* chart sectiion  */}\r\n                  <div className=\"chat_div\">\r\n                    <div className=\"chatHeader\">\r\n                      <div className=\"chat-close\" onClick={() => this.toggleChat()}>\r\n                        <AiOutlineClose />\r\n                      </div>\r\n                      <span className=\"Qoute\">Chat</span>\r\n                      {this.state.isTyping ? (\r\n                        <p className=\"typingindic\">\r\n                          <span className=\"chat-typer-name\"> {this.state.TypingName}</span>\r\n                          &nbsp;typing\r\n                          <div style={{ marginLeft: \"5px\", fontSize: \"18px\" }}>\r\n                            <TypingAnimation />\r\n                          </div>\r\n                        </p>\r\n                      ) : (\r\n                        \"\"\r\n                      )}\r\n                    </div>\r\n                    <div className=\"chat_body\">\r\n                      <div id=\"messageBox\">\r\n                   \r\n                      </div>\r\n\r\n         \r\n\r\n                      {this.state.messageSent && (\r\n                          <div className=\"messageSeen\">\r\n                            {this.state.justSend ? (\r\n                              // <Tooltip title=\"sent\" className=\"ant_tooltip_chat\">\r\n                              <p title=\"sent\"><IoMdCheckmarkCircle className=\"seen_icon\" /></p>\r\n                              // </Tooltip>\r\n                            ) : (\r\n                              // <Tooltip title=\"seen\" className=\"ant_tooltip_chat\">\r\n                              <p title=\"seen\"><VscEye className=\"seen_icon\" /></p>\r\n                              // </Tooltip>\r\n                            )}\r\n                          </div>\r\n                        )}\r\n                               <div id=\"emptyDiv\" className=\"p-2\" ref={this.scrollDiv}>    </div>\r\n\r\n                    </div>\r\n                    <div className=\"text_input\">\r\n                      <Row className=\"input_send\">\r\n                        <Col id=\"file_viewer\">\r\n                          {this.state.fileAppend && (\r\n                            <div className=\"file_append\" style={{ flexDirection: \"column\" }}>\r\n                              <div\r\n                                style={{\r\n                                  display: \"flex\",\r\n                                  flexDirection: \"row\",\r\n                                  justifyContent: \"space-between\",\r\n                                }}\r\n                              >\r\n                                <div classsName=\"file_append_body\">\r\n                                  <div className=\"file_icon_div\">\r\n                                    <RiFile3Fill className=\"file_icon\" />\r\n                                  </div>\r\n                                  <p className=\"file_append_file\">{this.state.targetFileName}</p>{\" \"}\r\n                                </div>\r\n                                <div className=\"file_icon_close\">\r\n                                  <RiCloseFill className=\"close_file_icon\" onClick={this.closeAppendedFile} />\r\n                                </div>\r\n                              </div>\r\n                              {this.state.FileUploadProgress > 1 ? (\r\n                                <Progress\r\n                                  strokeColor={{\r\n                                    \"0%\": \"rgb(180, 224, 215)\",\r\n                                    \"100%\": \"#209f85\",\r\n                                  }}\r\n                                  percent={this.state.FileUploadProgress}\r\n                                />\r\n                              ) : (\r\n                                \"\"\r\n                              )}\r\n                            </div>\r\n                          )}\r\n                        </Col>\r\n                        <Col\r\n                          style={{\r\n                            display: \"flex\",\r\n                            paddingRight: \"0px\",\r\n                            paddingLeft: \"0px\",\r\n                          }}\r\n                        >\r\n                          {this.state.showUserDropList && (\r\n                            <div className=\"user_mention\">\r\n                              {this.state.MediaStreamList &&\r\n                                Object.values(this.state.MediaStreamList).map((el) => {\r\n                                  return (\r\n                                    <p\r\n                                      className=\"user_mention_list\"\r\n                                      onClick={() => {\r\n                                        this.mentionThisUser(el);\r\n                                      }}\r\n                                    >\r\n                                      {el.userName}\r\n                                    </p>\r\n                                  );\r\n                                })}\r\n                            </div>\r\n                          )}\r\n                          {this.state.replyMessageActivated && (\r\n                            <div className=\"reply_content_sel reply_chat_sel\">\r\n                              <div class=\"reply_chat_content\">\r\n                                <p>{this.state.replyMessageData.from}</p>\r\n                                <span>{ReactHtmlParser(window.webRTCAdaptor.decryptMessage(this.state.replyMessageData.message))}</span>\r\n                              </div>\r\n                              <div className=\"file_icon_close\">\r\n                                <RiCloseFill\r\n                                  className=\"close_file_icon\"\r\n                                  onClick={() => {\r\n                                    this.setState({\r\n                                      replyMessageActivated: false,\r\n                                      selectedReplyMessageId: \"\",\r\n                                    });\r\n                                  }}\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {this.state.replyFileMessageActivated && (\r\n                            <div className=\"reply_content_sel reply_file_sel\">\r\n                              <div class=\"reply_chat_content\">\r\n                                <p>{this.state.replyFileData.from}</p>\r\n                                <span>{this.state.replyFileData.file}</span>\r\n                              </div>\r\n                              <div className=\"file_icon_close\">\r\n                                <RiCloseFill\r\n                                  className=\"close_file_icon\"\r\n                                  onClick={() => {\r\n                                    this.setState({\r\n                                      replyFileMessageActivated: false,\r\n                                      selectedReplyMessageId: \"\",\r\n                                    });\r\n                                  }}\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          {this.state.selectedUserDropList && (\r\n                            <div className=\"user_mention_sel\">\r\n                              <p className=\"mentioned_user\">\r\n                                Send(privately) <br /> to : \"{this.state.selectedMentionUser}\"\r\n                              </p>\r\n                              <div className=\"file_icon_close\">\r\n                                <RiCloseFill\r\n                                  className=\"close_file_icon\"\r\n                                  onClick={() => {\r\n                                    this.setState({\r\n                                      selectedUserDropList: false,\r\n                                      youCanSendTo: false,\r\n                                    });\r\n                                  }}\r\n                                />\r\n                              </div>\r\n                            </div>\r\n                          )}\r\n                          <div\r\n                            id=\"text\"\r\n                            contentEditable=\"true\"\r\n                            style={{\r\n                              width: \"80% !important\",\r\n                              padding: \"25px !important\",\r\n                              paddingLeft: \"17px\",\r\n                              borderRadius: \"25px !important\",\r\n                            }}\r\n                            className=\"text_input_box\"\r\n                            onKeyDown={(e) => {\r\n                              this.submitData(e);\r\n                            }}\r\n                            onFocus={this.onFocusTyping}\r\n                            onBlur={this.onBlurTyping}\r\n                            ref={this.inputRef}\r\n                            spellCheck=\"true\"\r\n                          ></div>\r\n                          <div className=\"chat_header_close2\" onClick={this.sendMesg}>\r\n                            <RiSendPlane2Fill className=\"sendbtn\" />\r\n                          </div>\r\n                        </Col>\r\n                      </Row>\r\n                      <div className=\"file_editor\">\r\n                        <div>\r\n                          <TiAttachment className=\"attach_pin\" style={{ cursor: \"pointer\" }} />\r\n                        </div>{\" \"}\r\n                        <VideoCallFileUploader\r\n                          type=\"file\"\r\n                          id=\"fileUploader\"\r\n                          field=\"prescriptionLink\"\r\n                          onChange={(e) => {\r\n                            this.onFileChange(e);\r\n                          }}\r\n                        />\r\n                        <Popover\r\n                          visible={this.state.visibleEmoji}\r\n                          trigger=\"click\"\r\n                          onVisibleChange={(visible) => this.setState({ visibleEmoji: visible })}\r\n                          content={\r\n                            <>\r\n                              <div className=\"emoji_div\">\r\n                                <Picker onEmojiClick={this.onEmojiClick} />\r\n                              </div>\r\n                            </>\r\n                          }\r\n                          title=\"Emoji Picker\"\r\n                        >\r\n                          <button id=\"insertLink\" className=\"bold_text\" onClick={() => this.setState({ visibleEmoji: !this.state.visibleEmoji })}>\r\n                            <GrEmoji className=\"emoji_picker_chat\" />\r\n                          </button>\r\n                        </Popover>\r\n                        <button id=\"jBold\" className=\"bold_text\" onClick={this.makeTextBold}>\r\n                          <BsTypeBold />\r\n                        </button>\r\n                        <button id=\"jUnderline\" className=\"bold_text\" onClick={this.makeTextUnderline}>\r\n                          <BiUnderline />\r\n                        </button>\r\n                        <button id=\"jItalic\" className=\"bold_text\" onClick={this.makeTextItalic}>\r\n                          <BiItalic />\r\n                        </button>\r\n                        <button id=\"jStrike\" className=\"bold_text\" onClick={this.strikethrough}>\r\n                          <BiStrikethrough />\r\n                        </button>\r\n                        {/* <Popover\r\n                          arrowPointAtCenter\r\n                          placement=\"bottomRight\"\r\n                          visible={this.state.showInsertModal}\r\n                          content={\r\n                            <>\r\n                              <div\r\n                                className=\"insert_link_main\"\r\n                                style={{\r\n                                  background: \"white\",\r\n                                  height: \"240px\",\r\n                                  padding: \"10px\",\r\n                                  borderRadius: \"10px\",\r\n                                }}\r\n                              >\r\n                                <p className=\"insert_link_header\">Insert Link</p>\r\n                                <div className=\"insert_start\">\r\n                                  <div className=\"insert_text\">\r\n                                    <span>Text to display</span>\r\n                                    <Input placeholder=\"Text to display\" id=\"chat-t2d\" />\r\n                                  </div>\r\n                                  <div className=\"insert_address\">\r\n                                    <span>Address</span>\r\n                                    <Input placeholder=\"Link to web page\" id=\"chat-l2wp\" />\r\n                                  </div>\r\n                                </div>\r\n                                <div className=\"insert_buttons\">\r\n                                  <Button onClick={this.cancelInsertModal} className=\"insert_cbtn\">\r\n                                    Cancel\r\n                                  </Button>\r\n                                  <Button type=\"submit\" onClick={this.submitHandlerLink} className=\"insert_ibtn\">\r\n                                    Insert\r\n                                  </Button>\r\n                                </div>\r\n                              </div>\r\n                            </>\r\n                          }\r\n                          trigger=\"click\"\r\n                        >\r\n                          <button\r\n                            id=\"insertLink\"\r\n                            className=\"bold_text\"\r\n                            onClick={() => {\r\n                              this.setState({\r\n                                showInsertModal: !this.state.showInsertModal,\r\n                              });\r\n                            }}\r\n                          >\r\n                            <BsLink />\r\n                          </button>\r\n                        </Popover> */}\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              }\r\n            </div>\r\n          </div>\r\n          <>\r\n            {this.state.isJoinModal && (\r\n              <Modal style={{ top: 30 }} title=\"Save Me\" width=\"800px\" visible={this.state.isJoinModal} onCancel={this.handleJoinCancel} footer={null} destroyOnClose className=\"joinmodel_container\">\r\n                {/*//* Joining Model section */}\r\n                {\r\n                  <Row className=\"joinModel\">\r\n                    <Col md={6} className=\"modelLocalVideoPlayer\" onContextMenu={(e) => e.preventDefault()}>\r\n                      <video id=\"modelLocalVideo\" type=\"video/ogg\" className=\"modellocalVideo\" autoPlay={true} muted></video>\r\n                    </Col>\r\n                    <Col md={6} className=\"joining-localVideoControls\">\r\n                      <Form getApi={this.setFormApiJoin} onSubmit={this.handleJoinOk}>\r\n                        {({ formApi, formState }) => (\r\n                          <div className=\"joining-form\">\r\n                            <Row>\r\n                              <Col md={12} className=\"mt-3\">\r\n                                <Switch onChange={this.onEnableCamera} defaultChecked className=\"switch_modal\" /> &nbsp;\r\n                                <label className=\"join-label \">Enable Camera </label>\r\n                              </Col>\r\n                              {/* <Col md={12} className=\"mt-3\">\r\n          <Switch onChange={this.onEnableMic} defaultChecked className=\"switch_modal\" />\r\n          &nbsp;\r\n          <label className=\"join-label \"> Enable Microphone </label>\r\n        </Col> */}\r\n                              <Col md={8} className=\"mt-3 pb-4\">\r\n                                <label className=\"join-label mb-1\">User Name</label>\r\n                                <Text\r\n                                  placeholder=\"Enter User Name\"\r\n                                  field=\"UserName\"\r\n                                  className={`form-control joining-username ${formState?.errors?.UserName ? \"noUserName\" : \"\"}`}\r\n                                  validate={(e) => this.ValidateUserName(e)}\r\n                                  valid\r\n                                  validateOnBlur\r\n                                  validateOnChange\r\n                                />\r\n                              </Col>\r\n                              <Col md={10} className=\"d-flex\">\r\n                                <button type=\"submit\" className=\"joinbtn btn btn-primary \">\r\n                                  Join\r\n                                </button>\r\n                                <button className=\"btn cancelbtn  btn-outline-primary ml-4\" onClick={() => this.handleJoinCancel()}>\r\n                                  Cancel\r\n                                </button>\r\n                              </Col>\r\n                            </Row>\r\n                          </div>\r\n                        )}\r\n                      </Form>\r\n                    </Col>\r\n                  </Row>\r\n                }\r\n              </Modal>\r\n            )}\r\n\r\n            {this.state.isError && (\r\n              <Modal\r\n                title=\"Save Me\"\r\n                visible={this.state.isError}\r\n                // onCancel={() => { \r\n                //   this.setState({ isInviteModal: false });\r\n                // }}\r\n                footer={null}\r\n                closable={false}\r\n                destroyOnClose\r\n              >\r\n                {/*//* Alert if Camera Access is not given by browser model section*/}\r\n                <div className=\"CameraAccessModel\">\r\n                  <div className=\"camera-access-block\">{this.state.displayMessage}</div>\r\n                  {this.state.webSocketModel && (\r\n                    <Button className=\"btn btn-primary\" onClick={() => this.reloadWindowFunction()}> Refresh</Button>\r\n                  )}\r\n                  {/* <div className=\"camera-access-allow\">Allow access and then Refresh the page</div> */}\r\n                </div>\r\n              </Modal>\r\n            )}\r\n            {this.state.isInviteModal && (\r\n              <Modal\r\n                title=\"Save Me\"\r\n                visible={this.state.isInviteModal}\r\n                onCancel={() => {\r\n                  this.setState({ isInviteModal: false });\r\n                }}\r\n                footer={null}\r\n                destroyOnClose\r\n              >\r\n                {/*//* Invitation model section*/}\r\n                <div className=\"InviteModel\">\r\n                  <Form getApi={this.setFormApiSms} onSubmit={this.sendInviteMsg}>\r\n                    {({ formApi, formState }) => (\r\n                      <Row>\r\n                        {this.state.USERROLE === \"D\" && (\r\n                          <>\r\n                            <Col md={12}>\r\n                              <h6 className=\"invitation_label\">Search Doctor Name</h6>\r\n                              <Select\r\n                                showSearch\r\n                                value={this.state.SelectedDoctor}\r\n                                placeholder=\"Search a Doctor\"\r\n                                style={{ width: \"100%\" }}\r\n                                defaultActiveFirstOption={false}\r\n                                showArrow={true}\r\n                                filterOption={false}\r\n                                onSearch={this.handleDoctorNameChange}\r\n                                onChange={this.handleDoctorChange}\r\n                                notFoundContent={this.state.isFetching ? <Spin size=\"small\" /> : \"No Data\"}\r\n                              >\r\n                                {this.state.DoctorData.map((d) => {\r\n                                  return (\r\n                                    <Option value={JSON.stringify(d)} key={d.DoctorId}>\r\n                                      {d.DoctorName + \",\" + d.SpecialityTypeName + \",\" + d.HospitalName}\r\n                                    </Option>\r\n                                  );\r\n                                })}\r\n                              </Select>\r\n                            </Col>\r\n\r\n                            {this.state.SelectedDoctor && (\r\n                              <Col className=\"mt-3 ml-3\">\r\n                                <RadioGroup field=\"SelectedDoctorData\" onChange={this.onSelectDoctorData}>\r\n                                  <Row>\r\n                                    <h6 className=\"invitation_label\">\r\n                                      <Radio value={`${JSON.parse(this.state.SelectedDoctor)?.MobileNo}`} className=\"invite_radio\" />\r\n                                      &nbsp;Mobile No :{JSON.parse(this.state.SelectedDoctor)?.MobileNo}\r\n                                    </h6>\r\n                                  </Row>\r\n                                  <Row>\r\n                                    <h6 className=\"invitation_label\">\r\n                                      <Radio className=\"invite_radio\" value={`${JSON.parse(this.state.SelectedDoctor)?.MailId}`} />\r\n                                      &nbsp;Email Id :{JSON.parse(this.state.SelectedDoctor)?.MailId}\r\n                                    </h6>\r\n                                  </Row>\r\n                                </RadioGroup>\r\n                              </Col>\r\n                            )}\r\n                          </>\r\n                        )}\r\n                        <Col md={12} className=\"mt-3\">\r\n                          <h6 className=\"invitation_label\">Mobile No / Email Id</h6>\r\n                          <Text className=\"form-control invite-user\" field=\"UserData\" validate={(e) => this.customValidationSms(e)} validateOnBlur />\r\n                        </Col>\r\n                        <Col md={12} className=\"mt-4\">\r\n                          <h6 className=\"invitation_label\">Invitation Link Copied</h6>\r\n                          <div className=\"invitation_label_link\">{this.state.inviteUrl}</div>\r\n                        </Col>\r\n                        <Col md={12} style={{ marginTop: \"40px\" }}>\r\n                          <button className=\"invite-btn\" type=\"submit\">\r\n                            Send Invitation Link\r\n                          </button>\r\n                        </Col>\r\n                      </Row>\r\n                    )}\r\n                  </Form>\r\n                </div>\r\n              </Modal>\r\n            )}\r\n            {this.state.isOpenSetting && (\r\n              <Modal\r\n                title=\"Settings\"\r\n                visible={this.state.isOpenSetting}\r\n                onCancel={() => {\r\n                  this.setState({ isOpenSetting: false });\r\n                }}\r\n                footer={null}\r\n              >\r\n                {/* //*Setting model section*/}\r\n                <div className=\"video-settings\">\r\n                  <h6 className=\"setting_label\">Microphone volume:</h6>\r\n                  <Col span={6}>\r\n                    <Slider min={0} max={1} defaultValue={1} onAfterChange={this.onAfterChangeMicGain} step={0.01} />\r\n                  </Col>\r\n                  <h6 className=\"setting_label\"> Video quality:</h6>\r\n                  <Col span={6}>\r\n                    <Select labelInValue defaultValue={{ value: `${window.webRTCAdaptor.bandwidth}` || \"50\" }} style={{ width: 140 }} onChange={this.onVideoQualityChange}>\r\n                      <Option value=\"50\">Low(Default)</Option>\r\n                      <Option value=\"1200\">Average</Option>\r\n                      <Option value=\"1500\">High</Option>\r\n                      <Option value=\"4000\">HD 720</Option>\r\n                      <Option value=\"8000\">HD 1080</Option>\r\n                    </Select>\r\n                  </Col>\r\n                </div>\r\n              </Modal>\r\n            )}\r\n          </>\r\n        </div>\r\n      </>\r\n    );\r\n  }\r\n}\r\nexport default VideoConsult;\r\n","export default __webpack_public_path__ + \"static/media/videohome.a23c251e.svg\";","import React, { Component } from \"react\";\r\nimport { Divider, message } from \"antd\";\r\nimport { Text } from \"informed\";\r\n\r\nimport { SubDirectory } from \"../../../config.json\";\r\nimport videohomeImg from \"../../Image/videohome.svg\";\r\nimport { createNewRoom } from \"../../../Services/videoCallServices\";\r\nexport default class VideoHome extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      roomName: \"\",\r\n    };\r\n  }\r\n  startVideo = () => {\r\n    console.log(this.props);\r\n    this.props.history.push({\r\n      pathname: `${SubDirectory}/VideoConsultation`,\r\n      search: \"?ConsultationId=61977707bbf6efd64e490b54\",\r\n      editState: { preProps: this.props },\r\n    });\r\n  };\r\n  createRoom = async () => {\r\n    if (this.state.roomName.trim()) {\r\n      const response = await createNewRoom(this.state.roomName);\r\n      if (response?.data?.status && response?.data?.roomId) {\r\n        message.success(\"Room created successfully\");\r\n        this.props.history.push({\r\n          // pathname: `/VideoConsultation/?ConsultationId=${this.props.state?.ConsultionId}`,\r\n          pathname: `${SubDirectory}/VideoConsultation`,\r\n          search: `?ConsultationId=${response.data.roomId}`,\r\n        });\r\n      } else {\r\n        message.warning(\"Try again\");\r\n      }\r\n    } else {\r\n      message.warning(\"Enter Room Name\");\r\n    }\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"row  justify-content-center w-100 mt-5\">\r\n        <div className=\"col-lg-7  col-md-7 col-sm-12 pl-5\">\r\n          <img src={videohomeImg} width=\"90%\" alt=\"video\" />\r\n        </div>\r\n        <div className=\"col-lg-4  col-md-4 col-sm-8 d-flex align-item-center \">\r\n          <div className=\"d-flex  mt-auto mb-auto\">\r\n            <div className=\"row ml-auto  mr-auto p-4\">\r\n              <button className=\"col-12 btn btn-lg btn-primary mt-2\" onClick={this.startVideo}>\r\n                Join Test Room\r\n              </button>\r\n              <Divider style={{ borderWidth: 1, borderColor: \"#393939\" }}>or</Divider>\r\n              <div className=\" col-12  mt-3 pb-4\">\r\n                <h6>New Room Name</h6>\r\n                <Text\r\n                  placeholder=\"Enter Room Name\"\r\n                  onChange={(e) => {\r\n                    this.setState({ roomName: e.target.value });\r\n                  }}\r\n                  className={`form-control `}\r\n                  field=\"RoomName\"\r\n                />\r\n              </div>\r\n              <button className=\" col-12 btn btn-lg btn-primary \" onClick={this.createRoom}>\r\n                Create New Room\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","export default __webpack_public_path__ + \"static/media/endcall.c2383a34.gif\";","import React, { Component } from 'react'\r\nimport endCall from \"../../Image/endcall.gif\"\r\nexport default class EndCall extends Component {\r\n    render() {\r\n        return (\r\n            <div className=\"end-call\">\r\n                \r\n                      <div className=\"d-flex  flex-column justify-content-center w-100 mt-5\">\r\n\r\n        <div className=\" d-flex  pt-4 justify-content-center \">\r\n          <img src={endCall} width=\"300px\" alt=\"Call Ended\" />\r\n        </div>\r\n        <div className=\" pt-3  text-center\" style={{fontSize:\"24px\",fontWeight:\"600\", color: \"#f14c4c\",fontFamily:\"Poppins\"}}>\r\nCall Ended...\r\n        </div>\r\n        </div>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\n","import React, { Component } from \"react\";\r\nimport \"./app.css\";\r\nimport \"bootstrap/dist/css/bootstrap.min.css\";\r\nimport { SubDirectory } from \"./config.json\";\r\nimport VideoConsult from \"./VideoConsultation/VideoCall/VideoCalls/VideoConsult\";\r\nimport { BrowserRouter as Router, Switch, Route, Redirect } from \"react-router-dom\";\r\nimport VideoHome from \"./VideoConsultation/VideoCall/VideoHome/VideoHome\";\r\nimport EndCall from \"./VideoConsultation/VideoCall/EndCall/EndCall\";\r\n\r\nexport default class App extends Component {\r\n  render() {\r\n    return (\r\n      <>\r\n        <Router>\r\n          <Switch>\r\n            <Route path={`${SubDirectory}/VideoConsultation`} component={VideoConsult} />\r\n            <Route path={`${SubDirectory}/videoHome`} component={VideoHome} />\r\n            <Route path={`${SubDirectory}/videoCallEnd`} component={EndCall} />\r\n\r\n            <Redirect to={`${SubDirectory}/videoHome`} />\r\n          </Switch>\r\n        </Router>\r\n      </>\r\n    );\r\n  }\r\n}\r\n","const reportWebVitals = onPerfEntry => {\r\n  if (onPerfEntry && onPerfEntry instanceof Function) {\r\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\r\n      getCLS(onPerfEntry);\r\n      getFID(onPerfEntry);\r\n      getFCP(onPerfEntry);\r\n      getLCP(onPerfEntry);\r\n      getTTFB(onPerfEntry);\r\n    });\r\n  }\r\n};\r\n\r\nexport default reportWebVitals;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById(\"root\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n","// console.log = function () { }\r\n// This Client SDK Can only be used with the the direct browser link\r\nvar PeerStats = require(\"./peerStats\");\r\nvar StreamMerger = require(\"./mergerAdaptor\");\r\nvar WebSocketAdaptor = require(\"./RTCsocketAdaptor\");\r\nconst { default: adapter } = require(\"webrtc-adapter\");\r\nconst io = require(\"socket.io-client\");\r\nconst bodyPix = require(\"@tensorflow-models/body-pix\");\r\nconst axios = require(\"axios\");\r\nconst CryptoJS = require(\"crypto-js\");\r\n\r\nwindow.roomOfStream = new Array();\r\nwindow.streamsList = new Array();\r\nwindow.playOnly = false;\r\n\r\nArray.prototype.inArray = function (comparer) {\r\n  for (var i = 0; i < this.length; i++) {\r\n    if (comparer(this[i])) return true;\r\n  }\r\n  return false;\r\n};\r\nArray.prototype.pushIfNotExist = function (element, comparer) {\r\n  if (!this.inArray(comparer)) {\r\n    this.push(element);\r\n  }\r\n};\r\n\r\nfunction publish(adaptor, streamId, token, streamName) {\r\n  window.publishStreamId = streamId;\r\n  adaptor.publish(streamId, token, \"\", \"\", streamName, window.roomId);\r\n}\r\n\r\nfunction streamInformation(adaptor, obj) {\r\n  adaptor.play(obj.streamId, window.token, window.roomId);\r\n}\r\n\r\nasync function playVideo(obj) {\r\n  var room = window.roomOfStream[obj.streamId];\r\n\r\n  var video = document.querySelector(\"#remoteVideo\" + obj.streamId);\r\n  // setTimeout( async () => {\r\n  if (video == null) {\r\n    await createRemoteVideo(obj.streamId);\r\n    video = document.querySelector(\"#remoteVideo\" + obj.streamId);\r\n  }\r\n  video.srcObject = obj.stream;\r\n  // },1000)\r\n}\r\n\r\nfunction handleNotificationEvent(obj) {\r\n  var notificationEvent = obj;\r\n  if (notificationEvent != null && typeof notificationEvent == \"object\") {\r\n    var eventStreamId = notificationEvent.streamId;\r\n    var eventTyp = notificationEvent.eventType;\r\n    if (eventTyp == \"MIC_MUTED\") {\r\n      var vmute = \"mmute\" + eventStreamId;\r\n      var vunmute = \"munmute\" + eventStreamId;\r\n      try {\r\n        document.getElementById(vunmute).style.display = \"none\";\r\n        document.getElementById(vmute).style.display = \"block\";\r\n        document.getElementById(\"munmutescreenDiv\").style.display = \"none\";\r\n        document.getElementById(\"mmutescreenDiv\").style.display = \"block\";\r\n      } catch (e) {\r\n        console.log(\"error\", e);\r\n      }\r\n    } else if (eventTyp == \"MIC_UNMUTED\") {\r\n      var vmute = \"mmute\" + eventStreamId;\r\n      var vunmute = \"munmute\" + eventStreamId;\r\n      try {\r\n        document.getElementById(vmute).style.display = \"none\";\r\n        document.getElementById(vunmute).style.display = \"block\";\r\n        document.getElementById(\"munmutescreenDiv\").style.display = \"none\";\r\n        document.getElementById(\"mmutescreenDiv\").style.display = \"block\";\r\n      } catch (e) {\r\n        console.log(\"unmute error\", e);\r\n      }\r\n    } else if (eventTyp == \"PARTICIPANT\") {\r\n      var userCount = 0;\r\n      var userNameList = [];\r\n      for (user in eventStreamId) {\r\n        if (typeof eventStreamId[user].userName !== \"undefined\") {\r\n          userCount++;\r\n          userNameList.push({\r\n            userName: eventStreamId[user].userName,\r\n            streamId: eventStreamId[user].streamId,\r\n          });\r\n        }\r\n      }\r\n\r\n      return [userNameList, userCount];\r\n    }\r\n  }\r\n}\r\n\r\nfunction defaultErrorCallback(error, message) {\r\n  //some of the possible errors, NotFoundError, SecurityError,PermissionDeniedError\r\n  if (\r\n    error.indexOf(\"publishTimeoutError\") != -1 &&\r\n    window.roomTimerId != null\r\n  ) {\r\n    clearInterval(window.roomTimerId);\r\n  }\r\n\r\n  var errorMessage = JSON.stringify(error);\r\n  if (typeof message != \"undefined\") {\r\n    errorMessage = message;\r\n  }\r\n  var errorMessage = JSON.stringify(error);\r\n  if (error.indexOf(\"NotFoundError\") != -1) {\r\n    errorMessage = \"Camera or Mic are not found or not allowed in your device.\";\r\n  } else if (\r\n    error.indexOf(\"NotReadableError\") != -1 ||\r\n    error.indexOf(\"TrackStartError\") != -1\r\n  ) {\r\n    errorMessage =\r\n      \"Camera or Mic is being used by some other process that does not not allow these devices to be read.\";\r\n  } else if (\r\n    error.indexOf(\"OverconstrainedError\") != -1 ||\r\n    error.indexOf(\"ConstraintNotSatisfiedError\") != -1\r\n  ) {\r\n    errorMessage =\r\n      \"There is no device found that fits your video and audio constraints. You may change video and audio constraints.\";\r\n  } else if (\r\n    error.indexOf(\"NotAllowedError\") != -1 ||\r\n    error.indexOf(\"PermissionDeniedError\") != -1\r\n  ) {\r\n    errorMessage = \"You are not allowed to access camera and mic.\";\r\n  } else if (error.indexOf(\"TypeError\") != -1) {\r\n    errorMessage = \"Video/Audio is required.\";\r\n  } else if (error.indexOf(\"UnsecureContext\") != -1) {\r\n    errorMessage =\r\n      \"Fatal Error: Browser cannot access camera and mic because of unsecure context. Please install SSL and access via https\";\r\n  } else if (error.indexOf(\"WebSocketNotSupported\") != -1) {\r\n    errorMessage = \"Fatal Error: WebSocket not supported in this browser\";\r\n  } else if (error.indexOf(\"no_stream_exist\") != -1) {\r\n    //TODO: removeRemoteVideo(error.streamId);\r\n  } else if (error.indexOf(\"data_channel_error\") != -1) {\r\n    errorMessage = \"There was a error during data channel communication\";\r\n  } else if (error.indexOf(\"ScreenSharePermissionDenied\") != -1) {\r\n    errorMessage = \"You are not allowed to access screen share\";\r\n  }\r\n  console.log(errorMessage);\r\n}\r\n\r\nfunction reInit(config) {\r\n  var callback = window.webRTCAdaptor.callback;\r\n  var callbackError = window.webRTCAdaptor.callbackError;\r\n  window.webRTCAdaptor.stop(publishStreamId);\r\n  window.webRTCAdaptor.closePeerConnection(publishStreamId);\r\n  window.webRTCAdaptor.closeWebSocket();\r\n  window.webRTCAdaptor = new WebRTCAdaptor({\r\n    isConnectionRefreshEnabled: true,\r\n    mediaConstraints: { video: true, audio: true },\r\n    localVideoId: \"#localVideo\",\r\n    ioPath: \"https://saveme.ai/\",\r\n    callback: callback,\r\n    callbackError: callbackError,\r\n  });\r\n}\r\n\r\nclass WebRTCAdaptor {\r\n  constructor(initialValues) {\r\n    this.peerconnection_config = {\r\n      iceServers: [\r\n        {\r\n          urls: [\r\n            \"stun:stun.prematix.tech:3478\",\r\n            \"stun:stun1.l.google.com:19302\",\r\n            \"stun:stun4.l.google.com:19302\",\r\n            \"stun:stun3.l.google.com:19302\",\r\n            \"stun:stun2.l.google.com:19302\",\r\n            \"stun:stun1.l.google.com:19302\",\r\n            \"stun:stun.l.google.com:19302\",\r\n          ],\r\n        },\r\n        {\r\n          username: \"prematix\",\r\n          credential: \"Pr3m@t1x_123\",\r\n          urls: [\"turn:turn.prematix.tech:3478\"],\r\n        },\r\n      ],\r\n      sdpSemantics: \"unified-plan\",\r\n    };\r\n    this.websocket_url = \"wss://saveme.ai/ws\";\r\n    this.mediaConstraints = {\r\n      video: true,\r\n      audio: true,\r\n    };\r\n    this.sdp_constraints = {\r\n      OfferToReceiveAudio: false,\r\n      OfferToReceiveVideo: false,\r\n    };\r\n    this.screenShareStream = null;\r\n    this.icon = null;\r\n    this.localVideoId = \"localVideo\";\r\n    this.autoJoin = false;\r\n    this.isConnectionRefreshEnabled = false;\r\n    this.isScreenShare = false;\r\n    this.isScreenShareAndCamera = false;\r\n    this.remotePeerConnection = new Array();\r\n    this.remotePeerConnectionStats = new Array();\r\n    this.remoteDescriptionSet = new Array();\r\n    this.iceCandidateList = new Array();\r\n    this.roomName = null;\r\n    this.videoTrackSender = null;\r\n    this.audioTrackSender = null;\r\n    this.playStreamId = new Array();\r\n    this.isMicOn = false;\r\n    this.isCameraOn = false;\r\n    this.currentVolume = null;\r\n    this.multiStream = new MediaStream();\r\n\r\n    //A dummy stream created to replace the tracks when camera is turned off.\r\n    this.dummyCanvas = document.createElement(\"canvas\");\r\n\r\n    this.originalAudioTrackGainNode = null;\r\n    this.videoTrack = null;\r\n    this.audioTrack = null;\r\n    this.smallVideoTrack = null;\r\n    this.audioContext = null;\r\n    this.MediaStreamList = new Array();\r\n    this.soundOriginGainNode = null;\r\n    this.secondStreamGainNode = null;\r\n    this.localStream = null;\r\n    this.bandwidth = 50; //default bandwidth kbps\r\n    this.isMultiPeer = false; //used for multiple peer client\r\n    this.multiPeerStreamId = null; //used for multiple peer client\r\n    this.isWebSocketTriggered = false;\r\n    this.webSocketAdaptor = null;\r\n    this.isPlayMode = false;\r\n    this.debug = false;\r\n    this.viewerInfo = \"\";\r\n    this.onlyDataChannel = false;\r\n    this.recorder = null;\r\n    this.isRecordingEnabled = false;\r\n    this.xindex = 0;\r\n    this.yindex = 0;\r\n    this.micMute = false;\r\n    this.localStreamId = null;\r\n    this.userName = null;\r\n    this.micDetails = {};\r\n    this.participantsList = [];\r\n    this.userList = [];\r\n    this.speakerHighlighter = false;\r\n    this.backgroundChangeVar = false;\r\n    this.handRaise = false;\r\n    this.blackFrameTimer = null;\r\n    this.socketId = null;\r\n    this.idMapping = new Array();\r\n\r\n    this.tempStream = null;\r\n\r\n    this.publishMode = \"camera\"; //screen, screen+camera\r\n\r\n    /**\r\n     * Supported candidate types. Below types are for both sending and receiving candidates.\r\n     * It means if when client receives candidate from STUN server, it sends to the server if candidate's protocol\r\n     * is in the list. Likely, when client receives remote candidate from server, it adds as ice candidate\r\n     * if candidate protocol is in the list below.\r\n     */\r\n    this.candidateTypes = [\"udp\", \"tcp\"];\r\n\r\n    this.desktopStream = null;\r\n\r\n    /**\r\n     * The cam_location below is effective when camera and screen is send at the same time.\r\n     * possible values are top and bottom. It's on right all the time\r\n     */\r\n    this.camera_location = \"top\";\r\n\r\n    /**\r\n     * The cam_margin below is effective when camera and screen is send at the same time.\r\n     * This is the margin value in px from the edges\r\n     */\r\n    this.camera_margin = 15;\r\n\r\n    /**\r\n     * this camera_percent is how large the camera view appear on the screen. It's %15 by default.\r\n     */\r\n    this.camera_percent = 15;\r\n\r\n    for (var key in initialValues) {\r\n      if (initialValues.hasOwnProperty(key)) {\r\n        this[key] = initialValues[key];\r\n      }\r\n    }\r\n\r\n    this.localVideo = document.querySelector(this.localVideoId);\r\n    this.remoteVideo = document.querySelector(this.remoteVideoId);\r\n\r\n    // It should be compatible with previous version\r\n    if (this.mediaConstraints.video == \"camera\") {\r\n      this.publishMode = \"camera\";\r\n    } else if (this.mediaConstraints.video == \"screen\") {\r\n      this.publishMode = \"screen\";\r\n    } else if (this.mediaConstraints.video == \"screen+camera\") {\r\n      this.publishMode = \"screen+camera\";\r\n    }\r\n\r\n    //Check browser support for screen share function\r\n    this.checkBrowserScreenShareSupported();\r\n\r\n    if (\r\n      !this.isPlayMode &&\r\n      !this.onlyDataChannel &&\r\n      typeof this.mediaConstraints != \"undefined\" &&\r\n      this.localStream == null\r\n    ) {\r\n      this.checkWebRTCPermissions();\r\n\r\n      // Get devices only in publish mode.\r\n      this.getDevices();\r\n      this.trackDeviceChange();\r\n\r\n      if (\r\n        typeof this.mediaConstraints.video != \"undefined\" &&\r\n        this.mediaConstraints.video != false\r\n      ) {\r\n        this.openStream(this.mediaConstraints, this.mode);\r\n        this.isMicOn = this.mediaConstraints.audio;\r\n        this.isCameraOn = this.mediaConstraints.video;\r\n      } else {\r\n        // get only audio\r\n        this.isMicOn = this.mediaConstraints.audio;\r\n        var media_audio_constraint = { audio: this.mediaConstraints.audio };\r\n        this.navigatorUserMedia(\r\n          media_audio_constraint,\r\n          (stream) => {\r\n            this.gotStream(stream);\r\n          },\r\n          true\r\n        );\r\n      }\r\n    } else {\r\n      //just playing, it does not open any stream\r\n      this.checkWebSocketConnection();\r\n    }\r\n\r\n    // Triggering the SocketIo for the IO triger point\r\n    if (this.ioPath) {\r\n      this.s = io.connect(this.ioPath);\r\n      this.s.emit(\"join-room\", {\r\n        roomId: this.roomName,\r\n        dbName: this.secToken,\r\n      });\r\n      // this.s.on(\"syncUser\", (eventData) => {\r\n      //   this.manageUserList(eventData);\r\n      // });\r\n      this.s.onAny((eventName, data) => {\r\n        if (eventName == \"ledger\") {\r\n          this.socketId = data.socketId;\r\n        }\r\n        this.callback(eventName, data);\r\n      });\r\n    } else {\r\n      this.callbackError(\"error connecting io adaptor\");\r\n    }\r\n    this.backgroundModel();\r\n  }\r\n  setDesktopwithCameraSource(stream, streamId, audioStream, onEndedCallback) {\r\n    this.desktopStream = stream;\r\n    this.navigatorUserMedia({ video: true, audio: false }, cameraStream => {\r\n      this.smallVideoTrack = cameraStream.getVideoTracks()[0];\r\n\r\n      //create a canvas element\r\n      var canvas = document.createElement(\"canvas\");\r\n      var canvasContext = canvas.getContext(\"2d\");\r\n\r\n      //create video element for screen\r\n      //var screenVideo = document.getElementById('sourceVideo');\r\n      var screenVideo = document.createElement('video');\r\n\r\n      screenVideo.srcObject = stream;\r\n      screenVideo.play();\r\n      //create video element for camera\r\n      var cameraVideo = document.createElement('video');\r\n\r\n      cameraVideo.srcObject = cameraStream;\r\n      cameraVideo.play();\r\n      var canvasStream = canvas.captureStream(15);\r\n\r\n      if (this.localStream == null) {\r\n        this.gotStream(canvasStream);\r\n      }\r\n      else {\r\n        this.updateVideoTrack(canvasStream, streamId, this.mediaConstraints, onended, null);\r\n      }\r\n      if (onEndedCallback != null) {\r\n        stream.getVideoTracks()[0].onended = function (event) {\r\n          onEndedCallback(event);\r\n        }\r\n      }\r\n\r\n      //update the canvas\r\n      setInterval(() => {\r\n        //draw screen to canvas\r\n        canvas.width = screenVideo.videoWidth;\r\n        canvas.height = screenVideo.videoHeight;\r\n        canvasContext.drawImage(screenVideo, 0, 0, canvas.width, canvas.height);\r\n\r\n        var cameraWidth = screenVideo.videoWidth * (this.camera_percent / 100);\r\n        var cameraHeight = (cameraVideo.videoHeight / cameraVideo.videoWidth) * cameraWidth\r\n\r\n        var positionX = (canvas.width - cameraWidth) - this.camera_margin;\r\n        var positionY;\r\n\r\n        if (this.camera_location == \"top\") {\r\n          positionY = this.camera_margin;\r\n        }\r\n        else { //if not top, make it bottom\r\n          //draw camera on right bottom corner\r\n          positionY = (canvas.height - cameraHeight) - this.camera_margin;\r\n        }\r\n        canvasContext.drawImage(cameraVideo, positionX, positionY, cameraWidth, cameraHeight);\r\n      }, 66);\r\n    }, true)\r\n  }\r\n\r\n  trackDeviceChange() {\r\n    navigator.mediaDevices.ondevicechange = () => {\r\n      this.getDevices();\r\n    };\r\n  }\r\n  getDevices() {\r\n    navigator.mediaDevices\r\n      .enumerateDevices()\r\n      .then((devices) => {\r\n        let deviceArray = new Array();\r\n        let checkAudio = false;\r\n        devices.forEach((device) => {\r\n          if (device.kind == \"audioinput\" || device.kind == \"videoinput\") {\r\n            deviceArray.push(device);\r\n            if (device.kind == \"audioinput\") {\r\n              checkAudio = true;\r\n            }\r\n          }\r\n        });\r\n        this.callback(\"available_devices\", deviceArray);\r\n        if (checkAudio == false && this.localStream == null) {\r\n          console.log(\"Audio input not found\");\r\n          console.log(\"Retrying to get user media without audio\");\r\n          this.openStream({ video: true, audio: false }, this.mode);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.error(\r\n          \"Cannot get devices -> error name: \" + err.name + \": \" + err.message\r\n        );\r\n      });\r\n  }\r\n\r\n  prepareStreamTracks(mediaConstraints, audioConstraint, stream, streamId) {\r\n    //this trick, getting audio and video separately, make us add or remove tracks on the fly\r\n    var audioTrack = stream.getAudioTracks()\r\n    if (audioTrack.length > 0 && this.publishMode == \"camera\") {\r\n      audioTrack[0].stop();\r\n      stream.removeTrack(audioTrack[0]);\r\n    }\r\n    //now get only audio to add this stream\r\n    if (audioConstraint != \"undefined\" && audioConstraint != false) {\r\n      var media_audio_constraint = { audio: audioConstraint };\r\n      this.navigatorUserMedia(media_audio_constraint, audioStream => {\r\n\r\n        audioStream = this.setGainNodeStream(audioStream);\r\n        if (this.originalAudioTrackGainNode !== null) {\r\n          this.originalAudioTrackGainNode.stop();\r\n        }\r\n        this.originalAudioTrackGainNode = audioStream.getAudioTracks()[1];\r\n\r\n        //add callback if desktop is sharing\r\n        var onended = event => {\r\n          this.callback(\"screen_share_stopped\");\r\n          this.setVideoCameraSource(streamId, mediaConstraints, null, true);\r\n        }\r\n\r\n        if (this.publishMode == \"screen\") {\r\n          this.updateVideoTrack(stream, streamId, mediaConstraints, onended, true);\r\n          if (audioTrack.length > 0) {\r\n            var mixedStream = this.mixAudioStreams(stream, audioStream, streamId);\r\n            this.updateAudioTrack(mixedStream, streamId, null);\r\n          }\r\n          else {\r\n            this.updateAudioTrack(audioStream, streamId, null);\r\n          }\r\n        }\r\n        else if (this.publishMode == \"screen+camera\") {\r\n          if (audioTrack.length > 0) {\r\n            var mixedStream = this.mixAudioStreams(stream, audioStream, streamId);\r\n            this.updateAudioTrack(mixedStream, streamId, null);\r\n            this.setDesktopwithCameraSource(stream, streamId, mixedStream, onended);\r\n          }\r\n          else {\r\n            this.updateAudioTrack(audioStream, streamId, null);\r\n            this.setDesktopwithCameraSource(stream, streamId, audioStream, onended);\r\n          }\r\n        }\r\n        else {\r\n          if (audioConstraint != false && audioConstraint != undefined) {\r\n            stream.addTrack(audioStream.getAudioTracks()[0]);\r\n          }\r\n          this.gotStream(stream);\r\n        }\r\n        this.checkWebSocketConnection();\r\n      }, true)\r\n    }\r\n    else {\r\n      if (typeof audioStream != \"undefined\" && audioStream.getAudioTracks()[0] != null) {\r\n        stream.addTrack(audioStream.getAudioTracks()[0]);\r\n      }\r\n      this.gotStream(stream);\r\n    }\r\n  }\r\n\r\n  navigatorUserMedia(mediaConstraints, func, catch_error) {\r\n    if (catch_error == true) {\r\n      navigator.mediaDevices\r\n        .getUserMedia(mediaConstraints)\r\n        .then(func)\r\n        .catch((error) => {\r\n          if (error.name == \"NotFoundError\") {\r\n            this.getDevices();\r\n          } else {\r\n            this.callbackError(error.name, error.message);\r\n          }\r\n        });\r\n    } else {\r\n      navigator.mediaDevices.getUserMedia(mediaConstraints).then(func);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Get user media\r\n   */\r\n  getUserMedia(mediaConstraints, audioConstraint, streamId) {\r\n    const resetTrack = (stream) => {\r\n      let videoTracks = stream.getVideoTracks();\r\n      let audioTracks = stream.getAudioTracks();\r\n\r\n      if (videoTracks.length > 0) {\r\n        if (this.videoTrack !== null)\r\n          this.videoTrack.stop();\r\n        this.videoTrack = videoTracks[0];\r\n      }\r\n\r\n      if (audioTracks.length > 0) {\r\n        if (this.audioTrack !== null)\r\n          this.audioTrack.stop();\r\n        this.audioTrack = audioTracks[0];\r\n      }\r\n\r\n      if (this.smallVideoTrack)\r\n        this.smallVideoTrack.stop();\r\n      return stream;\r\n    }\r\n\r\n    // Check Media Constraint video value screen or screen + camera\r\n    if (this.publishMode == \"screen+camera\" || this.publishMode == \"screen\") {\r\n      navigator.mediaDevices.getDisplayMedia(mediaConstraints)\r\n        .then(stream => {\r\n          resetTrack(stream);\r\n          this.prepareStreamTracks(mediaConstraints, audioConstraint, stream, streamId);\r\n\r\n        })\r\n        .catch(error => {\r\n          if (error.name === \"NotAllowedError\") {\r\n            console.debug(\"Permission denied error\");\r\n            this.callbackError(\"ScreenSharePermissionDenied\");\r\n\r\n            // Redirect Default Stream Camera\r\n            if (this.localStream == null) {\r\n\r\n              var mediaConstraints = {\r\n                video: true,\r\n                audio: true\r\n              };\r\n\r\n              this.openStream(mediaConstraints);\r\n            }\r\n            else {\r\n              this.switchVideoCameraCapture(streamId);\r\n            }\r\n\r\n          }\r\n        });\r\n    }\r\n    // If mediaConstraints only user camera\r\n    else {\r\n      this.navigatorUserMedia(mediaConstraints, (stream => {\r\n        resetTrack(stream);\r\n        this.prepareStreamTracks(mediaConstraints, audioConstraint, stream, streamId);\r\n      }), true);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Open media stream, it may be screen, camera or audio\r\n   */\r\n  openStream(mediaConstraints) {\r\n    this.mediaConstraints = mediaConstraints;\r\n    var audioConstraint = false;\r\n    if (\r\n      typeof mediaConstraints.audio != \"undefined\" &&\r\n      mediaConstraints.audio != false\r\n    ) {\r\n      audioConstraint = mediaConstraints.audio;\r\n    }\r\n\r\n    if (typeof mediaConstraints.video != \"undefined\") {\r\n      this.getUserMedia(mediaConstraints, audioConstraint);\r\n    } else {\r\n      console.error(\"MediaConstraint video is not defined\");\r\n      this.callbackError(\"media_constraint_video_not_defined\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Closes stream, if you want to stop peer connection, call stop(streamId)\r\n   */\r\n  closeStream() {\r\n    this.localStream.getVideoTracks().forEach(function (track) {\r\n      track.onended = null;\r\n      track.stop();\r\n    });\r\n\r\n    this.localStream.getAudioTracks().forEach(function (track) {\r\n      track.onended = null;\r\n      track.stop();\r\n    });\r\n    if (this.videoTrack !== null) {\r\n      this.videoTrack.stop();\r\n    }\r\n\r\n    if (this.audioTrack !== null) {\r\n      this.audioTrack.stop();\r\n    }\r\n\r\n    if (this.smallVideoTrack !== null) {\r\n      this.smallVideoTrack.stop();\r\n    }\r\n    if (this.originalAudioTrackGainNode) {\r\n      this.originalAudioTrackGainNode.stop();\r\n    }\r\n  }\r\n  /*\r\n   * Checks if we is permitted from browser\r\n   */\r\n  checkWebRTCPermissions() {\r\n    if (!(\"WebSocket\" in window)) {\r\n      console.log(\"WebSocket not supported.\");\r\n      this.callbackError(\"WebSocketNotSupported\");\r\n      return;\r\n    }\r\n\r\n    if (typeof navigator.mediaDevices == \"undefined\" && this.isPlayMode == false) {\r\n      console.log(\"Cannot open camera and mic because of unsecure context. Please Install SSL(https)\");\r\n      this.callbackError(\"UnsecureContext\");\r\n      return;\r\n    }\r\n    if (typeof navigator.mediaDevices == \"undefined\" || navigator.mediaDevices == undefined || navigator.mediaDevices == null) {\r\n      this.callbackError(\"getUserMediaIsNotAllowed\");\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks browser supports screen share feature\r\n   * if exist it calls callback with \"browser_screen_share_supported\"\r\n   */\r\n\r\n  checkBrowserScreenShareSupported() {\r\n    if ((typeof navigator.mediaDevices != \"undefined\" && navigator.mediaDevices.getDisplayMedia) || navigator.getDisplayMedia) {\r\n      this.callback(\"browser_screen_share_supported\");\r\n    }\r\n  };\r\n\r\n  enableSecondStreamInMixedAudio(enable) {\r\n    if (this.secondStreamGainNode != null) {\r\n      if (enable) {\r\n        this.secondStreamGainNode.gain.value = 1;\r\n      } else {\r\n        this.secondStreamGainNode.gain.value = 0;\r\n      }\r\n    }\r\n  }\r\n\r\n  publish(\r\n    streamId,\r\n    token,\r\n    subscriberId,\r\n    subscriberCode,\r\n    streamName,\r\n    mainTrack\r\n  ) {\r\n    this.publishStreamId = streamId;\r\n\r\n    if (this.onlyDataChannel) {\r\n      var jsCmd = {\r\n        command: \"publish\",\r\n        streamId: streamId,\r\n        streamName: JSON.stringify({\r\n          username: streamName,\r\n          socketId: this.socketId,\r\n        }),\r\n        token: token,\r\n        subscriberId: typeof subscriberId !== undefined ? subscriberId : \"\",\r\n        subscriberCode:\r\n          typeof subscriberCode !== undefined ? subscriberCode : \"\",\r\n\r\n        mainTrack: typeof mainTrack !== undefined ? mainTrack : \"\",\r\n        video: false,\r\n        audio: false,\r\n      };\r\n    }\r\n    //If it started with playOnly mode and wants to publish now\r\n    else if (this.localStream == null) {\r\n      this.navigatorUserMedia(\r\n        this.mediaConstraints,\r\n        (stream) => {\r\n          this.gotStream(stream);\r\n          var jsCmd = {\r\n            command: \"publish\",\r\n            streamId: streamId,\r\n            streamName: JSON.stringify({\r\n              username: streamName,\r\n              socketId: this.socketId,\r\n            }),\r\n            token: token,\r\n            subscriberId: typeof subscriberId !== undefined ? subscriberId : \"\",\r\n            subscriberCode:\r\n              typeof subscriberCode !== undefined ? subscriberCode : \"\",\r\n\r\n            mainTrack: typeof mainTrack !== undefined ? mainTrack : \"\",\r\n            video: this.localStream.getVideoTracks().length > 0 ? true : false,\r\n            audio: this.localStream.getAudioTracks().length > 0 ? true : false,\r\n          };\r\n\r\n          this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n        },\r\n        false\r\n      );\r\n    } else {\r\n      var jsCmd = {\r\n        command: \"publish\",\r\n        streamId: streamId,\r\n        streamName: JSON.stringify({\r\n          username: streamName,\r\n          socketId: this.socketId,\r\n        }),\r\n        token: token,\r\n        subscriberId: typeof subscriberId !== undefined ? subscriberId : \"\",\r\n        subscriberCode:\r\n          typeof subscriberCode !== undefined ? subscriberCode : \"\",\r\n        mainTrack: typeof mainTrack !== undefined ? mainTrack : \"\",\r\n        video: this.localStream.getVideoTracks().length > 0 ? true : false,\r\n        audio: this.localStream.getAudioTracks().length > 0 ? true : false,\r\n      };\r\n      console.log(\"jscmd3\", jsCmd);\r\n    }\r\n\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  joinRoom(roomName, streamId, mode) {\r\n    this.roomName = roomName;\r\n\r\n    var jsCmd = {\r\n      command: \"joinRoom\",\r\n      room: roomName,\r\n      streamId: streamId,\r\n      mode: \"multitrack\",\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  play(streamId, token, roomId, enableTracks, subscriberId, subscriberCode) {\r\n    if (streamId == this.roomName || streamId == this.publishStreamId) {\r\n      this.playStreamId.push(streamId);\r\n      var jsCmd = {\r\n        command: \"play\",\r\n        streamId: streamId,\r\n        token: token,\r\n        room: roomId,\r\n        trackList: enableTracks,\r\n        subscriberId: typeof subscriberId !== undefined ? subscriberId : \"\",\r\n        subscriberCode: typeof subscriberCode !== undefined ? subscriberCode : \"\",\r\n        viewerInfo: this.viewerInfo,\r\n      };\r\n\r\n      this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n    } else {\r\n      console.warn(\"Mode:MultiTrack, Unwanted Peer Connections are Ommitted\");\r\n    }\r\n  }\r\n\r\n  stop(streamId) {\r\n    // this.s.emit(\"closePeer\", { \"data\": this.MediaStreamList[index] });\r\n    this.closePeerConnection(streamId);\r\n    var jsCmd = {\r\n      command: \"stop\",\r\n      streamId: streamId,\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  join(streamId) {\r\n    var jsCmd = {\r\n      command: \"join\",\r\n      streamId: streamId,\r\n      multiPeer: this.isMultiPeer && this.multiPeerStreamId == null,\r\n      mode: this.isPlayMode ? \"play\" : \"both\",\r\n    };\r\n\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  leaveFromRoom(roomName) {\r\n    this.roomName = roomName;\r\n    var jsCmd = {\r\n      command: \"leaveFromRoom\",\r\n      room: roomName,\r\n    };\r\n    console.log(\"leave request is sent for \" + roomName);\r\n\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  leave(streamId) {\r\n    var jsCmd = {\r\n      command: \"leave\",\r\n      streamId:\r\n        this.isMultiPeer && this.multiPeerStreamId != null\r\n          ? this.multiPeerStreamId\r\n          : streamId,\r\n    };\r\n\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n    this.closePeerConnection(streamId);\r\n    this.multiPeerStreamId = null;\r\n  }\r\n\r\n  getStreamInfo(streamId) {\r\n    var jsCmd = {\r\n      command: \"getStreamInfo\",\r\n      streamId: streamId,\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  getRoomInfo(roomName, streamId) {\r\n    var jsCmd = {\r\n      command: \"getRoomInfo\",\r\n      streamId: streamId,\r\n      room: roomName,\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  enableTrack(mainTrackId, trackId, enabled) {\r\n    var jsCmd = {\r\n      command: \"enableTrack\",\r\n      streamId: mainTrackId,\r\n      trackId: trackId,\r\n      enabled: enabled,\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  getTracks(streamId, token) {\r\n    this.playStreamId.push(streamId);\r\n    var jsCmd = {\r\n      command: \"getTrackList\",\r\n      streamId: streamId,\r\n      token: token,\r\n    };\r\n\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  gotStream(stream) {\r\n    stream = this.setGainNodeStream(stream);\r\n\r\n    this.localStream = stream;\r\n    this.localVideo.srcObject = stream;\r\n\r\n    this.checkWebSocketConnection();\r\n    this.getDevices();\r\n  }\r\n\r\n  /**\r\n  * Toggle video track on the server side.\r\n  *\r\n  * streamId is the id of the stream\r\n  * trackId is the id of the track. streamId is also one of the trackId of the stream. If you are having just a single track on your \r\n  *         stream, you need to give streamId as trackId parameter as well.  \r\n  * enabled is the enable/disable video track. If it's true, server sends video track. If it's false, server does not send video\r\n\t\r\n  */\r\n  toggleVideo(streamId, trackId, enabled) {\r\n    var jsCmd = {\r\n      command: \"toggleVideo\",\r\n      streamId: streamId,\r\n      trackId: trackId,\r\n      enabled: enabled,\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  /**\r\n   * Toggle audio track on the server side.\r\n   *\r\n   * streamId is the id of the stream\r\n   * trackId is the id of the track. streamId is also one of the trackId of the stream. If you are having just a single track on your\r\n   *         stream, you need to give streamId as trackId parameter as well.\r\n   * enabled is the enable/disable video track. If it's true, server sends audio track. If it's false, server does not send audio\r\n   *\r\n   */\r\n  toggleAudio(streamId, trackId, enabled) {\r\n    var jsCmd = {\r\n      command: \"toggleAudio\",\r\n      streamId: streamId,\r\n      trackId: trackId,\r\n      enabled: enabled,\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  async switchDesktopCapture(streamId) {\r\n    if (this.backgroundChangeVar) {\r\n      await this.removeBackground();\r\n      this.backgroundChangeVar = true; // manually applying the condition to say background is already applied\r\n    }\r\n\r\n    this.publishMode = \"screen\";\r\n\r\n    var audioConstraint = false;\r\n    if (\r\n      typeof this.mediaConstraints.audio != \"undefined\" &&\r\n      this.mediaConstraints.audio != false\r\n    ) {\r\n      audioConstraint = this.mediaConstraints.audio;\r\n    }\r\n\r\n    this.getUserMedia(this.mediaConstraints, audioConstraint, streamId);\r\n  }\r\n  /*\r\n   * This method mixed the first stream audio to the second stream audio and\r\n   * returns mixed stream.\r\n   * stream: Initiali stream that contain video and audio\r\n   *\r\n   */\r\n  mixAudioStreams(stream, secondStream, streamId) {\r\n    //console.debug(\"audio stream track count: \" + audioStream.getAudioTracks().length);\r\n    var composedStream = new MediaStream();\r\n    //added the video stream from the screen\r\n    stream.getVideoTracks().forEach(function (videoTrack) {\r\n      composedStream.addTrack(videoTrack);\r\n    });\r\n\r\n    this.audioContext = new AudioContext();\r\n    var audioDestionation = this.audioContext.createMediaStreamDestination();\r\n\r\n    if (stream.getAudioTracks().length > 0) {\r\n      this.soundOriginGainNode = this.audioContext.createGain();\r\n\r\n      //Adjust the gain for screen sound\r\n      this.soundOriginGainNode.gain.value = 1;\r\n      var audioSource = this.audioContext.createMediaStreamSource(stream);\r\n\r\n      audioSource.connect(this.soundOriginGainNode).connect(audioDestionation);\r\n    }\r\n    else {\r\n      console.debug(\"Origin stream does not have audio track\")\r\n    }\r\n\r\n    if (secondStream.getAudioTracks().length > 0) {\r\n      this.secondStreamGainNode = this.audioContext.createGain();\r\n\r\n      //Adjust the gain for second sound\r\n      this.secondStreamGainNode.gain.value = 1;\r\n\r\n      var audioSource2 = this.audioContext.createMediaStreamSource(secondStream);\r\n      audioSource2.connect(this.secondStreamGainNode).connect(audioDestionation);\r\n    }\r\n    else {\r\n      console.debug(\"Second stream does not have audio track\")\r\n    }\r\n\r\n    audioDestionation.stream.getAudioTracks().forEach(function (track) {\r\n      composedStream.addTrack(track);\r\n      console.log(\"audio destination add track\");\r\n    });\r\n\r\n    return composedStream;\r\n  }\r\n\r\n  setGainNodeStream(stream) {\r\n\r\n    // Get the videoTracks from the stream.\r\n    const videoTracks = stream.getVideoTracks();\r\n\r\n    // Get the audioTracks from the stream.\r\n    const audioTracks = stream.getAudioTracks();\r\n\r\n    /**\r\n      * Create a new audio context and build a stream source,\r\n      * stream destination and a gain node. Pass the stream into \r\n      * the mediaStreamSource so we can use it in the Web Audio API.\r\n      */\r\n    this.audioContext = new AudioContext();\r\n    let mediaStreamSource = this.audioContext.createMediaStreamSource(stream);\r\n    let mediaStreamDestination = this.audioContext.createMediaStreamDestination();\r\n    this.soundOriginGainNode = this.audioContext.createGain();\r\n\r\n    /**\r\n      * Connect the stream to the gainNode so that all audio\r\n      * passes through the gain and can be controlled by it.\r\n      * Then pass the stream from the gain to the mediaStreamDestination\r\n      * which can pass it back to the RTC client.\r\n      */\r\n    mediaStreamSource.connect(this.soundOriginGainNode);\r\n    this.soundOriginGainNode.connect(mediaStreamDestination);\r\n\r\n    if (this.currentVolume == null) {\r\n      this.soundOriginGainNode.gain.value = 1;\r\n    }\r\n    else {\r\n      this.soundOriginGainNode.gain.value = this.currentVolume;\r\n    }\r\n\r\n    /**\r\n      * The mediaStreamDestination.stream outputs a MediaStream object\r\n      * containing a single AudioMediaStreamTrack. Add the video track\r\n      * to the new stream to rejoin the video with the controlled audio.\r\n      */\r\n    const controlledStream = mediaStreamDestination.stream;\r\n\r\n    for (const videoTrack of videoTracks) {\r\n      controlledStream.addTrack(videoTrack);\r\n    }\r\n    for (const audioTrack of audioTracks) {\r\n      controlledStream.addTrack(audioTrack);\r\n    }\r\n\r\n    /**\r\n      * Use the stream that went through the gainNode. This\r\n      * is the same stream but with altered input volume levels.\r\n      */\r\n    return controlledStream;\r\n  }\r\n\r\n  switchAudioInputSource(streamId, deviceId) {\r\n    //stop the track because in some android devices need to close the current camera stream\r\n    var audioTrack = this.localStream.getAudioTracks()[0];\r\n    if (audioTrack) {\r\n      audioTrack.stop();\r\n    }\r\n    else {\r\n      console.warn(\"There is no audio track in local stream\");\r\n    }\r\n\r\n    if (typeof deviceId != \"undefined\") {\r\n      if (this.mediaConstraints.audio !== true)\r\n        this.mediaConstraints.audio.deviceId = deviceId;\r\n      else\r\n        this.mediaConstraints.audio = { \"deviceId\": deviceId };\r\n    }\r\n    this.setAudioInputSource(streamId, this.mediaConstraints, null, true, deviceId);\r\n  }\r\n\r\n  switchVideoCameraCapture(streamId, deviceId) {\r\n    //stop the track because in some android devices need to close the current camera stream\r\n    var videoTrack = this.localStream.getVideoTracks()[0];\r\n    if (videoTrack) {\r\n      videoTrack.stop();\r\n    }\r\n    else {\r\n      console.warn(\"There is no video track in local stream\");\r\n    }\r\n\r\n    this.publishMode = \"camera\";\r\n\r\n\r\n    if (typeof deviceId != \"undefined\") {\r\n      if (this.mediaConstraints.video !== true)\r\n        this.mediaConstraints.video.deviceId = { exact: deviceId };\r\n      else\r\n        this.mediaConstraints.video = { deviceId: { exact: deviceId } };\r\n    }\r\n    this.setVideoCameraSource(streamId, this.mediaConstraints, null, true, deviceId);\r\n  }\r\n\r\n  switchDesktopCaptureWithCamera(streamId) {\r\n    this.publishMode = \"screen+camera\";\r\n\r\n    var audioConstraint = false;\r\n    if (typeof this.mediaConstraints.audio != \"undefined\" && this.mediaConstraints.audio != false) {\r\n      audioConstraint = this.mediaConstraints.audio;\r\n    }\r\n    this.getUserMedia(this.mediaConstraints, audioConstraint, streamId);\r\n  }\r\n\r\n  /**\r\n   * This method updates the local stream. It removes existant audio track from the local stream\r\n   * and add the audio track in `stream` parameter to the local stream\r\n   */\r\n  updateLocalAudioStream(stream, onEndedCallback) {\r\n    var newAudioTrack = stream.getAudioTracks()[0];\r\n\r\n    if (this.localStream != null && this.localStream.getAudioTracks()[0] != null) {\r\n      var audioTrack = this.localStream.getAudioTracks()[0];\r\n      this.localStream.removeTrack(audioTrack);\r\n      audioTrack.stop();\r\n      this.localStream.addTrack(newAudioTrack);\r\n    }\r\n    else if (this.localStream != null) {\r\n      this.localStream.addTrack(newAudioTrack);\r\n    }\r\n    else {\r\n      this.localStream = stream;\r\n    }\r\n\r\n\r\n    if (this.localVideo != null) {   //it can be null\r\n      this.localVideo.srcObject = this.localStream;\r\n    }\r\n\r\n    if (onEndedCallback != null) {\r\n      stream.getAudioTracks()[0].onended = function (event) {\r\n        onEndedCallback(event);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method updates the local stream. It removes existant video track from the local stream\r\n   * and add the video track in `stream` parameter to the local stream\r\n   */\r\n  updateLocalVideoStream(stream, onEndedCallback, stopDesktop) {\r\n    if (stopDesktop && this.desktopStream != null) {\r\n      this.desktopStream.getVideoTracks()[0].stop();\r\n    }\r\n\r\n    var newVideoTrack = stream.getVideoTracks()[0];\r\n\r\n    if (this.localStream != null && this.localStream.getVideoTracks()[0] != null) {\r\n      var videoTrack = this.localStream.getVideoTracks()[0];\r\n      // if (!)\r\n      this.localStream.removeTrack(videoTrack);\r\n      videoTrack.stop();\r\n      this.localStream.addTrack(newVideoTrack);\r\n    }\r\n    else if (this.localStream != null) {\r\n      this.localStream.addTrack(newVideoTrack);\r\n    }\r\n    else {\r\n      this.localStream = stream;\r\n    }\r\n\r\n    if (this.localVideo) {\r\n      this.localVideo.srcObject = this.localStream;\r\n    }\r\n\r\n    if (onEndedCallback != null) {\r\n      stream.getVideoTracks()[0].onended = function (event) {\r\n        onEndedCallback(event);\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * This method sets Audio Input Source.\r\n   * It calls updateAudioTrack function for the update local audio stream.\r\n   */\r\n  setAudioInputSource(streamId, mediaConstraints, onEndedCallback) {\r\n    this.navigatorUserMedia(mediaConstraints, stream => {\r\n      this.updateAudioTrack(stream, streamId, mediaConstraints, onEndedCallback);\r\n    }, true);\r\n  }\r\n\r\n  /**\r\n   * This method sets Video Input Source.\r\n   * It calls updateVideoTrack function for the update local video stream.\r\n   */\r\n  setVideoCameraSource(streamId, mediaConstraints, onEndedCallback, stopDesktop) {\r\n    this.navigatorUserMedia(mediaConstraints, stream => {\r\n      stream = this.setGainNodeStream(stream);\r\n      this.updateVideoTrack(stream, streamId, mediaConstraints, onEndedCallback, stopDesktop);\r\n      this.updateAudioTrack(stream, streamId, mediaConstraints, onEndedCallback);\r\n    }, true);\r\n  }\r\n\r\n  updateAudioTrack(stream, streamId, onEndedCallback) {\r\n    if (this.remotePeerConnection[streamId] != null) {\r\n      var audioTrackSender = this.remotePeerConnection[streamId].getSenders().find(function (s) {\r\n        return s.track.kind == \"audio\";\r\n      });\r\n\r\n      if (audioTrackSender) {\r\n        audioTrackSender.replaceTrack(stream.getAudioTracks()[0]).then(result => {\r\n          this.updateLocalAudioStream(stream, onEndedCallback);\r\n\r\n        }).catch(function (error) {\r\n          console.log(error.name);\r\n        });\r\n      }\r\n      else {\r\n        console.error(\"AudioTrackSender is undefined or null\");\r\n      }\r\n    }\r\n    else {\r\n      this.updateLocalAudioStream(stream, onEndedCallback);\r\n    }\r\n  }\r\n\r\n  updateVideoTrack(stream, streamId, mediaConstraints, onEndedCallback, stopDesktop) {\r\n    if (this.remotePeerConnection[streamId] != null) {\r\n      var videoTrackSender = this.remotePeerConnection[streamId].getSenders().find(function (s) {\r\n        return s.track.kind == \"video\";\r\n      });\r\n\r\n      if (videoTrackSender) {\r\n        videoTrackSender.replaceTrack(stream.getVideoTracks()[0]).then(result => {\r\n          this.updateLocalVideoStream(stream, onEndedCallback, stopDesktop);\r\n\r\n        }).catch(error => {\r\n          console.log(error.name);\r\n        });\r\n      }\r\n      else {\r\n        console.error(\"VideoTrackSender is undefined or null\");\r\n      }\r\n    }\r\n    else {\r\n      this.updateLocalVideoStream(stream, onEndedCallback, stopDesktop);\r\n    }\r\n  }\r\n\r\n  getIndex(track) {\r\n    let index = null;\r\n    if (track.kind == \"video\") {\r\n      index = track.id.replace(\"ARDAMSv\", \"\");\r\n    } else if (track.kind == \"audio\") {\r\n      index = track.id.replace(\"ARDAMSa\", \"\");;\r\n    }\r\n    return index;\r\n  }\r\n\r\n  async userTrack(index, track) {\r\n    let obj = {};\r\n    let u = await axios.get(`https://prematix.tech/WebRTCAppEE/rest/v2/broadcasts/${index}`);\r\n    let userDict = JSON.parse(u.data.name);\r\n    obj.stream = new MediaStream();\r\n    obj.streamId = index;\r\n    obj.userName = userDict.hasOwnProperty('username') ? userDict.username : null;\r\n    obj.socketId = userDict.hasOwnProperty('socketId') ? userDict.socketId : null;\r\n    obj.audioTrack = this.multiStream.getTrackById(\"ARDAMSa\" + index);\r\n    obj.videoTrack = this.multiStream.getTrackById(\"ARDAMSv\" + index);\r\n    if (obj.audioTrack) {\r\n      obj.stream.addTrack(obj.audioTrack)\r\n    }\r\n    if (obj.videoTrack) {\r\n      obj.stream.addTrack(obj.videoTrack)\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  async updateUserTrack(index, track) {\r\n    let stream = new MediaStream()\r\n    let audioTrack = this.multiStream.getTrackById(\"ARDAMSa\" + index);\r\n    let videoTrack = this.multiStream.getTrackById(\"ARDAMSv\" + index);\r\n    this.MediaStreamList[index].audioTrack = audioTrack;\r\n    this.MediaStreamList[index].videoTrack = videoTrack;\r\n    if (audioTrack) {\r\n      stream.addTrack(audioTrack)\r\n    }\r\n    if (videoTrack) {\r\n      stream.addTrack(videoTrack)\r\n    }\r\n    this.MediaStreamList[index].stream = stream;\r\n  }\r\n\r\n  async updateUserStreamDetails(index, track, cb) {\r\n    if (index != window.roomId && index != window.publishStreamId) {\r\n      this.multiStream.addTrack(track);\r\n      track.onmute = event => {\r\n        var remove = true;\r\n        var video = document.getElementById(\"remoteVideo\" + index);\r\n        video.srcObject.getTracks().forEach(function (item) {\r\n          if (!item.muted) {\r\n            console.log(\"muted\", item.muted)\r\n            remove = false;\r\n          }\r\n        });\r\n        if (remove) {\r\n          let data = this.MediaStreamList[index];\r\n          this.multiStream.removeTrack(this.multiStream.getTrackById(\"ARDAMSv\" + index));\r\n          this.multiStream.removeTrack(this.multiStream.getTrackById(\"ARDAMSa\" + index));\r\n          delete this.MediaStreamList[index];\r\n          this.callback(\"closePeer\", { data: data });\r\n        }\r\n      };\r\n      if (!this.MediaStreamList[index]) {\r\n        this.MediaStreamList[index] = await this.userTrack(index, track)\r\n        cb(index);\r\n      }\r\n    }\r\n  }\r\n\r\n  async onTrack(event, streamId) {\r\n    let index = this.getIndex(event.track);\r\n    await this.updateUserStreamDetails(index, event.track, async (streamId) => {\r\n      this.callback(\"newStreamAvailable\", {});\r\n      let checkStream = \"\"\r\n      checkStream = this.recorder?.streams?.find((s) => { return s.streamId == streamId });\r\n      if (this.recorder && !checkStream) {\r\n        await window.webRTCAdaptor.recorder.addStream(this.MediaStreamList[streamId].stream, { Xindex: this.xindex, Yindex: this.yindex, streamId: streamId });\r\n        if (this.xindex === 3) {\r\n          this.yindex++;\r\n          this.xindex = 0;\r\n        }\r\n        this.xindex++;\r\n        this.oldId = streamId;\r\n      }\r\n    })\r\n\r\n    if (this.remoteVideo != null) {\r\n      if (this.remoteVideo.srcObject !== event.streams[0]) {\r\n        this.remoteVideo.srcObject = event.streams[0];\r\n      }\r\n    } else {\r\n      if (this.micMute === true) {\r\n        for (let i in this.remotePeerConnection) {\r\n          var localStreamId = i;\r\n          break;\r\n        }\r\n        var data = {\r\n          streamId: localStreamId,\r\n          eventType: \"MIC_MUTED\",\r\n          dbName: this.secToken,\r\n        };\r\n        this.s.emit(\"micChange\", data);\r\n      }\r\n      if (this.isScreenShare === true || this.isScreenShareAndCamera === true) {\r\n        this.changeBandwidth(5000, window.publishStreamId);\r\n        this.s.emit(\"screensharing\", {\r\n          streamId: window.publishStreamId,\r\n          dbName: this.secToken,\r\n        });\r\n      }\r\n      if (this.isRecordingEnabled === true) {\r\n        var data = {\r\n          streamId: window.publishStreamId,\r\n          userName: window.UserName,\r\n        };\r\n        this.s.emit(\"recording_start\", data);\r\n      }\r\n      // Adding track to record\r\n      if (this.recorder && this.oldId !== streamId) {\r\n        window.webRTCAdaptor.recorder.addStream(event.streams[0], {\r\n          Xindex: this.xindex,\r\n          Yindex: this.yindex,\r\n          streamId: streamId,\r\n        });\r\n        if (this.xindex === 3) {\r\n          this.yindex++;\r\n          this.xindex = 0;\r\n        }\r\n        this.xindex++;\r\n        this.oldId = streamId;\r\n      }\r\n    }\r\n  }\r\n\r\n  iceCandidateReceived(event, streamId) {\r\n    if (event.candidate) {\r\n\r\n      var protocolSupported = false;\r\n\r\n      if (event.candidate.candidate == \"\") {\r\n        //event candidate can be received and its value can be \"\".\r\n        //don't compare the protocols\r\n        protocolSupported = true;\r\n      }\r\n      else if (typeof event.candidate.protocol == \"undefined\") {\r\n        this.candidateTypes.forEach(element => {\r\n          if (event.candidate.candidate.toLowerCase().includes(element)) {\r\n            protocolSupported = true;\r\n          }\r\n        });\r\n      }\r\n      else {\r\n        protocolSupported = this.candidateTypes.includes(event.candidate.protocol.toLowerCase());\r\n      }\r\n\r\n\r\n      if (protocolSupported) {\r\n\r\n        var jsCmd = {\r\n          command: \"takeCandidate\",\r\n          streamId: streamId,\r\n          label: event.candidate.sdpMLineIndex,\r\n          id: event.candidate.sdpMid,\r\n          candidate: event.candidate.candidate\r\n        };\r\n\r\n        if (this.debug) {\r\n          console.log(\"sending ice candiate for stream Id \" + streamId);\r\n          console.log(JSON.stringify(event.candidate));\r\n        }\r\n        this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n      }\r\n      else {\r\n        console.log(\"Candidate's protocol(full sdp: \" + event.candidate.candidate + \") is not supported. Supported protocols: \" + this.candidateTypes);\r\n        if (event.candidate.candidate != \"\") { //\r\n          this.callbackError(\"protocol_not_supported\", \"Support protocols: \" + this.candidateTypes.toString() + \" candidate: \" + event.candidate.candidate);\r\n        }\r\n      }\r\n    }\r\n    else {\r\n      console.log(\"No event.candidate in the iceCandidate event\");\r\n    }\r\n  }\r\n\r\n  initDataChannel(streamId, dataChannel) {\r\n    dataChannel.onerror = (error) => {\r\n      console.log(\"Data Channel Error:\", error);\r\n      var obj = {\r\n        streamId: streamId,\r\n        error: error\r\n      };\r\n      console.log(\"channel status: \", dataChannel.readyState);\r\n      if (dataChannel.readyState != \"closed\") {\r\n        this.callbackError(\"data_channel_error\", obj);\r\n      }\r\n    };\r\n\r\n    dataChannel.onmessage = (event) => {\r\n      var obj = {\r\n        streamId: streamId,\r\n        data: event.data,\r\n      };\r\n\r\n      var data = obj.data;\r\n\r\n      if (typeof data === 'string' || data instanceof String) {\r\n        this.callback(\"data_received\", obj);\r\n      }\r\n      else {\r\n        var length = data.length || data.size || data.byteLength;\r\n\r\n        var view = new Int32Array(data, 0, 1);\r\n        var token = view[0];\r\n\r\n        var msg = this.receivingMessages[token];\r\n        if (msg == undefined) {\r\n          var view = new Int32Array(data, 0, 2);\r\n          var size = view[1];\r\n          msg = new ReceivingMessage(size);\r\n          this.receivingMessages[token] = msg;\r\n          if (length > 8) {\r\n            console.error(\"something went wrong in msg receiving\");\r\n          }\r\n          return;\r\n        }\r\n\r\n        var rawData = data.slice(4, length);\r\n\r\n        var dataView = new Uint8Array(msg.data);\r\n        dataView.set(new Uint8Array(rawData), msg.received, length - 4);\r\n        msg.received += length - 4;\r\n\r\n        if (msg.size == msg.received) {\r\n          obj.data = msg.data;\r\n          this.callback(\"data_received\", obj);\r\n        }\r\n      }\r\n    };\r\n\r\n    dataChannel.onopen = () => {\r\n      this.remotePeerConnection[streamId].dataChannel = dataChannel;\r\n      console.log(\"Data channel is opened\");\r\n      this.callback(\"data_channel_opened\", streamId)\r\n    };\r\n\r\n    dataChannel.onclose = () => {\r\n      console.log(\"Data channel is closed\");\r\n      this.callback(\"data_channel_closed\", streamId);\r\n    };\r\n  }\r\n\r\n  // data channel mode can be \"publish\" , \"play\" or \"peer\" based on this it is decided which way data channel is created\r\n  initPeerConnection(streamId, dataChannelMode) {\r\n    if (this.remotePeerConnection[streamId] == null) {\r\n      var closedStreamId = streamId;\r\n      console.log(\"stream id in init peer connection: \" + streamId + \" close stream id: \" + closedStreamId);\r\n      this.remotePeerConnection[streamId] = new RTCPeerConnection(this.peerconnection_config);\r\n      this.remoteDescriptionSet[streamId] = false;\r\n      this.iceCandidateList[streamId] = new Array();\r\n      if (!this.playStreamId.includes(streamId)) {\r\n        if (this.localStream != null) {\r\n          this.remotePeerConnection[streamId].addStream(this.localStream);\r\n        }\r\n      }\r\n      this.remotePeerConnection[streamId].onicecandidate = event => {\r\n        this.iceCandidateReceived(event, closedStreamId);\r\n      }\r\n      this.remotePeerConnection[streamId].ontrack = event => {\r\n        this.onTrack(event, closedStreamId);\r\n      }\r\n\r\n      this.remotePeerConnection[streamId].onnegotiationneeded = event => {\r\n        console.log(\"onnegotiationneeded\");\r\n      }\r\n\r\n      if (this.dataChannelEnabled) {\r\n        // skip initializing data channel if it is disabled\r\n        if (dataChannelMode == \"publish\") {\r\n          //open data channel if it's publish mode peer connection \r\n          const dataChannelOptions = {\r\n            ordered: true,\r\n          };\r\n          if (this.remotePeerConnection[streamId].createDataChannel) {\r\n            var dataChannel = this.remotePeerConnection[streamId].createDataChannel(streamId, dataChannelOptions);\r\n            this.initDataChannel(streamId, dataChannel);\r\n          }\r\n          else {\r\n            console.warn(\"CreateDataChannel is not supported\");\r\n          }\r\n\r\n        } else if (dataChannelMode == \"play\") {\r\n          //in play mode, server opens the data channel \r\n          this.remotePeerConnection[streamId].ondatachannel = ev => {\r\n            this.initDataChannel(streamId, ev.channel);\r\n          };\r\n        }\r\n        else {\r\n          //for peer mode do both for now\r\n          const dataChannelOptions = {\r\n            ordered: true,\r\n          };\r\n\r\n          if (this.remotePeerConnection[streamId].createDataChannel) {\r\n            var dataChannelPeer = this.remotePeerConnection[streamId].createDataChannel(streamId, dataChannelOptions);\r\n            this.initDataChannel(streamId, dataChannelPeer);\r\n\r\n            this.remotePeerConnection[streamId].ondatachannel = ev => {\r\n              this.initDataChannel(streamId, ev.channel);\r\n            };\r\n          }\r\n          else {\r\n            console.warn(\"CreateDataChannel is not supported\");\r\n          }\r\n        }\r\n      }\r\n\r\n      this.remotePeerConnection[streamId].oniceconnectionstatechange = event => {\r\n        var obj = { state: this.remotePeerConnection[streamId].iceConnectionState, streamId: streamId };\r\n        this.callback(\"ice_connection_state_changed\", obj);\r\n\r\n        if (!this.isPlayMode) {\r\n          if (this.remotePeerConnection[streamId].iceConnectionState == \"connected\") {\r\n\r\n            this.changeBandwidth(this.bandwidth, streamId).then(() => {\r\n              console.log(\"Bandwidth is changed to \" + this.bandwidth);\r\n            })\r\n              .catch(e => console.warn(e));\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n  }\r\n\r\n  closePeerConnection(streamId) {\r\n    if (this.remotePeerConnection[streamId] != null) {\r\n      if (this.remotePeerConnection[streamId].dataChannel != null) {\r\n        this.remotePeerConnection[streamId].dataChannel.close();\r\n      }\r\n      if (this.remotePeerConnection[streamId].signalingState != \"closed\") {\r\n        this.remotePeerConnection[streamId].close();\r\n        this.remotePeerConnection[streamId] = null;\r\n        delete this.remotePeerConnection[streamId];\r\n        var playStreamIndex = this.playStreamId.indexOf(streamId);\r\n        if (playStreamIndex != -1) {\r\n          this.playStreamId.splice(playStreamIndex, 1);\r\n        }\r\n      }\r\n    }\r\n\r\n    if (this.remotePeerConnectionStats[streamId] != null) {\r\n      clearInterval(this.remotePeerConnectionStats[streamId].timerId);\r\n      delete this.remotePeerConnectionStats[streamId];\r\n    }\r\n  }\r\n\r\n  signallingState(streamId) {\r\n    if (this.remotePeerConnection[streamId] != null) {\r\n      return this.remotePeerConnection[streamId].signalingState;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  iceConnectionState(streamId) {\r\n    if (this.remotePeerConnection[streamId] != null) {\r\n      return this.remotePeerConnection[streamId].iceConnectionState;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  gotDescription(configuration, streamId) {\r\n    this.remotePeerConnection[streamId]\r\n      .setLocalDescription(configuration)\r\n      .then(responose => {\r\n        console.debug(\"Set local description successfully for stream Id \" + streamId);\r\n\r\n        var jsCmd = {\r\n          command: \"takeConfiguration\",\r\n          streamId: streamId,\r\n          type: configuration.type,\r\n          sdp: configuration.sdp\r\n\r\n        };\r\n\r\n        if (this.debug) {\r\n          console.debug(\"local sdp: \");\r\n          console.debug(configuration.sdp);\r\n        }\r\n\r\n        this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n\r\n      }).catch((error) => {\r\n        console.error(\"Cannot set local description. Error is: \" + error);\r\n      });\r\n  }\r\n\r\n  initializeDummyFrame() {\r\n    // this.dummyCanvas.getContext('2d').fillRect(0, 0, 320, 240);\r\n    this.dummyCanvas.getContext(\"2d\").drawImage(document.getElementById(\"posterImgId\"), 0, 0, 315, 150);\r\n    this.replacementStream = this.dummyCanvas.captureStream();\r\n  }\r\n\r\n  turnOffLocalCamera(streamId) {\r\n    this.isCameraOn=false;\r\n    //Initialize the first dummy frame for switching.\r\n    this.initializeDummyFrame();\r\n\r\n    if (this.remotePeerConnection != null) {\r\n      let choosenId;\r\n      if (streamId != null || typeof streamId != \"undefined\") {\r\n        choosenId = streamId;\r\n      }\r\n      else {\r\n        choosenId = this.publishStreamId;\r\n      }\r\n      console.log(\"Turn off check\", this.isRecordingEnabled, this.backgroundChangeVar, this.isRecordingEnabled && this.backgroundChangeVar);\r\n      if (this.isRecordingEnabled && this.backgroundChangeVar) {\r\n        console.log(\"turnOfLocalCamera: isRecordingEnabled\");\r\n        let tempStream = new MediaStream();\r\n        let humIconTrack = this.replacementStream.getVideoTracks()[0]\r\n        tempStream.addTrack(humIconTrack);\r\n        tempStream.addTrack(this.tempStream.getAudioTracks()[0]);\r\n\r\n        console.log(\"turnOf temp stream\", tempStream);\r\n        this.recorder.streams[0].element.srcObject = tempStream;\r\n\r\n        let remTrack = this.tempStream.getVideoTracks()[0];\r\n        console.log(\"turnof rmtrack \", remTrack);\r\n        this.tempStream.removeTrack(remTrack);\r\n        remTrack.stop();\r\n        this.tempStream.addTrack(humIconTrack);\r\n        // this.localVideo.srcObject = tempStream;\r\n\r\n        let videoTrackSender = this.remotePeerConnection[choosenId].getSenders().find(function (s) {\r\n          return s.track.kind == \"video\";\r\n        });\r\n\r\n        console.log(\"turnOf videoTrackSender\", videoTrackSender);\r\n\r\n        if (videoTrackSender) {\r\n          videoTrackSender.replaceTrack(this.replacementStream.getVideoTracks()[0])\r\n          console.log(\"turnOf videoTrackSender changed\");\r\n          let srcStream = new MediaStream();\r\n          srcStream.addTrack(this.replacementStream.getVideoTracks()[0]);\r\n          srcStream.addTrack(this.tempStream.getAudioTracks()[0]);\r\n          this.localVideo.srcObject = srcStream;\r\n          // this.updateLocalVideoStream(stream, null, true);\r\n        }\r\n\r\n      } else {\r\n        this.updateVideoTrack(this.replacementStream, choosenId, this.mediaConstraints, null, true);\r\n      }\r\n      return true;\r\n    }\r\n    else {\r\n      this.callbackError(\"NoActiveConnection\");\r\n      return false;\r\n    }\r\n\r\n    //We need to send black frames within a time interval, because when the user turn off the camera,\r\n    //player can't connect to the sender since there is no data flowing. Sending a black frame in each 3 seconds resolves it.\r\n    if (this.blackFrameTimer == null) {\r\n      this.blackFrameTimer = setInterval(() => {\r\n        this.initializeDummyFrame();\r\n      }, 3000);\r\n    }\r\n  }\r\n\r\n  turnOnLocalCamera(streamId) {\r\n    this.isCameraOn = true;\r\n    if (this.blackFrameTimer != null) {\r\n      clearInterval(this.blackFrameTimer);\r\n      this.blackFrameTimer = null;\r\n    }\r\n    if (this.localStream == null) {\r\n      this.navigatorUserMedia(this.mediaConstraints, stream => {\r\n        this.gotStream(stream);\r\n      }, false);\r\n    }\r\n    //This method will get the camera track and replace it with dummy track\r\n    else if (this.remotePeerConnection != null) {\r\n      this.navigatorUserMedia(this.mediaConstraints, stream => {\r\n        let choosenId;\r\n        if (streamId != null || typeof streamId != \"undefined\") {\r\n          choosenId = streamId;\r\n        }\r\n        else {\r\n          choosenId = this.publishStreamId;\r\n        }\r\n        // this.tempStream = this.localStream;\r\n        // this.localStream = tempStream;\r\n        console.log(\"Turn on check\", this.isRecordingEnabled, this.backgroundChangeVar, this.isRecordingEnabled && this.backgroundChangeVar);\r\n        if (this.isRecordingEnabled && this.backgroundChangeVar) {\r\n          console.log(\"turnOnLocalCamera: isRecordingEnabled\");\r\n          let tempStream = new MediaStream();\r\n          tempStream.addTrack(this.localStream.getVideoTracks()[0]);\r\n          tempStream.addTrack(this.tempStream.getAudioTracks()[0]);\r\n          console.log(\"turnOn temp stream\", tempStream);\r\n          this.recorder.streams[0].element.srcObject = tempStream;\r\n\r\n          // this.localVideo.srcObject = tempStream;\r\n\r\n          let videoTrackSender = this.remotePeerConnection[choosenId].getSenders().find(function (s) {\r\n            return s.track.kind == \"video\";\r\n          });\r\n\r\n          console.log(\"turnOn videoTrackSender\", videoTrackSender);\r\n\r\n          if (videoTrackSender) {\r\n            videoTrackSender.replaceTrack(this.localStream.getVideoTracks()[0])\r\n            console.log(\"turnOn videoTrackSender changed\");\r\n            let srcStream = new MediaStream();\r\n            srcStream.addTrack(stream.getVideoTracks()[0]);\r\n            srcStream.addTrack(this.tempStream.getAudioTracks()[0]);\r\n            this.localVideo.srcObject = srcStream;\r\n            // this.updateLocalVideoStream(stream, null, true);\r\n          }\r\n          let remTrack = this.tempStream.getVideoTracks()[0];\r\n          console.log(\"turnon rmtrack \", remTrack);\r\n          // this.tempStream.removeTrack(remTrack);\r\n          // remTrack.stop();\r\n          // this.tempStream.addTrack(stream.getVideoTracks()[0]);\r\n\r\n        }\r\n        else {\r\n          this.updateVideoTrack(stream, choosenId, this.mediaConstraints, null, true);\r\n        }\r\n      }, false);\r\n      return true;\r\n    }\r\n    else {\r\n      this.callbackError(\"NoActiveConnection\");\r\n      return false;\r\n    }\r\n  }\r\n\r\n  muteLocalMic(streamId) {\r\n    try {\r\n      if (this.remotePeerConnection != null) {\r\n        var track = this.localStream.getAudioTracks()[0];\r\n        track.enabled = false;\r\n        var micData =\r\n          this.remotePeerConnection[window.publishStreamId].getSenders();\r\n        micData.map((peer) => {\r\n          if (peer.track.kind == \"audio\") {\r\n            peer.track.enabled = false;\r\n          }\r\n        });\r\n        // window.webRTCAdaptor.remotePeerConnection[\"rHHqvKJbZmcxAjch\"].getSenders()[1].track.enabled = false;\r\n        this.isMicOn = false;\r\n        var data = {\r\n          streamId: streamId,\r\n          eventType: \"MIC_MUTED\",\r\n          dbName: this.secToken,\r\n        };\r\n\r\n        this.s.emit(\"micChange\", data);\r\n\r\n        this.micMute = true;\r\n        return true;\r\n      } else {\r\n        this.callbackError(\"NoActiveConnection\");\r\n        return true;\r\n      }\r\n    } catch {\r\n      this.callbackError(\"No Local Mic Found\");\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * if there is audio it calls callbackError with \"AudioAlreadyActive\" parameter\r\n   */\r\n  unmuteLocalMic(streamId) {\r\n    try {\r\n      if (this.remotePeerConnection != null) {\r\n        var track = this.localStream.getAudioTracks()[0];\r\n        track.enabled = true;\r\n        var micData =\r\n          this.remotePeerConnection[window.publishStreamId].getSenders();\r\n        micData.map((peer) => {\r\n          if (peer.track.kind == \"audio\") {\r\n            peer.track.enabled = true;\r\n          }\r\n        });\r\n        this.isMicOn = true;\r\n\r\n        var data = {\r\n          streamId: streamId,\r\n          eventType: \"MIC_UNMUTED\",\r\n          dbName: this.secToken,\r\n        };\r\n\r\n        this.s.emit(\"micChange\", data);\r\n\r\n        this.micMute = false;\r\n        return true;\r\n      } else {\r\n        this.callbackError(\"NoActiveConnection\");\r\n        return false;\r\n      }\r\n    } catch {\r\n      this.callbackError(\"No Local Mic Found\");\r\n      return false;\r\n    }\r\n  }\r\n\r\n  changeVolume(micValue) {\r\n    this.currentVolume = micValue;\r\n    if (this.soundOriginGainNode != null) {\r\n      this.soundOriginGainNode.gain.value = micValue; // Any number between 0 and 1.\r\n    }\r\n    if (this.secondStreamGainNode != null) {\r\n      this.secondStreamGainNode.gain.value = micValue; // Any number between 0 and 1.\r\n    }\r\n  }\r\n  showRaiseHand(streamId, partEmoji, userName) {\r\n    this.handRaise = !this.handRaise;\r\n    var raiseHandData = {\r\n      streamId: streamId,\r\n      userName: userName,\r\n      partEmoji: partEmoji,\r\n      dbName: this.secToken,\r\n    };\r\n    this.s.emit(\"handRaise\", raiseHandData);\r\n  }\r\n  takeConfiguration(idOfStream, configuration, typeOfConfiguration, idMapping) {\r\n    var streamId = idOfStream\r\n    var type = typeOfConfiguration;\r\n    var conf = configuration;\r\n    var isTypeOffer = (type == \"offer\");\r\n\r\n    var dataChannelMode = \"publish\";\r\n    if (isTypeOffer) {\r\n      dataChannelMode = \"play\";\r\n    }\r\n\r\n    this.idMapping[streamId] = idMapping;\r\n\r\n    this.initPeerConnection(streamId, dataChannelMode);\r\n\r\n    this.remotePeerConnection[streamId].setRemoteDescription(new RTCSessionDescription({\r\n      sdp: conf,\r\n      type: type\r\n    })).then(response => {\r\n\r\n      if (this.debug) {\r\n        console.debug(\"set remote description is succesfull with response: \" + response + \" for stream : \"\r\n          + streamId + \" and type: \" + type);\r\n        console.debug(conf);\r\n      }\r\n\r\n      this.remoteDescriptionSet[streamId] = true;\r\n      var length = this.iceCandidateList[streamId].length;\r\n      console.debug(\"Ice candidate list size to be added: \" + length);\r\n      for (var i = 0; i < length; i++) {\r\n        this.addIceCandidate(streamId, this.iceCandidateList[streamId][i]);\r\n      }\r\n      this.iceCandidateList[streamId] = [];\r\n\r\n      if (isTypeOffer) {\r\n        //SDP constraints may be different in play mode\r\n        console.log(\"try to create answer for stream id: \" + streamId);\r\n\r\n        this.remotePeerConnection[streamId].createAnswer(this.sdp_constraints)\r\n          .then(configuration => {\r\n            console.log(\"created answer for stream id: \" + streamId);\r\n            //support for stereo\r\n            configuration.sdp = configuration.sdp.replace(\"useinbandfec=1\", \"useinbandfec=1; stereo=1\");\r\n            this.gotDescription(configuration, streamId);\r\n          })\r\n          .catch((error) => {\r\n            console.error(\"create answer error :\" + error);\r\n          });\r\n      }\r\n\r\n    }).catch((error) => {\r\n      if (this.debug) {\r\n        console.error(\"set remote description is failed with error: \" + error);\r\n      }\r\n      if (error.toString().indexOf(\"InvalidAccessError\") > -1 || error.toString().indexOf(\"setRemoteDescription\") > -1) {\r\n        /**\r\n         * This error generally occurs in codec incompatibility.\r\n         * AMS for a now supports H.264 codec. This error happens when some browsers try to open it from VP8.\r\n         */\r\n        this.callbackError(\"notSetRemoteDescription\");\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n  takeCandidate(idOfTheStream, tmpLabel, tmpCandidate) {\r\n    var streamId = idOfTheStream;\r\n    var label = tmpLabel;\r\n    var candidateSdp = tmpCandidate;\r\n\r\n    var candidate = new RTCIceCandidate({\r\n      sdpMLineIndex: label,\r\n      candidate: candidateSdp\r\n    });\r\n\r\n    var dataChannelMode = \"peer\";\r\n    this.initPeerConnection(streamId, dataChannelMode);\r\n\r\n    if (this.remoteDescriptionSet[streamId] == true) {\r\n      this.addIceCandidate(streamId, candidate);\r\n    }\r\n    else {\r\n      console.debug(\"Ice candidate is added to list because remote description is not set yet\");\r\n      this.iceCandidateList[streamId].push(candidate);\r\n    }\r\n  };\r\n\r\n  addIceCandidate(streamId, candidate) {\r\n    var protocolSupported = false;\r\n    if (candidate.candidate == \"\") {\r\n      //candidate can be received and its value can be \"\".\r\n      //don't compare the protocols\r\n      protocolSupported = true;\r\n    }\r\n    else if (typeof candidate.protocol == \"undefined\") {\r\n      this.candidateTypes.forEach(element => {\r\n        if (candidate.candidate.toLowerCase().includes(element)) {\r\n          protocolSupported = true;\r\n        }\r\n      });\r\n    }\r\n    else {\r\n      protocolSupported = this.candidateTypes.includes(candidate.protocol.toLowerCase());\r\n    }\r\n\r\n    if (protocolSupported) {\r\n\r\n      this.remotePeerConnection[streamId].addIceCandidate(candidate)\r\n        .then(response => {\r\n          if (this.debug) {\r\n            console.log(\"Candidate is added for stream \" + streamId);\r\n          }\r\n        })\r\n        .catch((error) => {\r\n          console.error(\"ice candiate cannot be added for stream id: \" + streamId + \" error is: \" + error);\r\n          console.error(candidate);\r\n        });\r\n    }\r\n    else {\r\n      if (this.debug) {\r\n        console.log(\"Candidate's protocol(\" + candidate.protocol + \") is not supported.\" +\r\n          \"Candidate: \" + candidate.candidate + \" Supported protocols:\" + this.candidateTypes);\r\n      }\r\n    }\r\n  };\r\n\r\n  startPublishing(idOfStream) {\r\n    var streamId = idOfStream;\r\n\r\n    this.initPeerConnection(streamId, \"publish\");\r\n\r\n    this.remotePeerConnection[streamId].createOffer(this.sdp_constraints)\r\n      .then(configuration => {\r\n        this.gotDescription(configuration, streamId);\r\n      })\r\n      .catch((error) => {\r\n        console.error(\"create offer error for stream id: \" + streamId + \" error: \" + error);\r\n      });\r\n  };\r\n\r\n  /**\r\n   * If we have multiple video tracks in coming versions, this method may cause some issues\r\n   */\r\n  getVideoSender(streamId) {\r\n    var videoSender = null;\r\n    if ((adapter.browserDetails.browser === 'chrome' ||\r\n      (adapter.browserDetails.browser === 'firefox' ||\r\n        adapter.browserDetails.browser === 'safari' &&\r\n        adapter.browserDetails.version >= 64)) &&\r\n      'RTCRtpSender' in window &&\r\n      'setParameters' in window.RTCRtpSender.prototype) {\r\n      if (this.remotePeerConnection[streamId] != null) {\r\n        const senders = this.remotePeerConnection[streamId].getSenders();\r\n\r\n        for (let i = 0; i < senders.length; i++) {\r\n          if (senders[i].track != null && senders[i].track.kind == \"video\") {\r\n            videoSender = senders[i];\r\n            break;\r\n          }\r\n        }\r\n      }\r\n\r\n    }\r\n    return videoSender;\r\n  }\r\n\r\n  /**\r\n   * bandwidth is in kbps\r\n   */\r\n  changeBandwidth(bandwidth, streamId) {\r\n    var errorDefinition = \"\";\r\n\r\n    var videoSender = this.getVideoSender(streamId);\r\n\r\n    if (videoSender != null) {\r\n      const parameters = videoSender.getParameters();\r\n\r\n      if (!parameters.encodings) {\r\n        parameters.encodings = [{}];\r\n      }\r\n\r\n      if (bandwidth === 'unlimited') {\r\n        delete parameters.encodings[0].maxBitrate;\r\n      }\r\n      else {\r\n        parameters.encodings[0].maxBitrate = bandwidth * 1000;\r\n      }\r\n\r\n      return videoSender.setParameters(parameters)\r\n    }\r\n    else {\r\n      errorDefinition = \"Video sender not found to change bandwidth. Streaming may not be active\";\r\n    }\r\n\r\n    return Promise.reject(errorDefinition);\r\n  };\r\n\r\n  getStats(streamId) {\r\n    console.log(\"peerstatsgetstats = \" + this.remotePeerConnectionStats[streamId]);\r\n\r\n    this.remotePeerConnection[streamId].getStats(null).then(stats => {\r\n      var bytesReceived = -1;\r\n      var videoPacketsLost = -1;\r\n      var audioPacketsLost = -1;\r\n      var fractionLost = -1;\r\n      var currentTime = -1;\r\n      var bytesSent = -1;\r\n      var audioLevel = -1;\r\n      var qlr = \"\";\r\n      var framesEncoded = -1;\r\n      var width = -1;\r\n      var height = -1;\r\n      var fps = -1;\r\n      var frameWidth = -1;\r\n      var frameHeight = -1;\r\n      var videoRoundTripTime = -1;\r\n      var videoJitter = -1;\r\n\r\n      var audioRoundTripTime = -1;\r\n      var audioJitter = -1;\r\n\r\n      var framesDecoded = -1;\r\n      var framesDropped = -1;\r\n      var framesReceived = -1;\r\n\r\n      var audioJitterAverageDelay = -1;\r\n      var videoJitterAverageDelay = -1;\r\n\r\n\r\n      stats.forEach(value => {\r\n\r\n        //console.log(value);\r\n\r\n        if (value.type == \"inbound-rtp\" && typeof value.kind != \"undefined\") {\r\n          bytesReceived += value.bytesReceived;\r\n          if (value.kind == \"audio\") {\r\n            audioPacketsLost = value.packetsLost;\r\n          }\r\n          else if (value.kind == \"video\") {\r\n            videoPacketsLost = value.packetsLost;\r\n          }\r\n\r\n          fractionLost += value.fractionLost;\r\n          currentTime = value.timestamp;\r\n\r\n\r\n        }\r\n        else if (value.type == \"outbound-rtp\") {//TODO: SPLIT AUDIO AND VIDEO BITRATES\r\n          bytesSent += value.bytesSent\r\n          currentTime = value.timestamp\r\n          qlr = value.qualityLimitationReason;\r\n          if (value.framesEncoded != null) { //audio tracks are undefined here\r\n            framesEncoded += value.framesEncoded;\r\n          }\r\n        }\r\n        else if (value.type == \"track\" && typeof value.kind != \"undefined\" && value.kind == \"audio\") {\r\n          if (typeof value.audioLevel != \"undefined\") {\r\n            audioLevel = value.audioLevel;\r\n          }\r\n\r\n          if (typeof value.jitterBufferDelay != \"undefined\" && typeof value.jitterBufferEmittedCount != \"undefined\") {\r\n            audioJitterAverageDelay = value.jitterBufferDelay / value.jitterBufferEmittedCount;\r\n          }\r\n        }\r\n        else if (value.type == \"track\" && typeof value.kind != \"undefined\" && value.kind == \"video\") {\r\n          if (typeof value.frameWidth != \"undefined\") {\r\n            frameWidth = value.frameWidth;\r\n          }\r\n          if (typeof value.frameHeight != \"undefined\") {\r\n            frameHeight = value.frameHeight;\r\n          }\r\n\r\n          if (typeof value.framesDecoded != \"undefined\") {\r\n            framesDecoded = value.framesDecoded;\r\n          }\r\n\r\n          if (typeof value.framesDropped != \"undefined\") {\r\n            framesDropped = value.framesDropped;\r\n          }\r\n\r\n          if (typeof value.framesReceived != \"undefined\") {\r\n            framesReceived = value.framesReceived;\r\n          }\r\n\r\n          if (typeof value.jitterBufferDelay != \"undefined\" && typeof value.jitterBufferEmittedCount != \"undefined\") {\r\n            videoJitterAverageDelay = value.jitterBufferDelay / value.jitterBufferEmittedCount;\r\n          }\r\n        }\r\n        else if (value.type == \"remote-inbound-rtp\" && typeof value.kind != \"undefined\") {\r\n\r\n          if (typeof value.packetsLost != \"undefined\") {\r\n            if (value.kind == \"video\") {\r\n              //this is the packetsLost for publishing\r\n              videoPacketsLost = value.packetsLost;\r\n            }\r\n            else if (value.kind == \"audio\") {\r\n              //this is the packetsLost for publishing\r\n              audioPacketsLost = value.packetsLost;\r\n            }\r\n          }\r\n\r\n          if (typeof value.roundTripTime != \"undefined\") {\r\n            if (value.kind == \"video\") {\r\n              videoRoundTripTime = value.roundTripTime;\r\n            }\r\n            else if (value.kind == \"audio\") {\r\n              audioRoundTripTime = value.roundTripTime;\r\n            }\r\n          }\r\n\r\n          if (typeof value.jitter != \"undefined\") {\r\n            if (value.kind == \"video\") {\r\n              videoJitter = value.jitter;\r\n            }\r\n            else if (value.kind == \"audio\") {\r\n              audioJitter = value.jitter;\r\n            }\r\n          }\r\n        }\r\n        else if (value.type == \"media-source\") {\r\n          if (value.kind == \"video\") { //returns video source dimensions, not necessarily dimensions being encoded by browser\r\n            width = value.width;\r\n            height = value.height;\r\n            fps = value.framesPerSecond;\r\n          }\r\n        }\r\n      });\r\n\r\n      this.remotePeerConnectionStats[streamId].totalBytesReceived = bytesReceived;\r\n      this.remotePeerConnectionStats[streamId].videoPacketsLost = videoPacketsLost;\r\n      this.remotePeerConnectionStats[streamId].audioPacketsLost = audioPacketsLost;\r\n      this.remotePeerConnectionStats[streamId].fractionLost = fractionLost;\r\n      this.remotePeerConnectionStats[streamId].currentTime = currentTime;\r\n      this.remotePeerConnectionStats[streamId].totalBytesSent = bytesSent;\r\n      this.remotePeerConnectionStats[streamId].audioLevel = audioLevel;\r\n      this.remotePeerConnectionStats[streamId].qualityLimitationReason = qlr;\r\n      this.remotePeerConnectionStats[streamId].totalFramesEncoded = framesEncoded;\r\n      this.remotePeerConnectionStats[streamId].resWidth = width;\r\n      this.remotePeerConnectionStats[streamId].resHeight = height;\r\n      this.remotePeerConnectionStats[streamId].srcFps = fps;\r\n      this.remotePeerConnectionStats[streamId].frameWidth = frameWidth;\r\n      this.remotePeerConnectionStats[streamId].frameHeight = frameHeight;\r\n      this.remotePeerConnectionStats[streamId].videoRoundTripTime = videoRoundTripTime;\r\n      this.remotePeerConnectionStats[streamId].videoJitter = videoJitter;\r\n      this.remotePeerConnectionStats[streamId].audioRoundTripTime = audioRoundTripTime;\r\n      this.remotePeerConnectionStats[streamId].audioJitter = audioJitter;\r\n      this.remotePeerConnectionStats[streamId].framesDecoded = framesDecoded;\r\n      this.remotePeerConnectionStats[streamId].framesDropped = framesDropped;\r\n      this.remotePeerConnectionStats[streamId].framesReceived = framesReceived;\r\n\r\n      this.remotePeerConnectionStats[streamId].videoJitterAverageDelay = videoJitterAverageDelay;\r\n      this.remotePeerConnectionStats[streamId].audioJitterAverageDelay = audioJitterAverageDelay;\r\n\r\n\r\n      this.callback(\"updated_stats\", this.remotePeerConnectionStats[streamId]);\r\n\r\n    });\r\n  }\r\n\r\n  disableStats(streamId) {\r\n    if (this.remotePeerConnectionStats[streamId] != null || typeof this.remotePeerConnectionStats[streamId] != 'undefined') {\r\n      clearInterval(this.remotePeerConnectionStats[streamId].timerId);\r\n    }\r\n  }\r\n\r\n  enableStats(streamId) {\r\n    if (this.remotePeerConnectionStats[streamId] == null) {\r\n      this.remotePeerConnectionStats[streamId] = new PeerStats(streamId);\r\n      this.remotePeerConnectionStats[streamId].timerId = setInterval(() => {\r\n        this.getStats(streamId);\r\n\r\n      }, 5000);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * After calling this function, create new WebRTCAdaptor instance, don't use the the same objectone\r\n   * Because all streams are closed on server side as well when websocket connection is closed.\r\n   */\r\n  closeWebSocket() {\r\n    for (var key in this.remotePeerConnection) {\r\n      this.remotePeerConnection[key].close();\r\n    }\r\n    //free the remote peer connection by initializing again\r\n    this.remotePeerConnection = new Array();\r\n    this.webSocketAdaptor.close();\r\n  }\r\n\r\n  checkWebSocketConnection() {\r\n    if (this.webSocketAdaptor == null || (this.webSocketAdaptor.isConnected() == false && this.webSocketAdaptor.isConnecting() == false)) {\r\n      this.webSocketAdaptor = new WebSocketAdaptor({ websocket_url: this.websocket_url, webrtcadaptor: this, callback: this.callback, callbackError: this.callbackError, debug: this.debug });\r\n    }\r\n  }\r\n\r\n  peerMessage(streamId, definition, data) {\r\n    var jsCmd = {\r\n      command: \"peerMessageCommand\",\r\n      streamId: streamId,\r\n      definition: definition,\r\n      data: data,\r\n    };\r\n\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  forceStreamQuality(streamId, resolution) {\r\n    var jsCmd = {\r\n      command: \"forceStreamQuality\",\r\n      streamId: streamId,\r\n      streamHeight: resolution,\r\n    };\r\n    this.webSocketAdaptor.send(JSON.stringify(jsCmd));\r\n  }\r\n\r\n  sendData(streamId, data) {\r\n    var CHUNK_SIZE = 16000;\r\n    var dataChannel = this.remotePeerConnection[streamId].dataChannel;\r\n    var length = data.length || data.size || data.byteLength;\r\n    var sent = 0;\r\n\r\n    if (typeof data === 'string' || data instanceof String) {\r\n      dataChannel.send(data);\r\n    }\r\n    else {\r\n      var token = Math.floor(Math.random() * 999999);\r\n      let header = new Int32Array(2);\r\n      header[0] = token;\r\n      header[1] = length;\r\n\r\n      dataChannel.send(header);\r\n\r\n      var sent = 0;\r\n      while (sent < length) {\r\n        var size = Math.min(length - sent, CHUNK_SIZE);\r\n        var buffer = new Uint8Array(size + 4);\r\n        var tokenArray = new Int32Array(1);\r\n        tokenArray[0] = token;\r\n        buffer.set(new Uint8Array(tokenArray.buffer, 0, 4), 0);\r\n\r\n        var chunk = data.slice(sent, sent + size);\r\n        buffer.set(new Uint8Array(chunk), 4);\r\n        sent += size;\r\n\r\n        dataChannel.send(buffer);\r\n      }\r\n    }\r\n  }\r\n\r\n  enableRecording(publishStreamId, userName) {\r\n    this.isRecordingEnabled = true;\r\n    if (this.isRecordingEnabled) {\r\n      this.recorder = new StreamMerger(320, 240, true, \"4:3\");\r\n      var data = { streamId: publishStreamId, userName: userName };\r\n      this.s.emit(\"recording_start\", data);\r\n      this.recorder.start();\r\n      if (this.localStream != null) {\r\n        this.recorder.addStream(this.localStream, {\r\n          Xindex: this.xindex,\r\n          Yindex: this.yindex,\r\n          streamId: publishStreamId,\r\n        });\r\n        if (this.xindex == 3) {\r\n          this.yindex++;\r\n          this.xindex = 0;\r\n        }\r\n        this.xindex++;\r\n      }\r\n      Object.keys(this.MediaStreamList).forEach((data) => {\r\n        let stream = new MediaStream();\r\n        if (\r\n          this.multiStream.getTrackById(\r\n            \"ARDAMSv\" + this.MediaStreamList[data].streamId\r\n          )\r\n        ) {\r\n          stream.addTrack(\r\n            this.multiStream.getTrackById(\r\n              \"ARDAMSv\" + this.MediaStreamList[data].streamId\r\n            )\r\n          );\r\n        }\r\n        if (\r\n          this.multiStream.getTrackById(\r\n            \"ARDAMSa\" + this.MediaStreamList[data].streamId\r\n          )\r\n        ) {\r\n          stream.addTrack(\r\n            this.multiStream.getTrackById(\r\n              \"ARDAMSa\" + this.MediaStreamList[data].streamId\r\n            )\r\n          );\r\n        }\r\n        this.recorder.addStream(stream, {\r\n          Xindex: this.xindex,\r\n          Yindex: this.yindex,\r\n          streamId: data,\r\n        }); /// changed by from publishStreamId to data\r\n        if (this.xindex == 3) {\r\n          this.yindex++;\r\n          this.xindex = 0;\r\n        }\r\n        this.xindex++;\r\n      });\r\n      var options = { mimeType: \"video/webm; codecs=vp9\" };\r\n      this.mediaRecorder = new MediaRecorder(this.recorder.result, options);\r\n      this.mediaRecorder.ondataavailable = this.handleRecorderData;\r\n      this.mediaRecorder.start();\r\n      return true;\r\n    } else {\r\n      this.callbackError(\"Already is Enabled!\");\r\n      return false;\r\n    }\r\n  }\r\n\r\n  handleRecorderData(event) {\r\n    this.recordedChunks = new Array();\r\n    if (event.data.size > 0) {\r\n      this.recordedChunks.push(event.data);\r\n      var blob = new Blob(this.recordedChunks, {\r\n        type: \"video/webm\",\r\n      });\r\n      var url = URL.createObjectURL(blob);\r\n      var a = document.createElement(\"a\");\r\n      document.body.appendChild(a);\r\n      a.style = \"display: none\";\r\n      a.href = url;\r\n      a.download = \"test.webm\";\r\n      a.click();\r\n      window.URL.revokeObjectURL(url);\r\n    } else {\r\n      console.log(recordedChunks);\r\n    }\r\n  }\r\n\r\n  disableRecording() {\r\n    try {\r\n      if (this.isRecordingEnabled) {\r\n        this.isRecordingEnabled = false;\r\n        this.recorder.stop();\r\n        this.mediaRecorder.stop();\r\n        this.xindex = 0;\r\n        this.yindex = 0;\r\n        var data = {\r\n          streamId: window.publishStreamId,\r\n          userName: window.UserName,\r\n        };\r\n        this.s.emit(\"recording_stop\", data);\r\n        console.log(\r\n          \"Recording Stopped. The vedio will be downloaded after few seconds.\"\r\n        );\r\n        return true;\r\n      } else {\r\n        this.callbackError(\"No Recording is on Process.\");\r\n        return false;\r\n      }\r\n    } catch {\r\n      return false;\r\n    }\r\n  }\r\n  backgroundModel() {\r\n    var currVideo = document.getElementById(\"localVideo\");\r\n    currVideo.onloadeddata = (event) => {\r\n      console.log(\r\n        \"Yay! The readyState just increased to  \" +\r\n        \"HAVE_CURRENT_DATA or greater for the first time.\"\r\n      );\r\n      if (this.net == null) {\r\n        console.log(\"Loading this config\");\r\n        bodyPix\r\n          .load({\r\n            architecture: \"MobileNetV1\",\r\n            outputStride: 8,\r\n            multiplier: 0.75,\r\n            quantBytes: 2,\r\n          })\r\n          .catch((error) => {\r\n            console.log(error);\r\n          })\r\n          .then((objNet) => {\r\n            this.net = objNet;\r\n          });\r\n      }\r\n    };\r\n  }\r\n\r\n  backgroundChangeCl() {\r\n    window.webRTCAdaptor.backgroundChangeVar = true;\r\n\r\n    document.getElementById(\"localVideoCanvas\").style.display = \"block\";\r\n\r\n    this.detectBody();\r\n    this.updateBackgroundStream();\r\n  }\r\n\r\n  updateBackgroundStream() {\r\n    var canvasTag = document.getElementById(\"localVideoCanvas\");\r\n    var canvasStream = canvasTag.captureStream();\r\n    var checkCanvasStream = window.webRTCAdaptor.remotePeerConnection[\r\n      window.publishStreamId\r\n    ]\r\n      .getSenders()\r\n      .find(function (s) {\r\n        return s.track.kind == \"video\";\r\n      });\r\n    if (canvasStream.getVideoTracks()[0]) {\r\n      console.log(\"checkCanvasStream\", checkCanvasStream);\r\n      checkCanvasStream.replaceTrack(canvasStream.getVideoTracks()[0]);\r\n      let tempStream = new MediaStream();\r\n      tempStream.addTrack(canvasStream.getVideoTracks()[0]);\r\n      tempStream.addTrack(this.localStream.getAudioTracks()[0]);\r\n      this.tempStream = this.localStream;\r\n      this.localStream = tempStream;\r\n      if (this.isRecordingEnabled) {\r\n        this.recorder.streams[0].element.srcObject = tempStream;\r\n      }\r\n    } else {\r\n      console.log(\"came to else update background stream\");\r\n      setTimeout(function () {\r\n        this.updateBackgroundStream();\r\n      }, 1000);\r\n    }\r\n  }\r\n\r\n  removeBackground() {\r\n    window.webRTCAdaptor.backgroundChangeVar = false;\r\n    if (document.getElementById(\"localVideo\").style.display === \"none\") {\r\n      document.getElementById(\"localVideo\").style.display = \"\";\r\n    }\r\n    document.getElementById(\"localVideoCanvas\").style.display = \"none\";\r\n    var localEle = document.getElementById(\"localVideo\");\r\n    var localStreamReact = localEle.captureStream();\r\n    var checkCanvasStream = window.webRTCAdaptor.remotePeerConnection[\r\n      window.publishStreamId\r\n    ]\r\n      .getSenders()\r\n      .find(function (s) {\r\n        return s.track.kind == \"video\";\r\n      });\r\n    checkCanvasStream.replaceTrack(localStreamReact.getVideoTracks()[0]);\r\n    if (this.tempStream) {\r\n      this.localStream = this.tempStream;\r\n      this.tempStream = null;\r\n    }\r\n    if (this.isRecordingEnabled) {\r\n      window.webRTCAdaptor.recorder.streams[0].element.srcObject =\r\n        this.localStream;\r\n    }\r\n  }\r\n\r\n  async detectBody() {\r\n    if (window.webRTCAdaptor.backgroundChangeVar == true) {\r\n      if (window.webRTCAdaptor.net != null) {\r\n        window.webRTCAdaptor.backgroundChangeVar == true;\r\n        var currVideo = await document.getElementById(\"localVideo\");\r\n\r\n        await window.webRTCAdaptor.net\r\n          .segmentPerson(currVideo, {\r\n            flipHorizontal: false,\r\n            internalResolution: \"low\",\r\n            segmentationThreshold: 0.33,\r\n          })\r\n          .then((personsegmentation) => {\r\n            window.webRTCAdaptor.drawBody(personsegmentation);\r\n          })\r\n          .catch((err) => {\r\n            console.log(err);\r\n          });\r\n      }\r\n      window.webRTCAdaptor.requestFrameId = requestAnimationFrame(\r\n        window.webRTCAdaptor.detectBody\r\n      );\r\n    }\r\n  }\r\n  drawBody(personSegmentation) {\r\n    var currVideo = document.getElementById(\"localVideo\");\r\n    var canvasTag = document.getElementById(\"localVideoCanvas\");\r\n    var canvasSec = document.getElementById(\"canvasSecId\");\r\n    var width = 532;\r\n    var heigth = 400;\r\n\r\n    canvasTag.getContext(\"2d\").drawImage(currVideo, 0, 0, width, heigth);\r\n    var imageData = canvasTag\r\n      .getContext(\"2d\")\r\n      .getImageData(0, 0, width, heigth);\r\n    var pixel = imageData.data;\r\n    var backImg = document.getElementById(\"bacImg\");\r\n    canvasSec.getContext(\"2d\").drawImage(backImg, 0, 0, width, heigth);\r\n    var imageSecData = canvasSec\r\n      .getContext(\"2d\")\r\n      .getImageData(0, 0, width, heigth);\r\n    var pixelSec = imageSecData.data;\r\n    for (var p = 0; p < pixel.length; p += 4) {\r\n      if (personSegmentation.data[p / 4] == 0) {\r\n        pixel[p + 3] = 0;\r\n      } else {\r\n        pixelSec[p + 3] = 0;\r\n      }\r\n    }\r\n    canvasSec.getContext(\"2d\").imageSmoothingEnabled = true;\r\n    canvasSec.getContext(\"2d\").putImageData(imageSecData, 0, 0);\r\n    canvasTag.getContext(\"2d\").drawImage(canvasSec, 0, 0, width, heigth);\r\n  }\r\n\r\n  stopScreenShare(streamId) {\r\n    if (this.backgroundChangeVar) {\r\n      this.backgroundChangeCl();\r\n    }\r\n    navigator.mediaDevices\r\n      .getUserMedia({ video: true })\r\n      .then((stream) => {\r\n        stream.onended = () => {\r\n          console.log('screenshare on ended call')\r\n        }\r\n        this.newScreenStream.getVideoTracks()[0].stop();\r\n\r\n        var checkPeerStream = this.remotePeerConnection[window.publishStreamId]\r\n          .getSenders()\r\n          .find(function (s) {\r\n            return s.track.kind == \"video\";\r\n          });\r\n        console.log(\"checkPeerStream\", checkPeerStream);\r\n        this.initializeDummyFrame()\r\n        let replacementStream = this.dummyCanvas.captureStream();\r\n        let videoTrack = this.isCameraOn ? stream.getVideoTracks()[0] : replacementStream.getVideoTracks()[0]\r\n\r\n        console.log(\"videoTrack\", videoTrack);\r\n        checkPeerStream.replaceTrack(videoTrack); \r\n\r\n        let newStopStream = new MediaStream();\r\n        newStopStream.addTrack(videoTrack);\r\n        newStopStream.addTrack(this.localStream.getAudioTracks()[0]);\r\n        document.querySelector(this.localVideoId).srcObject = newStopStream;\r\n        console.log(\"newStopStream\", newStopStream.getVideoTracks()[0]);\r\n        this.localStream = newStopStream;\r\n\r\n        this.isScreenShareAndCamera = false;\r\n        this.isScreenShare = false;\r\n        this.s.emit(\"stop_screensharing\", {\r\n          streamId: streamId,\r\n          dbName: this.secToken,\r\n        });\r\n        this.callback(\"screen_share_stopped\");\r\n\r\n        if (this.isRecordingEnabled) {\r\n          this.recorder.streams[0].element.srcObject = newStopStream;\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"stop screen share err\", err);\r\n      });\r\n  }\r\n\r\n  startScreenShare(streamId) {\r\n    console.log(\"start screen share\");\r\n    this.isScreenShare = true;\r\n    this.isScreenShareAndCamera = true;\r\n    navigator.mediaDevices\r\n      .getDisplayMedia({ video: { width: 4096, height: 2160 }, audio: false })\r\n      .then((stream) => {\r\n        stream.getVideoTracks()[0].onended = () => {\r\n          console.log(\"onended called video\");\r\n          this.stopScreenShare(streamId);\r\n        }\r\n        // stream.getAudioTracks()[0].onended = () => {\r\n        //   console.log(\"screenshare on ended call audio\")\r\n        // }\r\n        let videoTrackRemote = this.remotePeerConnection[streamId]\r\n          .getSenders()\r\n          .find(function (s) {\r\n            return s.track.kind == \"video\";\r\n          });\r\n        /// replacing local video src\r\n        let screenShareStream = new MediaStream();\r\n        screenShareStream.addTrack(stream.getVideoTracks()[0]);\r\n        screenShareStream.addTrack(this.localStream.getAudioTracks()[0]);\r\n        document.querySelector(this.localVideoId).srcObject = screenShareStream;\r\n        /// replacing the peer connecting\r\n        videoTrackRemote.replaceTrack(stream.getVideoTracks()[0]);\r\n        this.newScreenStream = stream;\r\n\r\n        let localStreamVideoTrack = this.localStream.getVideoTracks()[0];\r\n\r\n        this.localStream = screenShareStream;\r\n\r\n        localStreamVideoTrack.stop();\r\n        this.s.emit(\"screensharing\", {\r\n          streamId: streamId,\r\n          dbName: this.secToken,\r\n        });\r\n        this.callback(\"screen_share_started\");\r\n        console.log(\"start screen share\", this.newScreenStream);\r\n        if (this.isRecordingEnabled) {\r\n          this.recorder.streams[0].element.srcObject = screenShareStream;\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"start screen share\", err);\r\n      });\r\n\r\n    // this.setVideoCameraSource(streamId, this.mediaConstraints, null, true);\r\n    // return this.isScreenShare;\r\n  }\r\n\r\n  encryptMessage(message) {\r\n    return CryptoJS.AES.encrypt(message, this.secToken).toString();\r\n  }\r\n\r\n  decryptMessage(encryptedMessage) {\r\n    return CryptoJS.AES.decrypt(encryptedMessage, this.secToken).toString(\r\n      CryptoJS.enc.Utf8\r\n    );\r\n  }\r\n}\r\n\r\nfunction SoundMeter(context) {\r\n  this.context = context;\r\n  this.instant = 0.0;\r\n  this.slow = 0.0;\r\n  this.clip = 0.0;\r\n  this.script = context.createScriptProcessor(2048, 1, 1);\r\n  const that = this;\r\n  this.script.onaudioprocess = function (event) {\r\n    const input = event.inputBuffer.getChannelData(0);\r\n    let i;\r\n    let sum = 0.0;\r\n    let clipcount = 0;\r\n    for (i = 0; i < input.length; ++i) {\r\n      sum += input[i] * input[i];\r\n      if (Math.abs(input[i]) > 0.99) {\r\n        clipcount += 1;\r\n      }\r\n    }\r\n    that.instant = Math.sqrt(sum / input.length);\r\n    that.slow = 0.95 * that.slow + 0.05 * that.instant;\r\n    that.clip = clipcount / input.length;\r\n  };\r\n}\r\n\r\nSoundMeter.prototype.connectToSource = function (stream, callback) {\r\n  console.log(\"SoundMeter connecting\");\r\n  try {\r\n    this.mic = this.context.createMediaStreamSource(stream);\r\n    this.mic.connect(this.script);\r\n    // necessary to make sample run, but should not be.\r\n    this.script.connect(this.context.destination);\r\n    if (typeof callback !== \"undefined\") {\r\n      callback(null);\r\n    }\r\n  } catch (e) {\r\n    console.error(e);\r\n    if (typeof callback !== \"undefined\") {\r\n      callback(e);\r\n    }\r\n  }\r\n};\r\n\r\nSoundMeter.prototype.stop = function () {\r\n  console.log(\"SoundMeter stopping\");\r\n  this.mic.disconnect();\r\n  this.script.disconnect();\r\n};\r\n\r\nfunction checkMicSensitivity(stream, streamId) {\r\n  // const instantMeter = document.querySelector(`#micSensitivityMeter${streamId}`);\r\n  window.audioContext = new AudioContext();\r\n  const soundMeter = (window.soundMeter = new SoundMeter(window.audioContext));\r\n  soundMeter.connectToSource(stream, function (e) {\r\n    if (e) {\r\n      console.log(e);\r\n      return;\r\n    }\r\n    let meterRefresh = setInterval(() => {\r\n      const speakerId = document.querySelector(`#remoteSpeaker${streamId}`);\r\n      let speakerValue = soundMeter.instant.toFixed(2);\r\n      // console.log(speakerValue, speakerId, \"speakers\", speakerValue >= 0.01);\r\n      //      instantMeter.value = speakerValue;\r\n      if (speakerId && speakerValue >= 0.01) {\r\n        speakerId.style.display = \"block\";\r\n      } else if (speakerId) {\r\n        speakerId.style.display = \"none\";\r\n      } else {\r\n        clearInterval(meterRefresh);\r\n      }\r\n    }, 800);\r\n  });\r\n}\r\n\r\nfunction getHandRaiseEmojiTag(emojival, idval) {\r\n  if (emojival == \"Thumbsup\") {\r\n    document.getElementById(idval).style.display = \"block\";\r\n  } else if (emojival == \"Heart\") {\r\n    document.getElementById(idval).style.display = \"block\";\r\n  }\r\n  setTimeout(function () {\r\n    document.getElementById(idval).style.display = \"none\";\r\n  }, 4000);\r\n}\r\n\r\nmodule.exports = {\r\n  WebRTCAdaptor,\r\n  SoundMeter,\r\n  checkMicSensitivity,\r\n  defaultErrorCallback,\r\n  publish,\r\n  streamInformation,\r\n  playVideo,\r\n  reInit,\r\n  getHandRaiseEmojiTag,\r\n  handleNotificationEvent,\r\n};\r\n"],"sourceRoot":""}